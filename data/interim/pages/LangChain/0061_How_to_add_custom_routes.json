{
  "title": "How to add custom routes",
  "source_url": "https://docs.langchain.com/langsmith/custom-routes",
  "content": "When deploying agents to LangSmith Deployment, your server automatically exposes routes for creating runs and threads, interacting with the long-term memory store, managing configurable assistants, and other core functionality ([see all default API endpoints](/langsmith/server-api-ref)).\n\nYou can add custom routes by providing your own [`Starlette`](https://www.starlette.io/applications/) app (including [`FastAPI`](https://fastapi.tiangolo.com/), [`FastHTML`](https://fastht.ml/) and other compatible apps). You make LangSmith aware of this by providing a path to the app in your `langgraph.json` configuration file.\n\nDefining a custom app object lets you add any routes you'd like, so you can do anything from adding a `/login` endpoint to writing an entire full-stack web-app, all deployed in a single Agent Server.\n\nBelow is an example using FastAPI.\n\n## Create app\n\nStarting from an **existing** LangSmith application, add the following custom route code to your `webapp.py` file. If you are starting from scratch, you can create a new app from a template using the CLI.\n\n```bash  theme={null}\nlanggraph new --template=new-langgraph-project-python my_new_project\n```\n\nOnce you have a LangGraph project, add the following app code:\n\n```python {highlight={4}} theme={null}\n# ./src/agent/webapp.py\nfrom fastapi import FastAPI\n\napp = FastAPI()\n\n\n@app.get(\"/hello\")\ndef read_root():\n    return {\"Hello\": \"World\"}\n\n```\n\n## Configure `langgraph.json`\n\nAdd the following to your `langgraph.json` configuration file. Make sure the path points to the FastAPI application instance `app` in the `webapp.py` file you created above.\n\n```json  theme={null}\n{\n  \"dependencies\": [\".\"],\n  \"graphs\": {\n    \"agent\": \"./src/agent/graph.py:graph\"\n  },\n  \"env\": \".env\",\n  \"http\": {\n    \"app\": \"./src/agent/webapp.py:app\"\n  }\n  // Other configuration options like auth, store, etc.\n}\n```\n\n## Start server\n\nTest the server out locally:\n\n```bash  theme={null}\nlanggraph dev --no-browser\n```\n\nIf you navigate to `localhost:2024/hello` in your browser (`2024` is the default development port), you should see the `/hello` endpoint returning `{\"Hello\": \"World\"}`.\n\n<Note>\n  **Shadowing default endpoints**\n  The routes you create in the app are given priority over the system defaults, meaning you can shadow and redefine the behavior of any default endpoint.\n</Note>\n\n## Deploying\n\nYou can deploy this app as-is to LangSmith or to your self-hosted platform.\n\n## Next steps\n\nNow that you've added a custom route to your deployment, you can use this same technique to further customize how your server behaves, such as defining custom [custom middleware](/langsmith/custom-middleware) and [custom lifespan events](/langsmith/custom-lifespan).\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/custom-routes.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 3076
}