{
  "title": "BedrockChat",
  "source_url": "https://docs.langchain.com/oss/javascript/integrations/chat/bedrock",
  "content": "[Amazon Bedrock](https://aws.amazon.com/bedrock/) is a fully managed service that offers a choice of high-performing foundation models (FMs) from leading AI companies like AI21 Labs, Anthropic, Cohere, Meta, Stability AI, and Amazon via a single API, along with a broad set of capabilities you need to build generative AI applications with security, privacy, and responsible AI.\n\nThis will help you getting started with Amazon Bedrock [chat models](/oss/javascript/langchain/models). For detailed documentation of all `BedrockChat` features and configurations head to the [API reference](https://api.js.langchain.com/classes/langchain_community_chat_models_bedrock.BedrockChat.html).\n\n<Tip>\n  The newer [`ChatBedrockConverse` chat model is now available via the dedicated `@langchain/aws`](/oss/javascript/integrations/chat/bedrock_converse) integration package. Use [tool calling](/oss/javascript/langchain/tools) with more models with this package.\n</Tip>\n\n## Overview\n\n### Integration details\n\n| Class                                                                                                          | Package                                                          | Local | Serializable | [PY support](https://python.langchain.com/docs/integrations/chat/bedrock/) |                                               Downloads                                              |                                              Version                                              |\n| :------------------------------------------------------------------------------------------------------------- | :--------------------------------------------------------------- | :---: | :----------: | :------------------------------------------------------------------------: | :--------------------------------------------------------------------------------------------------: | :-----------------------------------------------------------------------------------------------: |\n| [`BedrockChat`](https://api.js.langchain.com/classes/langchain_community_chat_models_bedrock.BedrockChat.html) | [`@langchain/community`](https://npmjs.com/@langchain/community) |   ❌   |       ✅      |                                      ✅                                     | ![NPM - Downloads](https://img.shields.io/npm/dm/@langchain/community?style=flat-square\\&label=%20&) | ![NPM - Version](https://img.shields.io/npm/v/@langchain/community?style=flat-square\\&label=%20&) |\n\n### Model features\n\nSee the links in the table headers below for guides on how to use specific features.\n\n| [Tool calling](/oss/javascript/langchain/tools) | [Structured output](/oss/javascript/langchain/structured-output) | JSON mode | [Image input](/oss/javascript/langchain/messages#multimodal) | Audio input | Video input | [Token-level streaming](/oss/javascript/langchain/streaming/) | [Token usage](/oss/javascript/langchain/models#token-usage) | [Logprobs](/oss/javascript/langchain/models#log-probabilities) |\n| :---------------------------------------------: | :--------------------------------------------------------------: | :-------: | :----------------------------------------------------------: | :---------: | :---------: | :-----------------------------------------------------------: | :---------------------------------------------------------: | :------------------------------------------------------------: |\n|                        ✅                        |                                 ✅                                |     ❌     |                               ✅                              |      ❌      |      ❌      |                               ✅                               |                              ✅                              |                                ❌                               |\n\n## Setup\n\nTo access Bedrock models you'll need to create an AWS account, set up the Bedrock API service, get an access key ID and secret key, and install the `@langchain/community` integration package.\n\n### Credentials\n\nHead to the [AWS docs](https://docs.aws.amazon.com/bedrock/latest/userguide/getting-started.html) to sign up for AWS and setup your credentials. You'll also need to turn on model access for your account, which you can do by [following these instructions](https://docs.aws.amazon.com/bedrock/latest/userguide/model-access.html).\n\nIf you want to get automated tracing of your model calls you can also set your [LangSmith](https://docs.smith.langchain.com/) API key by uncommenting below:\n\n```bash  theme={null}\n# export LANGSMITH_TRACING=\"true\"\n# export LANGSMITH_API_KEY=\"your-api-key\"\n```\n\n### Installation\n\nThe LangChain `BedrockChat` integration lives in the `@langchain/community` package. You'll also need to install several official AWS packages as peer dependencies:\n\n<CodeGroup>\n  ```bash npm theme={null}\n  npm install @langchain/community @langchain/core @aws-crypto/sha256-js @aws-sdk/credential-provider-node @smithy/protocol-http @smithy/signature-v4 @smithy/eventstream-codec @smithy/util-utf8 @aws-sdk/types\n  ```\n\n  ```bash yarn theme={null}\n  yarn add @langchain/community @langchain/core @aws-crypto/sha256-js @aws-sdk/credential-provider-node @smithy/protocol-http @smithy/signature-v4 @smithy/eventstream-codec @smithy/util-utf8 @aws-sdk/types\n  ```\n\n  ```bash pnpm theme={null}\n  pnpm add @langchain/community @langchain/core @aws-crypto/sha256-js @aws-sdk/credential-provider-node @smithy/protocol-http @smithy/signature-v4 @smithy/eventstream-codec @smithy/util-utf8 @aws-sdk/types\n  ```\n</CodeGroup>\n\nYou can also use BedrockChat in web environments such as Edge functions or Cloudflare Workers by omitting the @aws-sdk/credential-provider-node dependency and using the web entrypoint:\n\n<CodeGroup>\n  ```bash npm theme={null}\n  npm install @langchain/community @langchain/core @aws-crypto/sha256-js @smithy/protocol-http @smithy/signature-v4 @smithy/eventstream-codec @smithy/util-utf8 @aws-sdk/types\n  ```\n\n  ```bash yarn theme={null}\n  yarn add @langchain/community @langchain/core @aws-crypto/sha256-js @smithy/protocol-http @smithy/signature-v4 @smithy/eventstream-codec @smithy/util-utf8 @aws-sdk/types\n  ```\n\n  ```bash pnpm theme={null}\n  pnpm add @langchain/community @langchain/core @aws-crypto/sha256-js @smithy/protocol-http @smithy/signature-v4 @smithy/eventstream-codec @smithy/util-utf8 @aws-sdk/types\n  ```\n</CodeGroup>\n\n## Instantiation\n\nCurrently, only Anthropic, Cohere, and Mistral models are supported with the chat model integration. For foundation models from AI21 or Amazon, see the [text generation Bedrock variant](/oss/javascript/integrations/llms/bedrock/).\n\nThere are a few different ways to authenticate with AWS - the below examples rely on an access key, secret access key and region set in your environment variables:\n\n```typescript  theme={null}\nimport { BedrockChat } from \"@langchain/community/chat_models/bedrock\";\n\nconst llm = new BedrockChat({\n  model: \"anthropic.claude-3-5-sonnet-20240620-v1:0\",\n  region: process.env.BEDROCK_AWS_REGION,\n  credentials: {\n    accessKeyId: process.env.BEDROCK_AWS_ACCESS_KEY_ID!,\n    secretAccessKey: process.env.BEDROCK_AWS_SECRET_ACCESS_KEY!,\n  },\n  // endpointUrl: \"custom.amazonaws.com\",\n  // modelKwargs: {\n  //   anthropic_version: \"bedrock-2023-05-31\",\n  // },\n});\n```\n\n## Invocation\n\n```typescript  theme={null}\nconst aiMsg = await llm.invoke([\n  [\n    \"system\",\n    \"You are a helpful assistant that translates English to French. Translate the user sentence.\",\n  ],\n  [\"human\", \"I love programming.\"],\n])\naiMsg\n```\n\n```output  theme={null}\nAIMessage {\n  \"content\": \"J'adore la programmation.\",\n  \"additional_kwargs\": {\n    \"id\": \"msg_bdrk_01RwhfuWkLLcp7ks1X3u8bwd\"\n  },\n  \"response_metadata\": {\n    \"type\": \"message\",\n    \"role\": \"assistant\",\n    \"model\": \"claude-3-5-sonnet-20240620\",\n    \"stop_reason\": \"end_turn\",\n    \"stop_sequence\": null,\n    \"usage\": {\n      \"input_tokens\": 29,\n      \"output_tokens\": 11\n    }\n  },\n  \"tool_calls\": [],\n  \"invalid_tool_calls\": []\n}\n```\n\n```typescript  theme={null}\nconsole.log(aiMsg.content)\n```\n\n```output  theme={null}\nJ'adore la programmation.\n```\n\n## Tool calling\n\nTool calling with Bedrock models works in a similar way to [other models](/oss/javascript/langchain/tools), but note that not all Bedrock models support tool calling. Please refer to the [AWS model documentation](https://docs.aws.amazon.com/bedrock/latest/APIReference/welcome.html) for more information.\n\n***\n\n## API reference\n\nFor detailed documentation of all `BedrockChat` features and configurations head to the [API reference](https://api.js.langchain.com/classes/langchain_community_chat_models_bedrock.BedrockChat.html).\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/integrations/chat/bedrock.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 9031
}