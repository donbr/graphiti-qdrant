{
  "title": "Stateless runs",
  "source_url": "https://docs.langchain.com/langsmith/stateless-runs",
  "content": "Most of the time, you provide a `thread_id` to your client when you run your graph in order to keep track of prior runs through the persistent state implemented in LangSmith Deployment. However, if you don't need to persist the runs you don't need to use the built-in persistent state and can create stateless runs.\n\n## Setup\n\nFirst, let's setup our client:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    from langgraph_sdk import get_client\n\n    client = get_client(url=<DEPLOYMENT_URL>)\n    # Using the graph deployed with the name \"agent\"\n    assistant_id = \"agent\"\n    # create thread\n    thread = await client.threads.create()\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    import { Client } from \"@langchain/langgraph-sdk\";\n\n    const client = new Client({ apiUrl: <DEPLOYMENT_URL> });\n    // Using the graph deployed with the name \"agent\"\n    const assistantId = \"agent\";\n    // create thread\n    const thread = await client.threads.create();\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n        --url <DEPLOYMENT_URL>/assistants/search \\\n        --header 'Content-Type: application/json' \\\n        --data '{\n            \"limit\": 10,\n            \"offset\": 0\n        }' | jq -c 'map(select(.config == null or .config == {})) | .[0].graph_id' && \\\n    curl --request POST \\\n        --url <DEPLOYMENT_URL>/threads \\\n        --header 'Content-Type: application/json' \\\n        --data '{}'\n    ```\n  </Tab>\n</Tabs>\n\n## Stateless streaming\n\nWe can stream the results of a stateless run in an almost identical fashion to how we stream from a run with the state attribute, but instead of passing a value to the `thread_id` parameter, we pass `None`:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    input = {\n        \"messages\": [\n            {\"role\": \"user\", \"content\": \"Hello! My name is Bagatur and I am 26 years old.\"}\n        ]\n    }\n\n    async for chunk in client.runs.stream(\n        # Don't pass in a thread_id and the stream will be stateless\n        None,\n        assistant_id,\n        input=input,\n        stream_mode=\"updates\",\n    ):\n        if chunk.data and \"run_id\" not in chunk.data:\n            print(chunk.data)\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    let input = {\n      messages: [\n        { role: \"user\", content: \"Hello! My name is Bagatur and I am 26 years old.\" }\n      ]\n    };\n\n    const streamResponse = client.runs.stream(\n      // Don't pass in a thread_id and the stream will be stateless\n      null,\n      assistantId,\n      {\n        input,\n        streamMode: \"updates\"\n      }\n    );\n    for await (const chunk of streamResponse) {\n      if (chunk.data && !(\"run_id\" in chunk.data)) {\n        console.log(chunk.data);\n      }\n    }\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n        --url <DEPLOYMENT_URL>/runs/stream \\\n        --header 'Content-Type: application/json' \\\n        --data \"{\n            \\\"assistant_id\\\": \\\"agent\\\",\n            \\\"input\\\": {\\\"messages\\\": [{\\\"role\\\": \\\"human\\\", \\\"content\\\": \\\"Hello! My name is Bagatur and I am 26 years old.\\\"}]},\n            \\\"stream_mode\\\": [\n                \\\"updates\\\"\n            ]\n        }\" | jq -c 'select(.data and (.data | has(\"run_id\") | not)) | .data'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n{'agent': {'messages': [{'content': \"Hello Bagatur! It's nice to meet you. Thank you for introducing yourself and sharing your age. Is there anything specific you'd like to know or discuss? I'm here to help with any questions or topics you're interested in.\", 'additional_kwargs': {}, 'response_metadata': {}, 'type': 'ai', 'name': None, 'id': 'run-489ec573-1645-4ce2-a3b8-91b391d50a71', 'example': False, 'tool_calls': [], 'invalid_tool_calls': [], 'usage_metadata': None}]}}\n```\n\n## Waiting for stateless results\n\nIn addition to streaming, you can also wait for a stateless result by using the `.wait` function like follows:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    stateless_run_result = await client.runs.wait(\n        None,\n        assistant_id,\n        input=input,\n    )\n    print(stateless_run_result)\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    let statelessRunResult = await client.runs.wait(\n      null,\n      assistantId,\n      { input: input }\n    );\n    console.log(statelessRunResult);\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n        --url <DEPLOYMENT_URL>/runs/wait \\\n        --header 'Content-Type: application/json' \\\n        --data '{\n            \"assistant_id\": <ASSISTANT_IDD>,\n        }'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n{\n'messages': [\n{\n'content': 'Hello! My name is Bagatur and I am 26 years old.',\n'additional_kwargs': {},\n'response_metadata': {},\n'type': 'human',\n'name': None,\n'id': '5e088543-62c2-43de-9d95-6086ad7f8b48',\n'example': False}\n,\n{\n'content': \"Hello Bagatur! It's nice to meet you. Thank you for introducing yourself and sharing your age. Is there anything specific you'd like to know or discuss? I'm here to help with any questions or topics you'd like to explore.\",\n'additional_kwargs': {},\n'response_metadata': {},\n'type': 'ai',\n'name': None,\n'id': 'run-d6361e8d-4d4c-45bd-ba47-39520257f773',\n'example': False,\n'tool_calls': [],\n'invalid_tool_calls': [],\n'usage_metadata': None\n}\n]\n}\n```\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/stateless-runs.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 5764
}