{
  "title": "Data purging for compliance",
  "source_url": "https://docs.langchain.com/langsmith/data-purging-compliance",
  "content": "This guide covers the various features available after data reaches LangSmith Cloud servers to help you achieve your privacy goals.\n\n## Data retention\n\nLangSmith provides automatic data retention capabilities to help with compliance and storage management. Data retention policies can be configured at the organization and project levels.\n\nFor detailed information about data retention configuration and management, please refer to the [Data Retention concepts](/langsmith/administration-overview#data-retention) documentation.\n\n## Trace deletes\n\nYou can use the API to complete trace deletes. The API supports two methods for deleting traces:\n\n1. **By trace IDs and session ID**: Delete specific traces by providing a list of trace IDs and their corresponding session ID (up to 1000 traces per request)\n2. **By metadata**: Delete traces across a workspace that match any of the specified metadata key-value pairs\n\nFor more details, refer to the [API spec](https://api.smith.langchain.com/redoc#tag/run/operation/delete_runs_api_v1_runs_delete_post).\n\n<Warning>\n  All trace deletions will delete related entities like feedbacks, aggregations, and stats across all data storages.\n</Warning>\n\n### Deletion timeline\n\nTrace deletions are processed during non-peak usage times and are not instant. LangChain runs the delete job on the weekend. There is no confirmation of deletion - you'll need to query the data again to verify it has been removed.\n\n### Delete specific traces\n\nTo delete specific traces by their trace IDs from a single session:\n\n```bash  theme={null}\ncurl -X POST \"https://api.smith.langchain.com/api/v1/runs/delete\" \\\n  -H \"x-api-key: YOUR_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"trace_ids\": [\"trace-id-1\", \"trace-id-2\", \"trace-id-3\"],\n    \"session_id\": \"session-id-1\"\n  }'\n```\n\n### Delete by metadata\n\nWhen deleting by metadata:\n\n* Accepts a `metadata` object of key/value pairs. KV pair matching uses an **or** condition. A trace will match if it has **any** of the key-value pairs specified in metadata (not all)\n* You don't need to specify a session id when deleting by metadata. Deletes will apply across the workspace.\n\nTo delete traces based on metadata across a workspace (matches **any** of the metadata key-value pairs):\n\n```bash  theme={null}\ncurl -X POST \"https://api.smith.langchain.com/api/v1/runs/delete\" \\\n  -H \"x-api-key: YOUR_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"metadata\": {\n      \"user_id\": \"user123\",\n      \"environment\": \"staging\"\n    }\n  }'\n```\n\nThis will delete traces that have either `user_id: \"user123\"` **or** `environment: \"staging\"` in their metadata.\n\n<Warning>\n  Remember that you can only schedule up to 1000 traces per session per request. For larger deletions, you'll need to make multiple requests.\n</Warning>\n\n## Example deletes\n\nYou can delete dataset examples self-serve via our API, which supports both soft and hard deletion methods depending on your data retention needs.\n\n<Warning>\n  Hard deletes will permanently remove inputs, outputs, and metadata from ALL versions of the specified examples across the entire dataset history.\n</Warning>\n\n### Deleting examples is a two-step process\n\nFor bulk operations, example deletion follows a two-step process:\n\n#### 1. Search for examples by metadata\n\nFind all examples with matching metadata across all datasets in a workspace.\n\n[GET /examples](https://api.smith.langchain.com/redoc#tag/examples/operation/read_examples_api_v1_examples_get)\n\n* `as_of` must be explicitly specified as a timestamp. Only examples created before the `as_of` date will be returned\n\n```bash  theme={null}\ncurl -X GET \"https://api.smith.langchain.com/api/v1/examples?as_of=2024-01-01T00:00:00Z\" \\\n  -H \"x-api-key: YOUR_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"metadata\": {\n      \"user_id\": \"user123\",\n      \"environment\": \"staging\"\n    }\n  }'\n```\n\nThis will return examples that have either `user_id: \"user123\"` **or** `environment: \"staging\"` in their metadata across all datasets in your workspace.\n\n#### 2. Hard delete examples\n\nOnce you have the example IDs, send a delete request. This will zero-out the inputs, outputs, and metadata from all versions of the dataset for that example.\n\n[DELETE /examples](https://api.smith.langchain.com/redoc#tag/examples/operation/delete_examples_api_v1_examples_delete)\n\n* Specify example IDs and add `\"hard_delete\": true` to the query params of the request\n\n```bash  theme={null}\ncurl -X DELETE \"https://api.smith.langchain.com/api/v1/examples?hard_delete=true\" \\\n  -H \"x-api-key: YOUR_API_KEY\" \\\n  -H \"Content-Type: application/json\" \\\n  -d '{\n    \"example_ids\": [\"example-id-1\", \"example-id-2\", \"example-id-3\"]\n  }'\n```\n\n### Deletion types\n\n#### Soft delete (default)\n\n* Creates tombstoned entries with NULL inputs/outputs in the dataset\n* Preserves historical data and maintains dataset versioning\n* Only affects the current version of the dataset\n\n#### Hard delete\n\n* Permanently removes inputs, outputs, and metadata from ALL dataset versions\n* Complete data removal when compliance requires zero-out across all versions\n* Add `\"hard_delete\": true` to the query parameters\n\nFor more details, refer to the [API spec](https://api.smith.langchain.com/redoc#tag/examples/operation/delete_examples_api_v1_examples_delete).\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/data-purging-compliance.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 5683
}