{
  "title": "Use HTTP headers for runtime configuration",
  "source_url": "https://docs.langchain.com/langsmith/configurable-headers",
  "content": "LangGraph allows runtime configuration to modify agent behavior and permissions dynamically. When using [LangSmith Deployment](/langsmith/deployment-quickstart), you can pass this configuration in the request body (`config`) or specific request headers. This enables adjustments based on user identity or other requests.\n\nFor privacy, control which headers are passed to the runtime configuration via the `http.configurable_headers` section in your [`langgraph.json`](/langsmith/application-structure#configuration-file) file.\n\nHere's how to customize the included and excluded headers:\n\n```json  theme={null}\n{\n  \"http\": {\n    \"configurable_headers\": {\n      \"includes\": [\"x-user-id\", \"x-organization-id\", \"my-prefix-*\"],\n      \"excludes\": [\"authorization\", \"x-api-key\"]\n    }\n  }\n}\n```\n\nThe `includes` and `excludes` lists accept exact header names or patterns using `*` to match any number of characters. For your security, no other regex patterns are supported.\n\n## Using within your graph\n\nYou can access the included headers in your graph using the `config` argument of any node.\n\n```python  theme={null}\ndef my_node(state, config):\n  organization_id = config[\"configurable\"].get(\"x-organization-id\")\n  ...\n```\n\nOr by fetching from context (useful in tools and or within other nested functions).\n\n```python  theme={null}\nfrom langgraph.config import get_config\n\ndef search_everything(query: str):\n  organization_id = get_config()[\"configurable\"].get(\"x-organization-id\")\n  ...\n```\n\nYou can even use this to dynamically compile the graph.\n\n```python  theme={null}\n# my_graph.py.\nimport contextlib\n\n@contextlib.asynccontextmanager\nasync def generate_agent(config):\n  organization_id = config[\"configurable\"].get(\"x-organization-id\")\n  if organization_id == \"org1\":\n    graph = ...\n    yield graph\n  else:\n    graph = ...\n    yield graph\n\n```\n\n```json  theme={null}\n{\n  \"graphs\": {\"agent\": \"my_grph.py:generate_agent\"}\n}\n```\n\n### Opt-out of configurable headers\n\nIf you'd like to opt-out of configurable headers, you can simply set a wildcard pattern in the `s` list:\n\n```json  theme={null}\n{\n  \"http\": {\n    \"configurable_headers\": {\n      \"excludes\": [\"*\"]\n    }\n  }\n}\n```\n\nThis will exclude all headers from being added to your run's configuration.\n\nNote that exclusions take precedence over inclusions.\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/configurable-headers.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 2672
}