{
  "title": "Mirror images for your LangSmith installation",
  "source_url": "https://docs.langchain.com/langsmith/self-host-mirroring-images",
  "content": "By default, LangSmith will pull images from our public Docker registry. However, if you are running LangSmith in an environment that does not have internet access, or if you would like to use a private Docker registry, you can mirror the images to your own registry and then configure your LangSmith installation to use those images.\n\n## Requirements\n\n* Authenticated access to a Docker registry that your Kubernetes cluster/machine has access to.\n* Docker installed on your local machine or a machine that has access to the Docker registry.\n* A Kubernetes cluster or a machine where you can run LangSmith.\n\n## Mirroring the Images\n\nFor your convenience, we have provided a script that will mirror the images for you. You can find the script in the [LangSmith Helm Chart repository](https://github.com/langchain-ai/helm/blob/main/charts/langsmith/scripts/mirror_langsmith_images.sh)\n\nTo use the script, you will need to run the script with the following command specifying your registry and platform:\n\n```bash  theme={null}\nbash mirror_images.sh <your-registry> [<platform>]\n```\n\nWhere `<your-registry>` is the URL of your Docker registry (e.g. `myregistry.com`) and `<platform>` is the platform you are using (e.g. `linux/amd64`, `linux/arm64`, etc.). If you do not specify a platform, it will default to `linux/amd64`.\n\nFor example, if your registry is `myregistry.com`, your platform is `linux/arm64`, and you want to use the latest version of the images, you would run:\n\n```bash  theme={null}\nbash mirror_langsmith_images.sh --registry myregistry --platform linux/arm64 --version 0.10.66\n```\n\nNote that this script will assume that you have Docker installed and that you are authenticated to your registry. It will also push the images to the specified registry with the same repository/tag as the original images.\n\nAlternatively, you can pull, mirror, and push the images manually. The images that you will need to mirror are found in the `values.yaml` file of the LangSmith Helm Chart. These can be found here: [LangSmith Helm Chart values.yaml](https://github.com/langchain-ai/helm/blob/main/charts/langsmith/values.yaml#L14)\n\nHere is an example of how to mirror the images using Docker:\n\n```bash  theme={null}\n# Pull the images from the public registry\ndocker pull langchain/langsmith-backend:latest\ndocker tag langchain/langsmith-backend:latest <your-registry>/langsmith-backend:latest\ndocker push <your-registry>/langsmith-backend:latest\n```\n\nYou will need to repeat this for each image that you want to mirror.\n\n## Configuration\n\nOnce the images are mirrored, you will need to configure your LangSmith installation to use the mirrored images. You can do this by modifying the `values.yaml` file for your LangSmith Helm Chart installation or the `.env` file for your Docker installation. Replace tag with the version you want to use, e.g. `0.10.66` for the latest version at the time of writing.\n\n<CodeGroup>\n  ```yaml Helm theme={null}\n  images:\n    imagePullSecrets: [] # Add your image pull secrets here if needed\n    registry: \"\" # Set this to your registry URL if you mirrored all images to the same registry using our script. Then you can remove the repository prefix from the images below.\n    aceBackendImage:\n      repository: \"(your-registry)/langchain/langsmith-ace-backend\"\n      pullPolicy: IfNotPresent\n      tag: \"0.10.66\"\n    backendImage:\n      repository: \"(your-registry)/langchain/langsmith-backend\"\n      pullPolicy: IfNotPresent\n      tag: \"0.10.66\"\n    frontendImage:\n      repository: \"(your-registry)/langchain/langsmith-frontend\"\n      pullPolicy: IfNotPresent\n      tag: \"0.10.66\"\n    hostBackendImage:\n      repository: \"(your-registry)/langchain/hosted-langserve-backend\"\n      pullPolicy: IfNotPresent\n      tag: \"0.10.66\"\n    operatorImage:\n      repository: \"(your-registry)/langchain/langgraph-operator\"\n      pullPolicy: IfNotPresent\n      tag: \"6cc83a8\"\n    platformBackendImage:\n      repository: \"(your-registry)/langchain/langsmith-go-backend\"\n      pullPolicy: IfNotPresent\n      tag: \"0.10.66\"\n    playgroundImage:\n      repository: \"(your-registry)/langchain/langsmith-playground\"\n      pullPolicy: IfNotPresent\n      tag: \"0.10.66\"\n    postgresImage:\n      repository: \"(your-registry)/postgres\"\n      pullPolicy: IfNotPresent\n      tag: \"14.7\"\n    redisImage:\n      repository: \"(your-registry)/redis\"\n      pullPolicy: IfNotPresent\n      tag: \"7\"\n    clickhouseImage:\n      repository: \"(your-registry)/clickhouse/clickhouse-server\"\n      pullPolicy: Always\n      tag: \"24.8\"\n  ```\n\n  ```bash Docker theme={null}\n  # In your .env file\n  _REGISTRY=your-registry # Set this to your registry URL if you mirrored all images to the same registry using our script. Otherwise you will need to manually set the repository for each image in the compose file.\n  ```\n</CodeGroup>\n\nOnce configured, you will need to update your LangSmith installation. You can follow our upgrade guide here: [Upgrading LangSmith](/langsmith/self-host-upgrades).If your upgrade is successful, your LangSmith instance should now be using the mirrored images from your Docker registry.\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/self-host-mirroring-images.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 5476
}