{
  "title": "Upgrade an installation",
  "source_url": "https://docs.langchain.com/langsmith/self-host-upgrades",
  "content": "For general upgrade instructions, please follow the instructions below. Certain versions may have specific upgrade instructions, which will be detailed in more specific upgrade guides.\n\n## Kubernetes(Helm)\n\nIf you don't have the repo added, run the following command to add it:\n\n```bash  theme={null}\nhelm repo add langchain https://langchain-ai.github.io/helm/\n```\n\nUpdate your local helm repo\n\n```bash  theme={null}\nhelm repo update\n```\n\nUpdate your helm chart config file with any updates that are needed in the new version. These will be detailed in the release notes for the new version.\n\nRun the following command to upgrade the chart(replace version with the version you want to upgrade to):\n\n<Note>\n  If you are using a namespace other than the default namespace, you will need to specify the namespace in the `helm` and `kubectl` commands by using the `-n <namespace` flag.\n</Note>\n\nFind the latest version of the chart. You can find this in the [LangSmith Helm Chart GitHub repository](https://github.com/langchain-ai/helm/releases) or by running the following command:\n\n```bash  theme={null}\nhelm search repo langchain/langsmith --versions\n```\n\nYou should see an output similar to this:\n\n```bash  theme={null}\nlangchain/langsmith     0.10.14         0.10.32         Helm chart to deploy the langsmith application ...\nlangchain/langsmith     0.10.13         0.10.32         Helm chart to deploy the langsmith application ...\nlangchain/langsmith     0.10.12         0.10.32         Helm chart to deploy the langsmith application ...\nlangchain/langsmith     0.10.11         0.10.29         Helm chart to deploy the langsmith application ...\nlangchain/langsmith     0.10.10         0.10.29         Helm chart to deploy the langsmith application ...\nlangchain/langsmith     0.10.9          0.10.29         Helm chart to deploy the langsmith application ...\n```\n\nChoose the version you want to upgrade to (generally the latest version is recommended) and note the version number.\n\n```bash  theme={null}\nhelm upgrade <release-name> langchain/langsmith --version <version> --values <path-to-values-file> --wait --debug\n```\n\nVerify that the upgrade was successful:\n\n```bash  theme={null}\nhelm status <release-name>\n```\n\nAll pods should be in the `Running` state. Verify that clickhouse is running and that both `migrations` jobs have completed.\n\n```bash  theme={null}\nkubectl get pods\nNAME                                     READY   STATUS      RESTARTS   AGE\nlangsmith-backend-95b6d54f5-gz48b        1/1     Running     0          15h\nlangsmith-pg-migrations-d2z6k            0/1     Completed   0          5h48m\nlangsmith-ch-migrations-gasvk            0/1     Completed   0          5h48m\nlangsmith-clickhouse-0                   1/1     Running     0          26h\nlangsmith-frontend-84687d9d45-6cg4r      1/1     Running     0          15h\nlangsmith-hub-backend-66ffb75fb4-qg6kl   1/1     Running     0          15h\nlangsmith-playground-85b444d8f7-pl589    1/1     Running     0          15h\nlangsmith-queue-d58cb64f7-87d68          1/1     Running     0          15h\n```\n\n### Validate your deployment:\n\n1. Run `kubectl get services`\n\n   Output should look something like:\n\n```bash  theme={null}\nNAME                         TYPE           CLUSTER-IP       EXTERNAL-IP     PORT(S)                      AGE\nkubernetes                   ClusterIP      172.20.0.1       <none>          443/TCP                      27d\nlangsmith-backend            ClusterIP      172.20.22.34     <none>          1984/TCP                     21d\nlangsmith-clickhouse         ClusterIP      172.20.117.62    <none>          8123/TCP,9000/TCP            21d\nlangsmith-frontend           LoadBalancer   172.20.218.30    <external ip>   80:30093/TCP,443:31130/TCP   21d\nlangsmith-platform-backend   ClusterIP      172.20.232.183   <none>          1986/TCP                     21d\nlangsmith-playground         ClusterIP      172.20.167.132   <none>          3001/TCP                     21d\nlangsmith-postgres           ClusterIP      172.20.59.63     <none>          5432/TCP                     21d\nlangsmith-redis              ClusterIP      172.20.229.98    <none>          6379/TCP                     20d\n```\n\n2. Curl the external ip of the `langsmith-frontend` service:\n\n   ```bash  theme={null}\n   curl <external ip>/api/info\n   {\"version\":\"0.5.7\",\"license_expiration_time\":\"2033-05-20T20:08:06\",\"batch_ingest_config\":{\"scale_up_qsize_trigger\":1000,\"scale_up_nthreads_limit\":16,\"scale_down_nempty_trigger\":4,\"size_limit\":100,\"size_limit_bytes\":20971520}}\n   ```\n\nCheck that the version matches the version you upgraded to.\n\n3. Visit the external ip for the `langsmith-frontend` service on your browser\n\n   The LangSmith UI should be visible/operational\n\n   <img src=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=5310f686e7b9eebaaee4fe2a152a8675\" alt=\"LangSmith UI\" data-og-width=\"2886\" width=\"2886\" data-og-height=\"1698\" height=\"1698\" data-path=\"langsmith/images/langsmith-ui.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=280&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=5f155ce778ca848f89fefff237b69bcb 280w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=560&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=1d55d4068a9f53387c129b4688b0971e 560w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=840&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=feb20198d67249ece559e5fd0e6d8e98 840w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=1100&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=3e5eba764d911e567d5aaa9e5702327b 1100w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=1650&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=d45af56632578a8d1b05e546dfc8d01d 1650w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=2500&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=16a49517a6c224930fdb81c9ccde5527 2500w\" />\n\n## Docker\n\nUpgrading the Docker version of LangSmith is a bit more involved than the Helm version and may require a small amount of downtime. Please follow the instructions below to upgrade your Docker version of LangSmith.\n\n1. Update your `docker-compose.yml` file to the file used in the latest release. You can find this in the [LangSmith SDK GitHub repository](https://github.com/langchain-ai/langsmith-sdk/blob/main/python/langsmith/cli/docker-compose.yaml)\n2. Update your `.env` file with any new environment variables that are required in the new version. These will be detailed in the release notes for the new version.\n3. Run the following command to stop your current LangSmith instance:\n\n```bash  theme={null}\ndocker-compose down\n```\n\n4. Run the following command to start your new LangSmith instance in the background:\n\n```bash  theme={null}\ndocker-compose up -d\n```\n\nIf everything ran successfully, you should see all the LangSmith containers running and healthy.\n\n```bash  theme={null}\nCONTAINER ID   IMAGE                                  COMMAND                  CREATED        STATUS                        PORTS                                                      NAMES\ne1c8f01a4ffc   langchain/langsmith-frontend:0.5.7     \"/entrypoint.sh ngin…\"   10 hours ago   Up 40 seconds                 0.0.0.0:80->80/tcp, 8080/tcp                               cli-langchain-frontend-1\n39e1394846b9   langchain/langsmith-backend:0.5.7      \"/bin/sh -c 'exec uv…\"   10 hours ago   Up 40 seconds                 0.0.0.0:1984->1984/tcp                                     cli-langchain-backend-1\nf8688dd58f2f   langchain/langsmith-go-backend:0.5.7   \"./smith-go\"             10 hours ago   Up 40 seconds                 0.0.0.0:1986->1986/tcp                                     cli-langchain-platform-backend-1\n006f1303b04d   langchain/langsmith-backend:0.5.7      \"saq app.workers.que…\"   10 hours ago   Up 40 seconds                                                                            cli-langchain-queue-1\n73a90242ed3a   redis:7                                \"docker-entrypoint.s…\"   10 hours ago   Up About a minute (healthy)   0.0.0.0:63791->6379/tcp                                    cli-langchain-redis-1\neecf75ca672b   postgres:14.7                          \"docker-entrypoint.s…\"   10 hours ago   Up About a minute (healthy)   0.0.0.0:5433->5432/tcp                                     cli-langchain-db-1\n3aa5652a864d   clickhouse/clickhouse-server:23.9      \"/entrypoint.sh\"         10 hours ago   Up About a minute (healthy)   9009/tcp, 0.0.0.0:8124->8123/tcp, 0.0.0.0:9001->9000/tcp   cli-langchain-clickhouse-1\n84edc329a37f   langchain/langsmith-playground:0.5.7   \"docker-entrypoint.s…\"   10 hours ago   Up About a minute             0.0.0.0:3001->3001/tcp                                     cli-langchain-playground-1\n```\n\n### Validate your deployment:\n\n1. Curl the exposed port of the `cli-langchain-frontend-1` container:\n\n   ```bash  theme={null}\n   curl localhost:80/info\n   {\"version\":\"0.5.7\",\"license_expiration_time\":\"2033-05-20T20:08:06\",\"batch_ingest_config\":{\"scale_up_qsize_trigger\":1000,\"scale_up_nthreads_limit\":16,\"scale_down_nempty_trigger\":4,\"size_limit\":100,\"size_limit_bytes\":20971520}}\n   ```\n\n2. Visit the exposed port of the `cli-langchain-frontend-1` container on your browser\n\nThe LangSmith UI should be visible/operational\n\n<img src=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=5310f686e7b9eebaaee4fe2a152a8675\" alt=\"LangSmith UI\" data-og-width=\"2886\" width=\"2886\" data-og-height=\"1698\" height=\"1698\" data-path=\"langsmith/images/langsmith-ui.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=280&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=5f155ce778ca848f89fefff237b69bcb 280w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=560&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=1d55d4068a9f53387c129b4688b0971e 560w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=840&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=feb20198d67249ece559e5fd0e6d8e98 840w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=1100&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=3e5eba764d911e567d5aaa9e5702327b 1100w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=1650&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=d45af56632578a8d1b05e546dfc8d01d 1650w, https://mintcdn.com/langchain-5e9cc07a/4kN8yiLrZX_amfFn/langsmith/images/langsmith-ui.png?w=2500&fit=max&auto=format&n=4kN8yiLrZX_amfFn&q=85&s=16a49517a6c224930fdb81c9ccde5527 2500w\" />\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/self-host-upgrades.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 11394
}