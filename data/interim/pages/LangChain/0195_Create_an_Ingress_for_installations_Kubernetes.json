{
  "title": "Create an Ingress for installations (Kubernetes)",
  "source_url": "https://docs.langchain.com/langsmith/self-host-ingress",
  "content": "By default, LangSmith will provision a LoadBalancer service for the `langsmith-frontend`. Depending on your cloud provider, this may result in a public IP address being assigned to the service. If you would like to use a custom domain or have more control over the routing of traffic to your LangSmith installation, you can configure an Ingress, Gateway API, or Istio Gateway.\n\n## Requirements\n\n* An existing Kubernetes cluster\n* One of the following installed in your Kubernetes cluster:\n  * An Ingress Controller (for standard Ingress)\n  * Gateway API CRDs and a Gateway resource (for Gateway API)\n  * Istio (for Istio Gateway)\n\n## Parameters\n\nYou may need to provide certain parameters to your LangSmith installation to configure the Ingress. Additionally, we will want to convert the `langsmith-frontend` service to a ClusterIP service.\n\n* *Hostname (optional)*: The hostname that you would like to use for your LangSmith installation. E.g `\"langsmith.example.com\"`. If you leave this empty, the ingress will serve all traffic to the LangSmith installation.\n\n* *BasePath (optional)*: If you would like to serve LangSmith under a URL basePath, you can specify it here. For example, adding `\"langsmith\"` will serve the application at `\"example.hostname.com/langsmith\"`. This will apply to UI paths as well as API endpoints.\n\n* *IngressClassName (optional)*: The name of the Ingress class that you would like to use. If not set, the default Ingress class will be used.\n\n* *Annotations (optional)*: Additional annotations to add to the Ingress. Certain providers like AWS may use annotations to control things like TLS termination.\n\n  For example, you can add the following annotations using the AWS ALB Ingress Controller to attach an ACM certificate to the Ingress:\n\n  ```yaml  theme={null}\n  annotations:\n    alb.ingress.kubernetes.io/certificate-arn: \"<your-certificate-arn>\"\n  ```\n\n* *Labels (optional)*: Additional labels to add to the Ingress.\n\n* *TLS (optional)*: If you would like to serve LangSmith over HTTPS, you can add TLS configuration here (many Ingress controllers may have other ways of controlling TLS so this is often not needed). This should be an array of TLS configurations. Each TLS configuration should have the following fields:\n\n  * hosts: An array of hosts that the certificate should be valid for. E.g \\[\"langsmith.example.com\"]\n\n  * secretName: The name of the Kubernetes secret that contains the certificate and private key. This secret should have the following keys:\n\n    * tls.crt: The certificate\n    * tls.key: The private key\n\n  * You can read more about creating a TLS secret [here](https://kubernetes.io/do/langsmith/observability-concepts/services-networking/ingress/#tls).\n\n## Configuration\n\nYou can configure your LangSmith instance to use one of three routing options: standard Ingress, Gateway API, or Istio Gateway. Choose the option that best fits your infrastructure.\n\n### Option 1: Standard Ingress\n\nWith these parameters in hand, you can configure your LangSmith instance to use an Ingress. You can do this by modifying the `config.yaml` file for your LangSmith Helm Chart installation.\n\n```yaml  theme={null}\nconfig:\n  hostname: \"\" # Main domain for LangSmith\n  basePath: \"\" # If you want to serve langsmith under a URL base path (e.g., /langsmith)\ningress:\n  enabled: true\n  hostname: \"\" # Deprecated: Use config.hostname instead after v0.12.0\n  subdomain: \"\" # Deprecated: Use config.hostname instead after v0.12.0\n  ingressClassName: \"\" # If not set, the default ingress class will be used\n  annotations: {} # Add annotations here if needed\n  labels: {} # Add labels here if needed\n  tls: [] # Add TLS configuration here if needed\nfrontend:\n  service:\n    type: ClusterIP\n```\n\nOnce configured, you will need to update your LangSmith installation. If everything is configured correctly, your LangSmith instance should now be accessible via the Ingress. You can run the following to check the status of your Ingress:\n\n```bash  theme={null}\nkubectl get ingress\n```\n\nYou should see something like this in the output:\n\n```\nNAME                         CLASS   HOSTS    ADDRESS          PORTS     AGE\nlangsmith-ingress            nginx   <host>   35.227.243.203   80, 443   95d\n```\n\n<Warning>\n  If you do not have automated DNS setup, you will need to add the IP address to your DNS provider manually.\n</Warning>\n\n### Option 2: Gateway API\n\n<Note>\n  Gateway API support is available as of LangSmith v0.12.0\n</Note>\n\nIf your cluster uses the [Kubernetes Gateway API](https://gateway-api.sigs.k8s.io/), you can configure LangSmith to provision HTTPRoute resources. This will create an HTTPRoute for LangSmith and an HTTPRoute for each [agent deployment](/langsmith/deployments).\n\n#### Parameters\n\n* *name (required)*: The name of the Gateway resource to reference\n* *namespace (required)*: The namespace where the Gateway resource is located\n* *hostname (optional)*: The hostname that you would like to use for your LangSmith installation. E.g `\"langsmith.example.com\"`\n* *basePath (optional)*: If you would like to serve LangSmith under a base path, you can specify it here. E.g \"example.com/langsmith\"\n* *sectionName (optional)*: The name of a specific listener section in the Gateway to use\n* *annotations (optional)*: Additional annotations to add to the HTTPRoute resources\n* *labels (optional)*: Additional labels to add to the HTTPRoute resources\n\n#### Configuration\n\n```yaml  theme={null}\nconfig:\n  hostname: \"\" # Main domain for LangSmith\n  basePath: \"\" # If you want to serve langsmith under a base path. E.g \"example.com/langsmith\"\ngateway:\n  enabled: true\n  name: \"my-gateway\" # Name of your Gateway resource\n  namespace: \"gateway-system\" # Namespace of your Gateway resource\n  sectionName: \"\" # Optional: specific listener section name\n  annotations: {} # Add annotations here if needed\n  labels: {} # Add labels here if needed\nfrontend:\n  service:\n    type: ClusterIP\n```\n\nOnce configured, you can check the status of your HTTPRoutes:\n\n```bash  theme={null}\nkubectl get httproute\n```\n\n### Option 3: Istio Gateway\n\n<Note>\n  Istio Gateway support is available as of LangSmith v0.12.0\n</Note>\n\nIf your cluster uses [Istio](https://istio.io/), you can configure LangSmith to provision VirtualService resources. This will create a VirtualService for LangSmith and a VirtualService for each [agent deployment](/langsmith/deployments).\n\n#### Parameters\n\n* *name (optional)*: The name of the Istio Gateway resource to reference. Defaults to `\"istio-gateway\"`\n* *namespace (optional)*: The namespace where the Istio Gateway resource is located. Defaults to `\"istio-system\"`\n* *hostname (optional)*: The hostname that you would like to use for your LangSmith installation. E.g `\"langsmith.example.com\"`\n* *basePath (optional)*: If you would like to serve LangSmith under a base path, you can specify it here. E.g \"example.com/langsmith\"\n* *annotations (optional)*: Additional annotations to add to the VirtualService resources\n* *labels (optional)*: Additional labels to add to the VirtualService resources\n\n#### Configuration\n\n```yaml  theme={null}\nconfig:\n  hostname: \"\" # Main domain for LangSmith\n  basePath: \"\" # If you want to serve langsmith on a separate basePath. E.g \"example.com/langsmith\"\nistioGateway:\n  enabled: true\n  name: \"istio-gateway\" # Name of your Istio Gateway resource\n  namespace: \"istio-system\" # Namespace of your Istio Gateway resource\n  annotations: {} # Add annotations here if needed\n  labels: {} # Add labels here if needed\nfrontend:\n  service:\n    type: ClusterIP\n```\n\nOnce configured, you can check the status of your VirtualServices:\n\n```bash  theme={null}\nkubectl get virtualservice\n```\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/self-host-ingress.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 8031
}