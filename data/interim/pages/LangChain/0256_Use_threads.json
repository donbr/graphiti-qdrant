{
  "title": "Use threads",
  "source_url": "https://docs.langchain.com/langsmith/use-threads",
  "content": "In this guide, we will show how to create, view, and inspect [threads](/oss/python/langgraph/persistence#threads).\n\n## Create a thread\n\nTo run your graph and the state persisted, you must first create a thread.\n\n### Empty thread\n\nTo create a new thread, use the [LangGraph SDK](/langsmith/sdk) `create` method. See the [Python](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.client.ThreadsClient.create) and [JS](https://reference.langchain.com/javascript/classes/_langchain_langgraph-sdk.client.ThreadsClient.html#create) SDK reference docs for more information.\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    from langgraph_sdk import get_client\n\n    client = get_client(url=<DEPLOYMENT_URL>)\n    thread = await client.threads.create()\n\n    print(thread)\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    import { Client } from \"@langchain/langgraph-sdk\";\n\n    const client = new Client({ apiUrl: <DEPLOYMENT_URL> });\n    const thread = await client.threads.create();\n\n    console.log(thread);\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n        --url <DEPLOYMENT_URL>/threads \\\n        --header 'Content-Type: application/json' \\\n        --data '{}'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n{\n\"thread_id\": \"123e4567-e89b-12d3-a456-426614174000\",\n\"created_at\": \"2025-05-12T14:04:08.268Z\",\n\"updated_at\": \"2025-05-12T14:04:08.268Z\",\n\"metadata\": {},\n\"status\": \"idle\",\n\"values\": {}\n}\n```\n\n### Copy thread\n\nAlternatively, if you already have a thread in your application whose state you wish to copy, you can use the `copy` method. This will create an independent thread whose history is identical to the original thread at the time of the operation. See the [Python](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.client.ThreadsClient.copy) and [JS](https://reference.langchain.com/javascript/classes/_langchain_langgraph-sdk.client.ThreadsClient.html#copy) SDK reference docs for more information.\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    copied_thread = await client.threads.copy(<THREAD_ID>)\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    const copiedThread = await client.threads.copy(<THREAD_ID>);\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST --url <DEPLOYMENT_URL>/threads/<THREAD_ID>/copy \\\n    --header 'Content-Type: application/json'\n    ```\n  </Tab>\n</Tabs>\n\n### Prepopulated State\n\nFinally, you can create a thread with an arbitrary pre-defined state by providing a list of `supersteps` into the `create` method. The `supersteps` describe a list of a sequence of state updates. For example:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    from langgraph_sdk import get_client\n\n    client = get_client(url=<DEPLOYMENT_URL>)\n    thread = await client.threads.create(\n      graph_id=\"agent\",\n      supersteps=[\n        {\n          updates: [\n            {\n              values: {},\n              as_node: '__input__',\n            },\n          ],\n        },\n        {\n          updates: [\n            {\n              values: {\n                messages: [\n                  {\n                    type: 'human',\n                    content: 'hello',\n                  },\n                ],\n              },\n              as_node: '__start__',\n            },\n          ],\n        },\n        {\n          updates: [\n            {\n              values: {\n                messages: [\n                  {\n                    content: 'Hello! How can I assist you today?',\n                    type: 'ai',\n                  },\n                ],\n              },\n              as_node: 'call_model',\n            },\n          ],\n        },\n      ])\n\n    print(thread)\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    import { Client } from \"@langchain/langgraph-sdk\";\n\n    const client = new Client({ apiUrl: <DEPLOYMENT_URL> });\n    const thread = await client.threads.create({\n        graphId: 'agent',\n        supersteps: [\n        {\n          updates: [\n            {\n              values: {},\n              asNode: '__input__',\n            },\n          ],\n        },\n        {\n          updates: [\n            {\n              values: {\n                messages: [\n                  {\n                    type: 'human',\n                    content: 'hello',\n                  },\n                ],\n              },\n              asNode: '__start__',\n            },\n          ],\n        },\n        {\n          updates: [\n            {\n              values: {\n                messages: [\n                  {\n                    content: 'Hello! How can I assist you today?',\n                    type: 'ai',\n                  },\n                ],\n              },\n              asNode: 'call_model',\n            },\n          ],\n        },\n      ],\n    });\n\n    console.log(thread);\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n        --url <DEPLOYMENT_URL>/threads \\\n        --header 'Content-Type: application/json' \\\n        --data '{\"metadata\":{\"graph_id\":\"agent\"},\"supersteps\":[{\"updates\":[{\"values\":{},\"as_node\":\"__input__\"}]},{\"updates\":[{\"values\":{\"messages\":[{\"type\":\"human\",\"content\":\"hello\"}]},\"as_node\":\"__start__\"}]},{\"updates\":[{\"values\":{\"messages\":[{\"content\":\"Hello\\u0021 How can I assist you today?\",\"type\":\"ai\"}]},\"as_node\":\"call_model\"}]}]}'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n{\n\"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n\"created_at\": \"2025-05-12T15:37:08.935038+00:00\",\n\"updated_at\": \"2025-05-12T15:37:08.935046+00:00\",\n\"metadata\": {\"graph_id\": \"agent\"},\n\"status\": \"idle\",\n\"config\": {},\n\"values\": {\n\"messages\": [\n{\n\"content\": \"hello\",\n\"additional_kwargs\": {},\n\"response_metadata\": {},\n\"type\": \"human\",\n\"name\": null,\n\"id\": \"8701f3be-959c-4b7c-852f-c2160699b4ab\",\n\"example\": false\n},\n{\n\"content\": \"Hello! How can I assist you today?\",\n\"additional_kwargs\": {},\n\"response_metadata\": {},\n\"type\": \"ai\",\n\"name\": null,\n\"id\": \"4d8ea561-7ca1-409a-99f7-6b67af3e1aa3\",\n\"example\": false,\n\"tool_calls\": [],\n\"invalid_tool_calls\": [],\n\"usage_metadata\": null\n}\n]\n}\n}\n```\n\n## List threads\n\n### LangGraph SDK\n\nTo list threads, use the [LangGraph SDK](/langsmith/sdk) `search` method. This will list the threads in the application that match the provided filters. See the [Python](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.client.ThreadsClient.search) and [JS](https://reference.langchain.com/javascript/classes/_langchain_langgraph-sdk.client.ThreadsClient.html#search) SDK reference docs for more information.\n\n#### Filter by thread status\n\nUse the `status` field to filter threads based on their status. Supported values are `idle`, `busy`, `interrupted`, and `error`. See [here](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.schema.ThreadStatus) for information on each status. For example, to view `idle` threads:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    print(await client.threads.search(status=\"idle\",limit=1))\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    console.log(await client.threads.search({ status: \"idle\", limit: 1 }));\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n    --url <DEPLOYMENT_URL>/threads/search \\\n    --header 'Content-Type: application/json' \\\n    --data '{\"status\": \"idle\", \"limit\": 1}'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n[\n{\n'thread_id': 'cacf79bb-4248-4d01-aabc-938dbd60ed2c',\n'created_at': '2024-08-14T17:36:38.921660+00:00',\n'updated_at': '2024-08-14T17:36:38.921660+00:00',\n'metadata': {'graph_id': 'agent'},\n'status': 'idle',\n'config': {'configurable': {}}\n}\n]\n```\n\n#### Filter by metadata\n\nThe `search` method allows you to filter on metadata:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    print((await client.threads.search(metadata={\"graph_id\":\"agent\"},limit=1)))\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    console.log((await client.threads.search({ metadata: { \"graph_id\": \"agent\" }, limit: 1 })));\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request POST \\\n    --url <DEPLOYMENT_URL>/threads/search \\\n    --header 'Content-Type: application/json' \\\n    --data '{\"metadata\": {\"graph_id\":\"agent\"}, \"limit\": 1}'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n[\n{\n'thread_id': 'cacf79bb-4248-4d01-aabc-938dbd60ed2c',\n'created_at': '2024-08-14T17:36:38.921660+00:00',\n'updated_at': '2024-08-14T17:36:38.921660+00:00',\n'metadata': {'graph_id': 'agent'},\n'status': 'idle',\n'config': {'configurable': {}}\n}\n]\n```\n\n#### Sorting\n\nThe SDK also supports sorting threads by `thread_id`, `status`, `created_at`, and `updated_at` using the `sort_by` and `sort_order` params.\n\n### LangSmith UI\n\nYou can also view threads in a deployment via the LangSmith UI.\n\nInside your deployment, select the \"Threads\" tab. This will load a table of all of the threads in your deployment.\n\nTo filter by thread status, select a status in the top bar. To sort by a supported property, click on the arrow icon for the desired column.\n\n## Inspect threads\n\n### LangGraph SDK\n\n#### Get Thread\n\nTo view a specific thread given its `thread_id`, use the `get` method:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    print((await client.threads.get(<THREAD_ID>)))\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    console.log((await client.threads.get(<THREAD_ID>)));\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request GET \\\n    --url <DEPLOYMENT_URL>/threads/<THREAD_ID> \\\n    --header 'Content-Type: application/json'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n{\n'thread_id': 'cacf79bb-4248-4d01-aabc-938dbd60ed2c',\n'created_at': '2024-08-14T17:36:38.921660+00:00',\n'updated_at': '2024-08-14T17:36:38.921660+00:00',\n'metadata': {'graph_id': 'agent'},\n'status': 'idle',\n'config': {'configurable': {}}\n}\n```\n\n#### Inspect thread state\n\nTo view the current state of a given thread, use the `get_state` method:\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    print((await client.threads.get_state(<THREAD_ID>)))\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    console.log((await client.threads.getState(<THREAD_ID>)));\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request GET \\\n    --url <DEPLOYMENT_URL>/threads/<THREAD_ID>/state \\\n    --header 'Content-Type: application/json'\n    ```\n  </Tab>\n</Tabs>\n\nOutput:\n\n```\n{\n\"values\": {\n\"messages\": [\n{\n\"content\": \"hello\",\n\"additional_kwargs\": {},\n\"response_metadata\": {},\n\"type\": \"human\",\n\"name\": null,\n\"id\": \"8701f3be-959c-4b7c-852f-c2160699b4ab\",\n\"example\": false\n},\n{\n\"content\": \"Hello! How can I assist you today?\",\n\"additional_kwargs\": {},\n\"response_metadata\": {},\n\"type\": \"ai\",\n\"name\": null,\n\"id\": \"4d8ea561-7ca1-409a-99f7-6b67af3e1aa3\",\n\"example\": false,\n\"tool_calls\": [],\n\"invalid_tool_calls\": [],\n\"usage_metadata\": null\n}\n]\n},\n\"next\": [],\n\"tasks\": [],\n\"metadata\": {\n\"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n\"checkpoint_id\": \"1f02f46f-7308-616c-8000-1b158a9a6955\",\n\"graph_id\": \"agent_with_quite_a_long_name\",\n\"source\": \"update\",\n\"step\": 1,\n\"writes\": {\n\"call_model\": {\n\"messages\": [\n{\n\"content\": \"Hello! How can I assist you today?\",\n\"type\": \"ai\"\n}\n]\n}\n},\n\"parents\": {}\n},\n\"created_at\": \"2025-05-12T15:37:09.008055+00:00\",\n\"checkpoint\": {\n\"checkpoint_id\": \"1f02f46f-733f-6b58-8001-ea90dcabb1bd\",\n\"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n\"checkpoint_ns\": \"\"\n},\n\"parent_checkpoint\": {\n\"checkpoint_id\": \"1f02f46f-7308-616c-8000-1b158a9a6955\",\n\"thread_id\": \"f15d70a1-27d4-4793-a897-de5609920b7d\",\n\"checkpoint_ns\": \"\"\n},\n\"checkpoint_id\": \"1f02f46f-733f-6b58-8001-ea90dcabb1bd\",\n\"parent_checkpoint_id\": \"1f02f46f-7308-616c-8000-1b158a9a6955\"\n}\n```\n\nOptionally, to view the state of a thread at a given checkpoint, simply pass in the checkpoint id (or the entire checkpoint object):\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```python  theme={null}\n    thread_state = await client.threads.get_state(\n      thread_id=<THREAD_ID>\n      checkpoint_id=<CHECKPOINT_ID>\n    )\n    ```\n  </Tab>\n\n  <Tab title=\"Javascript\">\n    ```js  theme={null}\n    const threadState = await client.threads.getState(<THREAD_ID>, <CHECKPOINT_ID>);\n    ```\n  </Tab>\n\n  <Tab title=\"CURL\">\n    ```bash  theme={null}\n    curl --request GET \\\n    --url <DEPLOYMENT_URL>/threads/<THREAD_ID>/state/<CHECKPOINT_ID> \\\n    --header 'Content-Type: application/json'\n    ```\n  </Tab>\n</Tabs>\n\n#### Inspect full thread history\n\nTo view a thread's history, use the `get_history` method. This returns a list of every state the thread experienced. For more information see the [Python](https://reference.langchain.com/python/langsmith/deployment/sdk/#langgraph_sdk.client.ThreadsClient.get_history) and [JS](https://reference.langchain.com/javascript/classes/_langchain_langgraph-sdk.client.ThreadsClient.html#gethistory) reference docs.\n\n### LangSmith UI\n\nYou can also view threads in a deployment via the LangSmith UI.\n\nInside your deployment, select the \"Threads\" tab. This will load a table of all of the threads in your deployment.\n\nSelect a thread to inspect its current state. To view its full history and for further debugging, open the thread in [Studio](/langsmith/studio).\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/use-threads.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 13775
}