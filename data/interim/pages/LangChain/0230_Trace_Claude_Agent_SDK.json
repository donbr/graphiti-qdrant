{
  "title": "Trace Claude Agent SDK",
  "source_url": "https://docs.langchain.com/langsmith/trace-claude-agent-sdk",
  "content": "The [Claude Agent SDK](https://platform.claude.com/docs/en/agent-sdk/overview) is an SDK for building agentic applications with Claude. LangSmith provides native integration with the Claude Agent SDK to automatically trace your agent executions, tool calls, and interactions with Claude models.\n\n## Installation\n\nInstall the LangSmith integration for Claude Agent SDK\n\n<CodeGroup>\n  ```bash pip theme={null}\n  pip install \"langsmith[claude-agent-sdk]\"\n  ```\n\n  ```bash uv theme={null}\n  uv add \"langsmith[claude-agent-sdk]\"\n  ```\n</CodeGroup>\n\n## Quickstart\n\nTo enable LangSmith tracing for your Claude Agent SDK application, call `configure_claude_agent_sdk()` at the start of your application:\n\n```python  theme={null}\nimport asyncio\nfrom claude_agent_sdk import (\n    ClaudeAgentOptions,\n    ClaudeSDKClient,\n    tool,\n    create_sdk_mcp_server,\n)\nfrom typing import Any\n\nfrom langsmith.integrations.claude_agent_sdk import configure_claude_agent_sdk\n\n# Setup claude_agent_sdk with langsmith tracing\nconfigure_claude_agent_sdk()\n\n@tool(\n    \"get_weather\",\n    \"Gets the current weather for a given city\",\n    {\n        \"city\": str,\n    },\n)\nasync def get_weather(args: dict[str, Any]) -> dict[str, Any]:\n    \"\"\"Simulated weather lookup tool\"\"\"\n    city = args[\"city\"]\n\n    # Simulated weather data\n    weather_data = {\n        \"San Francisco\": \"Foggy, 62째F\",\n        \"New York\": \"Sunny, 75째F\",\n        \"London\": \"Rainy, 55째F\",\n        \"Tokyo\": \"Clear, 68째F\",\n    }\n\n    weather = weather_data.get(city, \"Weather data not available\")\n    return {\"content\": [{\"type\": \"text\", \"text\": f\"Weather in {city}: {weather}\"}]}\n\n\nasync def main():\n    # Create SDK MCP server with the weather tool\n    weather_server = create_sdk_mcp_server(\n        name=\"weather\",\n        version=\"1.0.0\",\n        tools=[get_weather],\n    )\n\n    options = ClaudeAgentOptions(\n        model=\"claude-sonnet-4-5-20250929\",\n        system_prompt=\"You are a friendly travel assistant who helps with weather information.\",\n        mcp_servers={\"weather\": weather_server},\n        allowed_tools=[\"mcp__weather__get_weather\"],\n    )\n\n    async with ClaudeSDKClient(options=options) as client:\n        await client.query(\"What's the weather like in San Francisco and Tokyo?\")\n\n        async for message in client.receive_response():\n            print(message)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n```\n\nOnce configured, all Claude Agent SDK operations will be automatically traced to LangSmith, including:\n\n* Agent queries and responses\n* Tool invocations and results\n* Claude model interactions\n* MCP server operations\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/trace-claude-agent-sdk.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 2967
}