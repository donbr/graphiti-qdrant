{
  "title": "LangSmith Observability",
  "source_url": "https://docs.langchain.com/oss/javascript/langchain/observability",
  "content": "As you build and run agents with LangChain, you need visibility into how they behave: which [tools](/oss/javascript/langchain/tools) they call, what prompts they generate, and how they make decisions. LangChain agents built with [`createAgent`](https://reference.langchain.com/javascript/functions/langchain.index.createAgent.html) automatically support tracing through [LangSmith](/langsmith/home), a platform for capturing, debugging, evaluating, and monitoring LLM application behavior.\n\n[*Traces*](/langsmith/observability-concepts#traces) record every step of your agent's execution, from the initial user input to the final response, including all tool calls, model interactions, and decision points. This execution data helps you debug issues, evaluate performance across different inputs, and monitor usage patterns in production.\n\nThis guide shows you how to enable tracing for your LangChain agents and use LangSmith to analyze their execution.\n\n## Prerequisites\n\nBefore you begin, ensure you have the following:\n\n* **A LangSmith account**: Sign up (for free) or log in at [smith.langchain.com](https://smith.langchain.com).\n* **A LangSmith API key**: Follow the [Create an API key](/langsmith/create-account-api-key#create-an-api-key) guide.\n\n## Enable tracing\n\nAll LangChain agents automatically support LangSmith tracing. To enable it, set the following environment variables:\n\n```bash  theme={null}\nexport LANGSMITH_TRACING=true\nexport LANGSMITH_API_KEY=<your-api-key>\n```\n\n## Quickstart\n\nNo extra code is needed to log a trace to LangSmith. Just run your agent code as you normally would:\n\n```ts  theme={null}\nimport { createAgent } from \"@langchain/agents\";\n\nfunction sendEmail(to: string, subject: string, body: string): string {\n    // ... email sending logic\n    return `Email sent to ${to}`;\n}\n\nfunction searchWeb(query: string): string {\n    // ... web search logic\n    return `Search results for: ${query}`;\n}\n\nconst agent = createAgent({\n    model: \"gpt-4o\",\n    tools: [sendEmail, searchWeb],\n    systemPrompt: \"You are a helpful assistant that can send emails and search the web.\"\n});\n\n// Run the agent - all steps will be traced automatically\nconst response = await agent.invoke({\n    messages: [{ role: \"user\", content: \"Search for the latest AI news and email a summary to john@example.com\" }]\n});\n```\n\nBy default, the trace will be logged to the project with the name `default`. To configure a custom project name, see [Log to a project](#log-to-a-project).\n\n## Trace selectively\n\nYou may opt to trace specific invocations or parts of your application using LangSmith's `tracing_context` context manager:\n\n```python  theme={null}\nimport langsmith as ls\n\n# This WILL be traced\nwith ls.tracing_context(enabled=True):\n    agent.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"Send a test email to alice@example.com\"}]})\n\n# This will NOT be traced (if LANGSMITH_TRACING is not set)\nagent.invoke({\"messages\": [{\"role\": \"user\", \"content\": \"Send another email\"}]})\n```\n\n## Log to a project\n\n<Accordion title=\"Statically\">\n  You can set a custom project name for your entire application by setting the `LANGSMITH_PROJECT` environment variable:\n\n  ```bash  theme={null}\n  export LANGSMITH_PROJECT=my-agent-project\n  ```\n</Accordion>\n\n<Accordion title=\"Dynamically\">\n  You can set the project name programmatically for specific operations:\n\n  ```python  theme={null}\n  import langsmith as ls\n\n  with ls.tracing_context(project_name=\"email-agent-test\", enabled=True):\n      response = agent.invoke({\n          \"messages\": [{\"role\": \"user\", \"content\": \"Send a welcome email\"}]\n      })\n  ```\n</Accordion>\n\n## Add metadata to traces\n\nYou can annotate your traces with custom metadata and tags:\n\n```python  theme={null}\nresponse = agent.invoke(\n    {\"messages\": [{\"role\": \"user\", \"content\": \"Send a welcome email\"}]},\n    config={\n        \"tags\": [\"production\", \"email-assistant\", \"v1.0\"],\n        \"metadata\": {\n            \"user_id\": \"user_123\",\n            \"session_id\": \"session_456\",\n            \"environment\": \"production\"\n        }\n    }\n)\n```\n\n`tracing_context` also accepts tags and metadata for fine-grained control:\n\n```python  theme={null}\nwith ls.tracing_context(\n    project_name=\"email-agent-test\",\n    enabled=True,\n    tags=[\"production\", \"email-assistant\", \"v1.0\"],\n    metadata={\"user_id\": \"user_123\", \"session_id\": \"session_456\", \"environment\": \"production\"}):\n    response = agent.invoke(\n        {\"messages\": [{\"role\": \"user\", \"content\": \"Send a welcome email\"}]}\n    )\n```\n\nThis custom metadata and tags will be attached to the trace in LangSmith.\n\n<Tip>\n  To learn more about how to use traces to debug, evaluate, and monitor your agents, see the [LangSmith documentation](/langsmith/home).\n</Tip>\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/langchain/observability.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 5097
}