{
  "title": "Set a sampling rate for traces",
  "source_url": "https://docs.langchain.com/langsmith/sample-traces",
  "content": "When working with high-volume applications, you may not want to log every trace to LangSmith. Sampling rates allow you to control what percentage of traces are logged, helping you balance observability needs with cost considerations.\n\n## Set a global sampling rate\n\n<Note>\n  This section is relevant for those using the LangSmith SDK or LangChain, not for those logging directly with the LangSmith API.\n</Note>\n\nBy default, all traces are logged to LangSmith. To down-sample the number of traces logged to LangSmith, set the `LANGSMITH_TRACING_SAMPLING_RATE` environment variable to any float between `0` (no traces) and `1` (all traces). For instance, setting the following environment variable will log 75% of the traces.\n\n```bash  theme={null}\nexport LANGSMITH_TRACING_SAMPLING_RATE=0.75\n```\n\nThis works for the `traceable` decorator and `RunTree` objects.\n\n## Set different sampling rates per client\n\nYou can also set sampling rates on specific `Client` instances and use the `tracing_context` context manager:\n\n```python  theme={null}\nfrom langsmith import Client, tracing_context\n\n# Create clients with different sampling rates\nclient_1 = Client(tracing_sampling_rate=0.5)  # 50% sampling\nclient_2 = Client(tracing_sampling_rate=0.25)  # 25% sampling\nclient_no_trace = Client(tracing_sampling_rate=0.0)  # No tracing\n\n# Use different sampling rates for different operations\nwith tracing_context(client=client_1):\n    # Your code here - will be traced with 50% sampling rate\n    agent_1.invoke(...)\n\nwith tracing_context(client=client_2):\n    # Your code here - will be traced with 25% sampling rate\n    agent_1.invoke(...)\n\nwith tracing_context(client=client_no_trace):\n    # Your code here - will not be traced\n    agent_1.invoke(...)\n```\n\nThis allows you to control sampling rates at the operation level.\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/langsmith/sample-traces.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 2168
}