{
  "title": "LangGraph v1 migration guide",
  "source_url": "https://docs.langchain.com/oss/javascript/migrate/langgraph-v1",
  "content": "This guide outlines changes in LangGraph v1 and how to migrate from previous versions. For a high-level overview of what's new, see the [release notes](/oss/javascript/releases/langgraph-v1).\n\nTo upgrade,\n\n<CodeGroup>\n  ```bash npm theme={null}\n  npm install @langchain/langgraph@latest @langchain/core@latest\n  ```\n\n  ```bash pnpm theme={null}\n  pnpm add @langchain/langgraph@latest @langchain/core@latest\n  ```\n\n  ```bash yarn theme={null}\n  yarn add @langchain/langgraph@latest @langchain/core@latest\n  ```\n\n  ```bash bun theme={null}\n  bun add @langchain/langgraph@latest @langchain/core@latest\n  ```\n</CodeGroup>\n\n## Summary of changes\n\n| Area                             | What changed                                               |\n| -------------------------------- | ---------------------------------------------------------- |\n| React prebuilt                   | `createReactAgent` deprecated; use LangChain `createAgent` |\n| Interrupts                       | Typed interrupts supported via `interrupts` config         |\n| `toLangGraphEventStream` removed | Use `graph.stream` with the desired `encoding` format      |\n| `useStream`                      | Supports custom transports                                 |\n\n***\n\n## Deprecation: `createReactAgent` â†’ `createAgent`\n\nLangGraph v1 deprecates the `createReactAgent` prebuilt. Use LangChain's `createAgent`, which runs on LangGraph and adds a flexible middleware system.\n\nSee the LangChain v1 docs for details:\n\n* [Release notes](/oss/javascript/releases/langchain-v1#createagent)\n* [Migration guide](/oss/javascript/migrate/langchain-v1#createagent)\n\n<CodeGroup>\n  ```typescript v1 (new) theme={null}\n  import { createAgent } from \"langchain\";\n\n  const agent = createAgent({\n    model,\n    tools,\n    systemPrompt: \"You are a helpful assistant.\", // [!code highlight]\n  });\n  ```\n\n  ```typescript v0 (old) theme={null}\n  import { createReactAgent } from \"@langchain/langgraph/prebuilts\";\n\n  const agent = createReactAgent({\n    model,\n    tools,\n    prompt: \"You are a helpful assistant.\", // [!code highlight]\n  });\n  ```\n</CodeGroup>\n\n***\n\n## Typed interrupts\n\nYou can now define interrupt types at graph construction to strictly type the values passed to and received from interrupts.\n\n<CodeGroup>\n  ```typescript v1 (new) theme={null}\n  import { StateGraph, interrupt } from \"@langchain/langgraph\";\n  import * as z from \"zod\";\n\n  const State = z.object({ foo: z.string() });\n\n  const graphConfig = {\n    interrupts: {\n      approve: interrupt<{ reason: string }, { messages: string[] }>(),\n    },\n  }\n\n  const graph = new StateGraph(State, graphConfig)\n    .addNode(\"node\", async (state, runtime) => {\n      const value = runtime.interrupt.approve({ reason: \"review\" }); // [!code highlight]\n      return { foo: value };\n    })\n    .compile();\n  ```\n\n  ```typescript v0 (old) theme={null}\n  import { StateGraph } from \"@langchain/langgraph\";\n\n  const graph = new StateGraph(State)\n    .addNode(\"node\", async (state, runtime) => {\n      const value = runtime.interrupt.approve({ reason: \"review\" }); // [!code highlight]\n      return state;\n    })\n    .compile();\n  ```\n</CodeGroup>\n\nSee [Interrupts](/oss/javascript/langgraph/interrupts) to learn more.\n\n***\n\n## Event stream encoding\n\nThe low-level `toLangGraphEventStream` helper is removed. Streaming responses are handled by the SDK; when using low-level clients, select the wire format via an `encoding` option passed to `graph.stream`.\n\n<CodeGroup>\n  ```typescript v1 (new) theme={null}\n  const stream = await graph.stream(input, {\n    encoding: \"text/event-stream\",\n    streamMode: [\"values\", \"messages\"],\n  });\n\n  return new Response(stream, {\n    headers: { \"Content-Type\": \"text/event-stream\" }, // [!code highlight]\n  });\n  ```\n\n  ```typescript v0 (old) theme={null}\n  return toLangGraphEventStreamResponse({\n    stream: graph.streamEvents(input, {\n      version: \"v2\",\n      streamMode: [\"values\", \"messages\"],\n    }),\n  });\n  ```\n</CodeGroup>\n\n***\n\n## Breaking changes\n\n### Dropped Node 18 support\n\nAll LangGraph packages now require **Node.js 20 or higher**. Node.js 18 reached [end of life](https://nodejs.org/en/about/releases/) in March 2025.\n\n### New build outputs\n\nBuilds for all langgraph packages now use a bundler based approach instead of using raw typescript outputs. If you were importing files from the `dist/` directory (which is not recommended), you will need to update your imports to use the new module system.\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/migrate/langgraph-v1.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 4831
}