{
  "title": "What's new in LangChain v1",
  "source_url": "https://docs.langchain.com/oss/javascript/releases/langchain-v1",
  "content": "**LangChain v1 is a focused, production-ready foundation for building agents.** We've streamlined the framework around three core improvements:\n\n<CardGroup cols={1}>\n  <Card title=\"createAgent\" icon=\"robot\" href=\"#create-agent\" arrow>\n    A new standard way to build agents in LangChain, replacing `createReactAgent` from LangGraph with a cleaner, more powerful API.\n  </Card>\n\n  <Card title=\"Standard content blocks\" icon=\"cube\" href=\"#standard-content-blocks\" arrow>\n    A new `contentBlocks` property that provides unified access to modern LLM features across all providers.\n  </Card>\n\n  <Card title=\"Simplified package\" icon=\"sitemap\" href=\"#simplified-package\" arrow>\n    The `langchain` package has been streamlined to focus on essential building blocks for agents, with legacy functionality moved to `@langchain/classic`.\n  </Card>\n</CardGroup>\n\nTo upgrade,\n\n<CodeGroup>\n  ```bash npm theme={null}\n  npm install langchain @langchain/core\n  ```\n\n  ```bash pnpm theme={null}\n  pnpm install langchain @langchain/core\n  ```\n\n  ```bash yarn theme={null}\n  yarn add langchain @langchain/core\n  ```\n\n  ```bash bun theme={null}\n  bun add langchain @langchain/core\n  ```\n</CodeGroup>\n\nFor a complete list of changes, see the [migration guide](/oss/javascript/migrate/langchain-v1).\n\n## `createAgent`\n\n`createAgent` is the standard way to build agents in LangChain 1.0. It provides a simpler interface than the prebuilt `createReactAgent` exported from LangGraph while offering greater customization potential by using middleware.\n\n```ts  theme={null}\nimport { createAgent } from \"langchain\";\n\nconst agent = createAgent({\n  model: \"claude-sonnet-4-5-20250929\",\n  tools: [getWeather],\n  systemPrompt: \"You are a helpful assistant.\",\n});\n\nconst result = await agent.invoke({\n  messages: [\n    { role: \"user\", content: \"What is the weather in Tokyo?\" },\n  ],\n});\n\nconsole.log(result.content);\n```\n\nUnder the hood, `createAgent` is built on the basic agent loop -- calling a model, letting it choose tools to execute, and then finishing when it calls no more tools:\n\n<div style={{ display: \"flex\", justifyContent: \"center\" }}>\n  <img src=\"https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=ac72e48317a9ced68fd1be64e89ec063\" alt=\"Core agent loop diagram\" className=\"rounded-lg\" data-og-width=\"300\" width=\"300\" data-og-height=\"268\" height=\"268\" data-path=\"oss/images/core_agent_loop.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?w=280&fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=a4c4b766b6678ef52a6ed556b1a0b032 280w, https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?w=560&fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=111869e6e99a52c0eff60a1ef7ddc49c 560w, https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?w=840&fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=6c1e21de7b53bd0a29683aca09c6f86e 840w, https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?w=1100&fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=88bef556edba9869b759551c610c60f4 1100w, https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?w=1650&fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=9b0bdd138e9548eeb5056dc0ed2d4a4b 1650w, https://mintcdn.com/langchain-5e9cc07a/Tazq8zGc0yYUYrDl/oss/images/core_agent_loop.png?w=2500&fit=max&auto=format&n=Tazq8zGc0yYUYrDl&q=85&s=41eb4f053ed5e6b0ba5bad2badf6d755 2500w\" />\n</div>\n\nFor more information, see [Agents](/oss/javascript/langchain/agents).\n\n### Middleware\n\nMiddleware is the defining feature of `createAgent`. It makes `createAgent` highly customizable, raising the ceiling for what you can build.\n\nGreat agents require [context engineering](/oss/javascript/langchain/context-engineering): getting the right information to the model at the right time. Middleware helps you control dynamic prompts, conversation summarization, selective tool access, state management, and guardrails through a composable abstraction.\n\n#### Prebuilt middleware\n\nLangChain provides a few [prebuilt middlewares](/oss/javascript/langchain/middleware#built-in-middleware) for common patterns, including:\n\n* `summarizationMiddleware`: Condense conversation history when it gets too long\n* `humanInTheLoopMiddleware`: Require approval for sensitive tool calls\n* `piiRedactionMiddleware`: Redact sensitive information before sending to the model\n\n```ts  theme={null}\nimport {\n  createAgent,\n  summarizationMiddleware,\n  humanInTheLoopMiddleware,\n  piiRedactionMiddleware,\n} from \"langchain\";\n\nconst agent = createAgent({\n  model: \"claude-sonnet-4-5-20250929\",\n  tools: [readEmail, sendEmail],\n  middleware: [\n    piiRedactionMiddleware({ patterns: [\"email\", \"phone\", \"ssn\"] }),\n    summarizationMiddleware({\n      model: \"claude-sonnet-4-5-20250929\",\n      trigger: { tokens: 500 },\n    }),\n    humanInTheLoopMiddleware({\n      interruptOn: {\n        sendEmail: {\n          allowedDecisions: [\"approve\", \"edit\", \"reject\"],\n        },\n      },\n    }),\n  ],\n});\n```\n\n#### Custom middleware\n\nYou can also build custom middleware to fit your specific needs.\n\nBuild custom middleware by implementing any of these hooks using the `createMiddleware` function:\n\n| Hook            | When it runs             | Use cases                               |\n| --------------- | ------------------------ | --------------------------------------- |\n| `beforeAgent`   | Before calling the agent | Load memory, validate input             |\n| `beforeModel`   | Before each LLM call     | Update prompts, trim messages           |\n| `wrapModelCall` | Around each LLM call     | Intercept and modify requests/responses |\n| `wrapToolCall`  | Around each tool call    | Intercept and modify tool execution     |\n| `afterModel`    | After each LLM response  | Validate output, apply guardrails       |\n| `afterAgent`    | After agent completes    | Save results, cleanup                   |\n\n<div style={{ display: \"flex\", justifyContent: \"center\" }}>\n  <img src=\"https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=eb4404b137edec6f6f0c8ccb8323eaf1\" alt=\"Middleware flow diagram\" className=\"rounded-lg\" data-og-width=\"500\" width=\"500\" data-og-height=\"560\" height=\"560\" data-path=\"oss/images/middleware_final.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?w=280&fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=483413aa87cf93323b0f47c0dd5528e8 280w, https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?w=560&fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=41b7dd647447978ff776edafe5f42499 560w, https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?w=840&fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=e9b14e264f68345de08ae76f032c52d4 840w, https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?w=1100&fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=ec45e1932d1279b1beee4a4b016b473f 1100w, https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?w=1650&fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=3bca5ebf8aa56632b8a9826f7f112e57 1650w, https://mintcdn.com/langchain-5e9cc07a/RAP6mjwE5G00xYsA/oss/images/middleware_final.png?w=2500&fit=max&auto=format&n=RAP6mjwE5G00xYsA&q=85&s=437f141d1266f08a95f030c2804691d9 2500w\" />\n</div>\n\nExample custom middleware:\n\n```ts  theme={null}\nimport { createMiddleware } from \"langchain\";\n\nconst contextSchema = z.object({\n  userExpertise: z.enum([\"beginner\", \"expert\"]).default(\"beginner\"),\n})\n\nconst expertiseBasedToolMiddleware = createMiddleware({\n  wrapModelCall: async (request, handler) => {\n    const userLevel = request.runtime.context.userExpertise;\n    if (userLevel === \"expert\") {\n      const tools = [advancedSearch, dataAnalysis];\n      return handler(\n        request.replace(\"openai:gpt-5\", tools)\n      );\n    }\n    const tools = [simpleSearch, basicCalculator];\n    return handler(\n      request.replace(\"openai:gpt-5-nano\", tools)\n    );\n  },\n});\n\nconst agent = createAgent({\n  model: \"claude-sonnet-4-5-20250929\",\n  tools: [simpleSearch, advancedSearch, basicCalculator, dataAnalysis],\n  middleware: [expertiseBasedToolMiddleware],\n  contextSchema,\n});\n```\n\nFor more information, see [the complete middleware guide](/oss/javascript/langchain/middleware).\n\n### Built on LangGraph\n\nBecause `createAgent` is built on LangGraph, you automatically get built in support for long running and reliable agents via:\n\n<CardGroup cols={2}>\n  <Card title=\"Persistence\" icon=\"database\">\n    Conversations automatically persist across sessions with built-in checkpointing\n  </Card>\n\n  <Card title=\"Streaming\" icon=\"water\">\n    Stream tokens, tool calls, and reasoning traces in real-time\n  </Card>\n\n  <Card title=\"Human-in-the-loop\" icon=\"hand\">\n    Pause agent execution for human approval before sensitive actions\n  </Card>\n\n  <Card title=\"Time travel\" icon=\"clock-rotate-left\">\n    Rewind conversations to any point and explore alternate paths and prompts\n  </Card>\n</CardGroup>\n\nYou don't need to learn LangGraph to use these features—they work out of the box.\n\n### Structured output\n\n`createAgent` has improved structured output generation:\n\n* **Main loop integration**: Structured output is now generated in the main loop instead of requiring an additional LLM call\n* **Structured output strategy**: Models can choose between calling tools or using provider-side structured output generation\n* **Cost reduction**: Eliminates extra expense from additional LLM calls\n\n```ts  theme={null}\nimport { createAgent } from \"langchain\";\nimport * as z from \"zod\";\n\nconst weatherSchema = z.object({\n  temperature: z.number(),\n  condition: z.string(),\n});\n\nconst agent = createAgent({\n  model: \"gpt-4o-mini\",\n  tools: [getWeather],\n  responseFormat: weatherSchema,\n});\n\nconst result = await agent.invoke({\n  messages: [\n    { role: \"user\", content: \"What is the weather in Tokyo?\" },\n  ],\n});\n\nconsole.log(result.structuredResponse);\n```\n\n**Error handling**: Control error handling via the `handleErrors` parameter to `ToolStrategy`:\n\n* **Parsing errors**: Model generates data that doesn't match desired structure\n* **Multiple tool calls**: Model generates 2+ tool calls for structured output schemas\n\n***\n\n## Standard content blocks\n\n<Note>\n  1.0 releases are available for most packages. Only the following currently support new content blocks:\n\n  * `langchain`\n  * `@langchain/core`\n  * `@langchain/anthropic`\n  * `@langchain/openai`\n\n  Broader support for content blocks is planned.\n</Note>\n\n### Benefits\n\n* **Provider agnostic**: Access reasoning traces, citations, built-in tools (web search, code interpreters, etc.), and other features using the same API regardless of provider\n* **Type safe**: Full type hints for all content block types\n* **Backward compatible**: Standard content can be [loaded lazily](/oss/javascript/langchain/messages#standard-content-blocks), so there are no associated breaking changes\n\nFor more information, see our guide on [content blocks](/oss/javascript/langchain/messages#message-content)\n\n***\n\n## Simplified package\n\nLangChain v1 streamlines the `langchain` package namespace to focus on essential building blocks for agents. The package exposes only the most useful and relevant functionality:\n\nMost of these are re-exported from `@langchain/core` for convenience, which gives you a focused API surface for building agents.\n\n### `@langchain/classic`\n\nLegacy functionality has moved to [`@langchain/classic`](https://www.npmjs.com/package/@langchain/classic) to keep the core package lean and focused.\n\n#### What's in `@langchain/classic`\n\n* Legacy chains and chain implementations\n* Retrievers\n* The indexing API\n* [`@langchain/community`](https://www.npmjs.com/package/@langchain/community) exports\n* Other deprecated functionality\n\nIf you use any of this functionality, install [`@langchain/classic`](https://www.npmjs.com/package/@langchain/classic):\n\n<CodeGroup>\n  ```bash npm theme={null}\n  npm install @langchain/classic\n  ```\n\n  ```bash pnpm theme={null}\n  pnpm install @langchain/classic\n  ```\n\n  ```bash yarn theme={null}\n  yarn add @langchain/classic\n  ```\n\n  ```bash bun theme={null}\n  bun add @langchain/classic\n  ```\n</CodeGroup>\n\nThen update your imports:\n\n```typescript  theme={null}\nimport { ... } from \"langchain\"; // [!code --]\nimport { ... } from \"@langchain/classic\"; // [!code ++]\n\nimport { ... } from \"langchain/chains\"; // [!code --]\nimport { ... } from \"@langchain/classic/chains\"; // [!code ++]\n```\n\n## Reporting issues\n\nPlease report any issues discovered with 1.0 on [GitHub](https://github.com/langchain-ai/langchainjs/issues) using the [`'v1'` label](https://github.com/langchain-ai/langchainjs/issues?q=state%3Aopen%20label%3Av1).\n\n## Additional resources\n\n<CardGroup cols={3}>\n  <Card title=\"LangChain 1.0\" icon=\"rocket\" href=\"https://blog.langchain.com/langchain-langchain-1-0-alpha-releases/\">\n    Read the announcement\n  </Card>\n\n  <Card title=\"Middleware guide\" icon=\"puzzle-piece\" href=\"https://blog.langchain.com/agent-middleware/\">\n    Deep dive into middleware\n  </Card>\n\n  <Card title=\"Agents Documentation\" icon=\"book\" href=\"/oss/javascript/langchain/agents\" arrow>\n    Full agent documentation\n  </Card>\n\n  <Card title=\"Message Content\" icon=\"message\" href=\"/oss/javascript/langchain/messages#message-content\" arrow>\n    New content blocks API\n  </Card>\n\n  <Card title=\"Migration guide\" icon=\"arrow-right-arrow-left\" href=\"/oss/javascript/migrate/langchain-v1\" arrow>\n    How to migrate to LangChain v1\n  </Card>\n\n  <Card title=\"GitHub\" icon=\"github\" href=\"https://github.com/langchain-ai/langchainjs\">\n    Report issues or contribute\n  </Card>\n</CardGroup>\n\n## See also\n\n* [Versioning](/oss/javascript/versioning) – Understanding version numbers\n* [Release policy](/oss/javascript/release-policy) – Detailed release policies\n\n***\n\n<Callout icon=\"pen-to-square\" iconType=\"regular\">\n  [Edit the source of this page on GitHub.](https://github.com/langchain-ai/docs/edit/main/src/oss/javascript/releases/langchain-v1.mdx)\n</Callout>\n\n<Tip icon=\"terminal\" iconType=\"regular\">\n  [Connect these docs programmatically](/use-these-docs) to Claude, VSCode, and more via MCP for real-time answers.\n</Tip>",
  "content_length": 14477
}