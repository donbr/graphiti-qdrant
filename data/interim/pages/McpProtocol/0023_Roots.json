{
  "title": "Roots",
  "source_url": "https://modelcontextprotocol.io/specification/2025-11-25/client/roots",
  "content": "<div id=\"enable-section-numbers\" />\n\n<Info>**Protocol Revision**: 2025-11-25</Info>\n\nThe Model Context Protocol (MCP) provides a standardized way for clients to expose\nfilesystem \"roots\" to servers. Roots define the boundaries of where servers can operate\nwithin the filesystem, allowing them to understand which directories and files they have\naccess to. Servers can request the list of roots from supporting clients and receive\nnotifications when that list changes.\n\n## User Interaction Model\n\nRoots in MCP are typically exposed through workspace or project configuration interfaces.\n\nFor example, implementations could offer a workspace/project picker that allows users to\nselect directories and files the server should have access to. This can be combined with\nautomatic workspace detection from version control systems or project files.\n\nHowever, implementations are free to expose roots through any interface pattern that\nsuits their needsâ€”the protocol itself does not mandate any specific user\ninteraction model.\n\n## Capabilities\n\nClients that support roots **MUST** declare the `roots` capability during\n[initialization](/specification/2025-11-25/basic/lifecycle#initialization):\n\n```json  theme={null}\n{\n  \"capabilities\": {\n    \"roots\": {\n      \"listChanged\": true\n    }\n  }\n}\n```\n\n`listChanged` indicates whether the client will emit notifications when the list of roots\nchanges.\n\n## Protocol Messages\n\n### Listing Roots\n\nTo retrieve roots, servers send a `roots/list` request:\n\n**Request:**\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"roots/list\"\n}\n```\n\n**Response:**\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\n    \"roots\": [\n      {\n        \"uri\": \"file:///home/user/projects/myproject\",\n        \"name\": \"My Project\"\n      }\n    ]\n  }\n}\n```\n\n### Root List Changes\n\nWhen roots change, clients that support `listChanged` **MUST** send a notification:\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"method\": \"notifications/roots/list_changed\"\n}\n```\n\n## Message Flow\n\n```mermaid  theme={null}\nsequenceDiagram\n    participant Server\n    participant Client\n\n    Note over Server,Client: Discovery\n    Server->>Client: roots/list\n    Client-->>Server: Available roots\n\n    Note over Server,Client: Changes\n    Client--)Server: notifications/roots/list_changed\n    Server->>Client: roots/list\n    Client-->>Server: Updated roots\n```\n\n## Data Types\n\n### Root\n\nA root definition includes:\n\n* `uri`: Unique identifier for the root. This **MUST** be a `file://` URI in the current\n  specification.\n* `name`: Optional human-readable name for display purposes.\n\nExample roots for different use cases:\n\n#### Project Directory\n\n```json  theme={null}\n{\n  \"uri\": \"file:///home/user/projects/myproject\",\n  \"name\": \"My Project\"\n}\n```\n\n#### Multiple Repositories\n\n```json  theme={null}\n[\n  {\n    \"uri\": \"file:///home/user/repos/frontend\",\n    \"name\": \"Frontend Repository\"\n  },\n  {\n    \"uri\": \"file:///home/user/repos/backend\",\n    \"name\": \"Backend Repository\"\n  }\n]\n```\n\n## Error Handling\n\nClients **SHOULD** return standard JSON-RPC errors for common failure cases:\n\n* Client does not support roots: `-32601` (Method not found)\n* Internal errors: `-32603`\n\nExample error:\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"error\": {\n    \"code\": -32601,\n    \"message\": \"Roots not supported\",\n    \"data\": {\n      \"reason\": \"Client does not have roots capability\"\n    }\n  }\n}\n```\n\n## Security Considerations\n\n1. Clients **MUST**:\n   * Only expose roots with appropriate permissions\n   * Validate all root URIs to prevent path traversal\n   * Implement proper access controls\n   * Monitor root accessibility\n\n2. Servers **SHOULD**:\n   * Handle cases where roots become unavailable\n   * Respect root boundaries during operations\n   * Validate all paths against provided roots\n\n## Implementation Guidelines\n\n1. Clients **SHOULD**:\n   * Prompt users for consent before exposing roots to servers\n   * Provide clear user interfaces for root management\n   * Validate root accessibility before exposing\n   * Monitor for root changes\n\n2. Servers **SHOULD**:\n   * Check for roots capability before usage\n   * Handle root list changes gracefully\n   * Respect root boundaries in operations\n   * Cache root information appropriately",
  "content_length": 4269
}