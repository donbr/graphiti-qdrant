{
  "title": "Completion",
  "source_url": "https://modelcontextprotocol.io/specification/2025-11-25/server/utilities/completion",
  "content": "<div id=\"enable-section-numbers\" />\n\n<Info>**Protocol Revision**: 2025-11-25</Info>\n\nThe Model Context Protocol (MCP) provides a standardized way for servers to offer\nautocompletion suggestions for the arguments of prompts and resource templates. When\nusers are filling in argument values for a specific prompt (identified by name) or\nresource template (identified by URI), servers can provide contextual suggestions.\n\n## User Interaction Model\n\nCompletion in MCP is designed to support interactive user experiences similar to IDE code\ncompletion.\n\nFor example, applications may show completion suggestions in a dropdown or popup menu as\nusers type, with the ability to filter and select from available options.\n\nHowever, implementations are free to expose completion through any interface pattern that\nsuits their needsâ€”the protocol itself does not mandate any specific user\ninteraction model.\n\n## Capabilities\n\nServers that support completions **MUST** declare the `completions` capability:\n\n```json  theme={null}\n{\n  \"capabilities\": {\n    \"completions\": {}\n  }\n}\n```\n\n## Protocol Messages\n\n### Requesting Completions\n\nTo get completion suggestions, clients send a `completion/complete` request specifying\nwhat is being completed through a reference type:\n\n**Request:**\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"completion/complete\",\n  \"params\": {\n    \"ref\": {\n      \"type\": \"ref/prompt\",\n      \"name\": \"code_review\"\n    },\n    \"argument\": {\n      \"name\": \"language\",\n      \"value\": \"py\"\n    }\n  }\n}\n```\n\n**Response:**\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\n    \"completion\": {\n      \"values\": [\"python\", \"pytorch\", \"pyside\"],\n      \"total\": 10,\n      \"hasMore\": true\n    }\n  }\n}\n```\n\nFor prompts or URI templates with multiple arguments, clients should include previous completions in the `context.arguments` object to provide context for subsequent requests.\n\n**Request:**\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"method\": \"completion/complete\",\n  \"params\": {\n    \"ref\": {\n      \"type\": \"ref/prompt\",\n      \"name\": \"code_review\"\n    },\n    \"argument\": {\n      \"name\": \"framework\",\n      \"value\": \"fla\"\n    },\n    \"context\": {\n      \"arguments\": {\n        \"language\": \"python\"\n      }\n    }\n  }\n}\n```\n\n**Response:**\n\n```json  theme={null}\n{\n  \"jsonrpc\": \"2.0\",\n  \"id\": 1,\n  \"result\": {\n    \"completion\": {\n      \"values\": [\"flask\"],\n      \"total\": 1,\n      \"hasMore\": false\n    }\n  }\n}\n```\n\n### Reference Types\n\nThe protocol supports two types of completion references:\n\n| Type           | Description                 | Example                                             |\n| -------------- | --------------------------- | --------------------------------------------------- |\n| `ref/prompt`   | References a prompt by name | `{\"type\": \"ref/prompt\", \"name\": \"code_review\"}`     |\n| `ref/resource` | References a resource URI   | `{\"type\": \"ref/resource\", \"uri\": \"file:///{path}\"}` |\n\n### Completion Results\n\nServers return an array of completion values ranked by relevance, with:\n\n* Maximum 100 items per response\n* Optional total number of available matches\n* Boolean indicating if additional results exist\n\n## Message Flow\n\n```mermaid  theme={null}\nsequenceDiagram\n    participant Client\n    participant Server\n\n    Note over Client: User types argument\n    Client->>Server: completion/complete\n    Server-->>Client: Completion suggestions\n\n    Note over Client: User continues typing\n    Client->>Server: completion/complete\n    Server-->>Client: Refined suggestions\n```\n\n## Data Types\n\n### CompleteRequest\n\n* `ref`: A `PromptReference` or `ResourceReference`\n* `argument`: Object containing:\n  * `name`: Argument name\n  * `value`: Current value\n* `context`: Object containing:\n  * `arguments`: A mapping of already-resolved argument names to their values.\n\n### CompleteResult\n\n* `completion`: Object containing:\n  * `values`: Array of suggestions (max 100)\n  * `total`: Optional total matches\n  * `hasMore`: Additional results flag\n\n## Error Handling\n\nServers **SHOULD** return standard JSON-RPC errors for common failure cases:\n\n* Method not found: `-32601` (Capability not supported)\n* Invalid prompt name: `-32602` (Invalid params)\n* Missing required arguments: `-32602` (Invalid params)\n* Internal errors: `-32603` (Internal error)\n\n## Implementation Considerations\n\n1. Servers **SHOULD**:\n   * Return suggestions sorted by relevance\n   * Implement fuzzy matching where appropriate\n   * Rate limit completion requests\n   * Validate all inputs\n\n2. Clients **SHOULD**:\n   * Debounce rapid completion requests\n   * Cache completion results where appropriate\n   * Handle missing or partial results gracefully\n\n## Security\n\nImplementations **MUST**:\n\n* Validate all completion inputs\n* Implement appropriate rate limiting\n* Control access to sensitive suggestions\n* Prevent completion-based information disclosure",
  "content_length": 4895
}