{
  "title": "How to run tasks background tasks",
  "source_url": "https://docs-3.prefect.io/v3/how-to-guides/workflows/run-background-tasks",
  "content": "### Start a background task worker\n\nTo start a worker to run background tasks for a single function, define a task and call `.serve()` on it.\n\n```python  theme={null}\nfrom prefect import task\n\n@task(log_prints=True)\ndef add(a: int, b: int):\n    print(f\"{a} + {b} = {a + b}\")\n\nadd.serve()\n```\n\n### Trigger a background task\n\nTo trigger a background task, call `.delay()` on the same task in a different terminal.\n\n```python  theme={null}\nadd.delay(1, 2)\n```\n\n<Tip>\n  `.delay()` has the same signature as the `@task` decorated function.\n</Tip>\n\n### Start a worker to run background tasks for multiple functions\n\nTo start a worker to run background tasks for multiple functions, call `serve()` with the tasks you want to run.\n\n```python  theme={null}\nfrom prefect import task\nfrom prefect.task_worker import serve\n\n@task(log_prints=True)\ndef add(a: int, b: int):\n    print(f\"{a} + {b} = {a + b}\")\n\n@task(log_prints=True)\ndef multiply(a: int, b: int):\n    print(f\"{a} * {b} = {a * b}\")\n\n# Both these invocations will run once the worker is started\nadd.delay(1, 2)\nmultiply.delay(1, 4)\n\nserve(add, multiply) # start a task worker listening for both `add` and `multiply`\n```\n\n### Submit multiple background tasks\n\nTo submit multiple background tasks, call `.map()` on the task with `deferred=True`.\n\n```python  theme={null}\nfrom prefect import task\n\n@task(log_prints=True)\ndef add(a: int, b: int):\n    print(f\"{a} + {b} = {a + b}\")\n\nA = [1, 2, 3]\nB = [4, 5, 6]\n\nadd.map(A, B, deferred=True)\n\nadd.serve()\n```\n\n<Tip>\n  `.map()` accepts `Iterable[P.args]`, `Iterable[P.kwargs]` or `unmapped` inputs.\n</Tip>\n\nIf you want to keep one argument mapped and the other unmapped, you can do so by passing `unmapped` to the mapped argument.\n\n```python  theme={null}\nfrom prefect import task, unmapped\n\n@task(log_prints=True)\ndef add(a: int, b: int):\n    print(f\"{a} + {b} = {a + b}\")\n\nA = [1, 2, 3]\n\nadd.map(A, unmapped(4), deferred=True)\n\nadd.serve()\n```\n\n### Further reading\n\n* [How to deploy a web application with Prefect background tasks](/v3/advanced/background-tasks)\n* [Prefect Background Task Examples](https://github.com/PrefectHQ/prefect-background-task-examples) repository for reference implementations of applications leveraging background tasks.",
  "content_length": 2242
}