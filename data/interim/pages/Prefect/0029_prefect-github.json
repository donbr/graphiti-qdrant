{
  "title": "prefect-github",
  "source_url": "https://docs-3.prefect.io/integrations/prefect-github/index",
  "content": "Prefect-github makes it easy to interact with GitHub repositories and use GitHub credentials.\n\n## Getting started\n\n### Prerequisites\n\n* A [GitHub account](https://github.com/).\n\n### Install `prefect-github`\n\nThe following command will install a version of `prefect-github` compatible with your installed version of `prefect`.\nIf you don't already have `prefect` installed, it will install the newest version of `prefect` as well.\n\n```bash  theme={null}\npip install \"prefect[github]\"\n```\n\nUpgrade to the latest versions of `prefect` and `prefect-github`:\n\n```bash  theme={null}\npip install -U \"prefect[github]\"\n```\n\n### Register newly installed block types\n\nRegister the block types in the `prefect-github` module to make them available for use.\n\n```bash  theme={null}\nprefect block register -m prefect_github\n```\n\n## Examples\n\nIn the examples below, you create blocks with Python code.\nAlternatively, blocks can be created through the Prefect UI.\n\nTo create a deployment and run a deployment where the flow code is stored in a private GitHub repository, you can use the `GitHubCredentials` block.\n\nA deployment can use flow code stored in a GitHub repository without using this library in either of the following cases:\n\n* The repository is public\n* The deployment uses a [Secret block](https://docs.prefect.io/latest/develop/blocks/) to store the token\n\nCode to create a GitHub Credentials block:\n\n```python  theme={null}\nfrom prefect_github import GitHubCredentials\n\n\ngithub_credentials_block = GitHubCredentials(token=\"my_token\")\ngithub_credentials_block.save(name=\"my-github-credentials-block\")\n```\n\n### Access flow code stored in a private GitHub repository in a deployment\n\nUse the credentials block you created above to pass the GitHub access token during deployment creation. The code below assumes there's flow code stored in a private GitHub repository.\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect.runner.storage import GitRepository\nfrom prefect_github import GitHubCredentials\n\n\nif __name__ == \"__main__\":\n\n    source = GitRepository(\n        url=\"https://github.com/org/private-repo.git\",\n        credentials=GitHubCredentials.load(\"my-github-credentials-block\")\n    )\n\n    flow.from_source(source=source, entrypoint=\"my_file.py:my_flow\").deploy(\n        name=\"private-github-deploy\",\n        work_pool_name=\"my_pool\",\n    )\n```\n\nAlternatively, if you use a `prefect.yaml` file to create the deployment, reference the GitHub Credentials block in the `pull` step:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/org/repo.git\n        credentials: \"{{ prefect.blocks.github-credentials.my-github-credentials-block }}\"\n```\n\n### Interact with a GitHub repository\n\nYou can use prefect-github to create and retrieve issues and PRs from a repository.\nHere's an example of adding a star to a GitHub repository:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect_github import GitHubCredentials\nfrom prefect_github.repository import query_repository\nfrom prefect_github.mutations import add_star_starrable\n\n\n@flow()\ndef github_add_star_flow():\n    github_credentials = GitHubCredentials.load(\"github-token\")\n    repository_id = query_repository(\n        \"PrefectHQ\",\n        \"Prefect\",\n        github_credentials=github_credentials,\n        return_fields=\"id\"\n    )[\"id\"]\n    starrable = add_star_starrable(\n        repository_id,\n        github_credentials\n    )\n    return starrable\n\n\nif __name__ == \"__main__\":\n    github_add_star_flow()\n```\n\n## Resources\n\nFor assistance using GitHub, consult the [GitHub documentation](https://docs.github.com).\n\nRefer to the `prefect-github` [SDK documentation](https://reference.prefect.io/prefect_github/) to explore all the capabilities of the `prefect-github` library.",
  "content_length": 3808
}