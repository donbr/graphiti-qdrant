{
  "title": "server",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-utilities-server",
  "content": "# `prefect.server.utilities.server`\n\nUtilities for the Prefect REST API server.\n\n## Functions\n\n### `method_paths_from_routes` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/utilities/server.py#L15\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmethod_paths_from_routes(routes: Sequence[BaseRoute]) -> set[str]\n```\n\nGenerate a set of strings describing the given routes in the format: \\<method> \\<path>\n\nFor example, \"GET /logs/\"\n\n## Classes\n\n### `PrefectAPIRoute` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/utilities/server.py#L30\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA FastAPIRoute class which attaches an async stack to requests that exits before\na response is returned.\n\nRequests already have `request.scope['fastapi_astack']` which is an async stack for\nthe full scope of the request. This stack is used for managing contexts of FastAPI\ndependencies. If we want to close a dependency before the request is complete\n(i.e. before returning a response to the user), we need a stack with a different\nscope. This extension adds this stack at `request.state.response_scoped_stack`.\n\n**Methods:**\n\n#### `get_route_handler` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/utilities/server.py#L42\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_route_handler(self) -> Callable[[Request], Coroutine[Any, Any, Response]]\n```\n\n### `PrefectRouter` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/utilities/server.py#L59\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA base class for Prefect REST API routers.\n\n**Methods:**\n\n#### `add_api_route` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/utilities/server.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nadd_api_route(self, path: str, endpoint: Callable[..., Any], **kwargs: Any) -> None\n```\n\nAdd an API route.\n\nFor routes that return content and have not specified a `response_model`,\nuse return type annotation to infer the response model.\n\nFor routes that return No-Content status codes, explicitly set\na `response_class` to ensure nothing is returned in the response body.",
  "content_length": 2474
}