{
  "title": "process",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-workers-process",
  "content": "# `prefect.workers.process`\n\nModule containing the Process worker used for executing flow runs as subprocesses.\n\nTo start a Process worker, run the following command:\n\n```bash  theme={null}\nprefect worker start --pool 'my-work-pool' --type process\n```\n\nReplace `my-work-pool` with the name of the work pool you want the worker\nto poll for flow runs.\n\nFor more information about work pools and workers,\ncheckout out the [Prefect docs](https://docs.prefect.io/v3/concepts/work-pools/).\n\n## Classes\n\n### `ProcessJobConfiguration` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L57\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `from_template_and_values` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L165\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_template_and_values(cls, base_job_template: dict[str, Any], values: dict[str, Any], client: 'PrefectClient | None' = None)\n```\n\nCreates a valid worker configuration object from the provided base\nconfiguration and overrides.\n\nImportant: this method expects that the base\\_job\\_template was already\nvalidated server-side.\n\n#### `is_using_a_runner` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L135\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_using_a_runner(self) -> bool\n```\n\n#### `json_template` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L211\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\njson_template(cls) -> dict[str, Any]\n```\n\nReturns a dict with job configuration as keys and the corresponding templates as values\n\nDefaults to using the job configuration parameter name as the template variable name.\n\ne.g.\n\n```python  theme={null}\n{\n    key1: '{{ key1 }}',     # default variable template\n    key2: '{{ template2 }}', # `template2` specifically provide as template\n}\n```\n\n#### `prepare_for_flow_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nprepare_for_flow_run(self, flow_run: 'FlowRun', deployment: 'DeploymentResponse | None' = None, flow: 'APIFlow | None' = None, work_pool: 'WorkPool | None' = None, worker_name: str | None = None) -> None\n```\n\n#### `prepare_for_flow_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L235\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nprepare_for_flow_run(self, flow_run: 'FlowRun', deployment: 'DeploymentResponse | None' = None, flow: 'APIFlow | None' = None, work_pool: 'WorkPool | None' = None, worker_name: str | None = None) -> None\n```\n\nPrepare the job configuration for a flow run.\n\nThis method is called by the worker before starting a flow run. It\nshould be used to set any configuration values that are dependent on\nthe flow run.\n\n**Args:**\n\n* `flow_run`: The flow run to be executed.\n* `deployment`: The deployment that the flow run is associated with.\n* `flow`: The flow that the flow run is associated with.\n* `work_pool`: The work pool that the flow run is running in.\n* `worker_name`: The name of the worker that is submitting the flow run.\n\n#### `validate_working_dir` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L63\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nvalidate_working_dir(cls, v: Path | str | None) -> Path | None\n```\n\n### `ProcessVariables` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L94\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `model_json_schema` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L402\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmodel_json_schema(cls, by_alias: bool = True, ref_template: str = '#/definitions/{model}', schema_generator: Type[GenerateJsonSchema] = GenerateJsonSchema, mode: Literal['validation', 'serialization'] = 'validation') -> dict[str, Any]\n```\n\nTODO: stop overriding this method - use GenerateSchema in ConfigDict instead?\n\n### `ProcessWorkerResult` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L113\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nContains information about the final state of a completed process\n\n### `ProcessWorker` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L117\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L225\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun(self, flow_run: 'FlowRun', configuration: ProcessJobConfiguration, task_status: Optional[anyio.abc.TaskStatus[int]] = None) -> ProcessWorkerResult\n```\n\n#### `start` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/process.py#L132\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstart(self, run_once: bool = False, with_healthcheck: bool = False, printer: Callable[..., None] = print) -> None\n```\n\nStarts the worker and runs the main worker loops.\n\nBy default, the worker will run loops to poll for scheduled/cancelled flow\nruns and sync with the Prefect API server.\n\nIf `run_once` is set, the worker will only run each loop once and then return.\n\nIf `with_healthcheck` is set, the worker will start a healthcheck server which\ncan be used to determine if the worker is still polling for flow runs and restart\nthe worker if necessary.\n\n**Args:**\n\n* `run_once`: If set, the worker will only run each loop once then return.\n* `with_healthcheck`: If set, the worker will start a healthcheck server.\n* `printer`: A `print`-like function where logs will be reported.",
  "content_length": 6500
}