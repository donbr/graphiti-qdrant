{
  "title": "states",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-states",
  "content": "# `prefect.states`\n\n## Functions\n\n### `to_state_create` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L46\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_state_create(state: State) -> 'StateCreate'\n```\n\nConvert the state to a `StateCreate` type which can be used to set the state of\na run in the API.\n\nThis method will drop this state's `data` if it is not a result type. Only\nresults should be sent to the API. Other data is only available locally.\n\n### `get_state_result` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L74\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_state_result(state: 'State[R]', raise_on_failure: bool = True, retry_result_failure: bool = True) -> 'R'\n```\n\nGet the result from a state.\n\nSee `State.result()`\n\n### `format_exception` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L183\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nformat_exception(exc: BaseException, tb: TracebackType = None) -> str\n```\n\n### `exception_to_crashed_state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L199\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nexception_to_crashed_state(exc: BaseException, result_store: Optional['ResultStore'] = None) -> State\n```\n\nTakes an exception that occurs *outside* of user code and converts it to a\n'Crash' exception with a 'Crashed' state.\n\n### `exception_to_failed_state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L251\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nexception_to_failed_state(exc: Optional[BaseException] = None, result_store: Optional['ResultStore'] = None, write_result: bool = False, **kwargs: Any) -> State[BaseException]\n```\n\nConvenience function for creating `Failed` states from exceptions\n\n### `return_value_to_state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L304\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nreturn_value_to_state(retval: 'R', result_store: 'ResultStore', key: Optional[str] = None, expiration: Optional[datetime.datetime] = None, write_result: bool = False) -> 'State[R]'\n```\n\nGiven a return value from a user's function, create a `State` the run should\nbe placed in.\n\n* If data is returned, we create a 'COMPLETED' state with the data\n* If a single, manually created state is returned, we use that state as given\n  (manual creation is determined by the lack of ids)\n* If an upstream state or iterable of upstream states is returned, we apply the\n  aggregate rule\n\nThe aggregate rule says that given multiple states we will determine the final state\nsuch that:\n\n* If any states are not COMPLETED the final state is FAILED\n* If all of the states are COMPLETED the final state is COMPLETED\n* The states will be placed in the final state `data` attribute\n\nCallers should resolve all futures into states before passing return values to this\nfunction.\n\n### `aget_state_exception` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L445\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\naget_state_exception(state: State) -> BaseException\n```\n\nGet the exception from a state asynchronously.\n\nIf not given a FAILED or CRASHED state, this raise a value error.\n\nIf the state result is a state, its exception will be returned.\n\nIf the state result is an iterable of states, the exception of the first failure\nwill be returned.\n\nIf the state result is a string, a wrapper exception will be returned with the\nstring as the message.\n\nIf the state result is null, a wrapper exception will be returned with the state\nmessage attached.\n\nIf the state result is not of a known type, a `TypeError` will be returned.\n\nWhen a wrapper exception is returned, the type will be:\n\n* `FailedRun` if the state type is FAILED.\n* `CrashedRun` if the state type is CRASHED.\n* `CancelledRun` if the state type is CANCELLED.\n\n### `get_state_exception` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L531\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_state_exception(state: State) -> BaseException\n```\n\nGet the exception from a state.\n\nIf not given a FAILED or CRASHED state, this raise a value error.\n\nIf the state result is a state, its exception will be returned.\n\nIf the state result is an iterable of states, the exception of the first failure\nwill be returned.\n\nIf the state result is a string, a wrapper exception will be returned with the\nstring as the message.\n\nIf the state result is null, a wrapper exception will be returned with the state\nmessage attached.\n\nIf the state result is not of a known type, a `TypeError` will be returned.\n\nWhen a wrapper exception is returned, the type will be:\n\n* `FailedRun` if the state type is FAILED.\n* `CrashedRun` if the state type is CRASHED.\n* `CancelledRun` if the state type is CANCELLED.\n\n### `araise_state_exception` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L631\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\naraise_state_exception(state: State) -> None\n```\n\nGiven a FAILED or CRASHED state, raise the contained exception asynchronously.\n\n### `raise_state_exception` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L642\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nraise_state_exception(state: State) -> None\n```\n\nGiven a FAILED or CRASHED state, raise the contained exception.\n\n### `is_state_iterable` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L652\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_state_iterable(obj: Any) -> TypeGuard[Iterable[State]]\n```\n\nCheck if a the given object is an iterable of states types\n\nSupported iterables are:\n\n* set\n* list\n* tuple\n\nOther iterables will return `False` even if they contain states.\n\n### `Scheduled` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L738\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nScheduled(cls: Type['State[R]'] = State, scheduled_time: Optional[datetime.datetime] = None, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Scheduled` states.\n\n**Returns:**\n\n* a Scheduled state\n\n### `Completed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L758\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nCompleted(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Completed` states.\n\n**Returns:**\n\n* a Completed state\n\n### `Running` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L768\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nRunning(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Running` states.\n\n**Returns:**\n\n* a Running state\n\n### `Failed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L777\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nFailed(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Failed` states.\n\n**Returns:**\n\n* a Failed state\n\n### `Crashed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L786\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nCrashed(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Crashed` states.\n\n**Returns:**\n\n* a Crashed state\n\n### `Cancelling` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L795\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nCancelling(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Cancelling` states.\n\n**Returns:**\n\n* a Cancelling state\n\n### `Cancelled` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L804\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nCancelled(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Cancelled` states.\n\n**Returns:**\n\n* a Cancelled state\n\n### `Pending` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L813\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nPending(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Pending` states.\n\n**Returns:**\n\n* a Pending state\n\n### `Paused` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L822\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nPaused(cls: Type['State[R]'] = State, timeout_seconds: Optional[int] = None, pause_expiration_time: Optional[datetime.datetime] = None, reschedule: bool = False, pause_key: Optional[str] = None, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Paused` states.\n\n**Returns:**\n\n* a Paused state\n\n### `Suspended` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L860\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nSuspended(cls: Type['State[R]'] = State, timeout_seconds: Optional[int] = None, pause_expiration_time: Optional[datetime.datetime] = None, pause_key: Optional[str] = None, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Suspended` states.\n\n**Returns:**\n\n* a Suspended state\n\n### `AwaitingRetry` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L883\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAwaitingRetry(cls: Type['State[R]'] = State, scheduled_time: Optional[datetime.datetime] = None, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `AwaitingRetry` states.\n\n**Returns:**\n\n* an AwaitingRetry state\n\n### `AwaitingConcurrencySlot` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L898\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAwaitingConcurrencySlot(cls: Type['State[R]'] = State, scheduled_time: Optional[datetime.datetime] = None, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `AwaitingConcurrencySlot` states.\n\n**Returns:**\n\n* an AwaitingConcurrencySlot state\n\n### `Retrying` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L913\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nRetrying(cls: Type['State[R]'] = State, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Retrying` states.\n\n**Returns:**\n\n* a Retrying state\n\n### `Late` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L922\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nLate(cls: Type['State[R]'] = State, scheduled_time: Optional[datetime.datetime] = None, **kwargs: Any) -> 'State[R]'\n```\n\nConvenience function for creating `Late` states.\n\n**Returns:**\n\n* a Late state\n\n## Classes\n\n### `StateGroup` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L675\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `all_completed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L689\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nall_completed(self) -> bool\n```\n\n#### `all_final` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L704\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nall_final(self) -> bool\n```\n\n#### `any_cancelled` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L692\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nany_cancelled(self) -> bool\n```\n\n#### `any_failed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L695\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nany_failed(self) -> bool\n```\n\n#### `any_paused` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L701\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nany_paused(self) -> bool\n```\n\n#### `counts_message` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L707\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncounts_message(self) -> str\n```\n\n#### `fail_count` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/states.py#L686\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfail_count(self) -> int\n```",
  "content_length": 14326
}