{
  "title": "dependencies",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-database-dependencies",
  "content": "# `prefect.server.database.dependencies`\n\nInjected database interface dependencies\n\n## Functions\n\n### `provide_database_interface` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nprovide_database_interface() -> 'PrefectDBInterface'\n```\n\nGet the current Prefect REST API database interface.\n\nIf components of the interface are not set, defaults will be inferred\nbased on the dialect of the connection URL.\n\n### `inject_db` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L142\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ninject_db(fn: Callable[P, R]) -> Callable[P, R]\n```\n\nDecorator that provides a database interface to a function.\n\nThe decorated function *must* take a `db` kwarg and if a db is passed\nwhen called it will be used instead of creating a new one.\n\n### `db_injector` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L177\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndb_injector(func: Union[_DBMethod[T, P, R], _DBFunction[P, R]]) -> Union[_Method[T, P, R], _Function[P, R]]\n```\n\nDecorator to inject a PrefectDBInterface instance as the first positional\nargument to the decorated function.\n\nUnlike `inject_db`, which injects the database connection as a keyword\nargument, `db_injector` adds it explicitly as the first positional\nargument. This change enhances type hinting by making the dependency on\nPrefectDBInterface explicit in the function signature.\n\nWhen decorating a coroutine function, the result will continue to pass the\niscoroutinefunction() test.\n\n**Args:**\n\n* `func`: The function or method to decorate.\n\n**Returns:**\n\n* A wrapped descriptor object which injects the PrefectDBInterface instance\n* as the first argument to the function or method. This handles method\n* binding transparently.\n\n### `temporary_database_config` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L346\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntemporary_database_config(tmp_database_config: Optional[BaseDatabaseConfiguration]) -> Generator[None, object, None]\n```\n\nTemporarily override the Prefect REST API database configuration.\nWhen the context is closed, the existing database configuration will\nbe restored.\n\n**Args:**\n\n* `tmp_database_config`: Prefect REST API database configuration to inject.\n\n### `temporary_query_components` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L367\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntemporary_query_components(tmp_queries: Optional['BaseQueryComponents']) -> Generator[None, object, None]\n```\n\nTemporarily override the Prefect REST API database query components.\nWhen the context is closed, the existing query components will\nbe restored.\n\n**Args:**\n\n* `tmp_queries`: Prefect REST API query components to inject.\n\n### `temporary_orm_config` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L388\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntemporary_orm_config(tmp_orm_config: Optional['BaseORMConfiguration']) -> Generator[None, object, None]\n```\n\nTemporarily override the Prefect REST API ORM configuration.\nWhen the context is closed, the existing orm configuration will\nbe restored.\n\n**Args:**\n\n* `tmp_orm_config`: Prefect REST API ORM configuration to inject.\n\n### `temporary_interface_class` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L409\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntemporary_interface_class(tmp_interface_class: Optional[type['PrefectDBInterface']]) -> Generator[None, object, None]\n```\n\nTemporarily override the Prefect REST API interface class When the context is closed,\nthe existing interface will be restored.\n\n**Args:**\n\n* `tmp_interface_class`: Prefect REST API interface class to inject.\n\n### `temporary_database_interface` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L429\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntemporary_database_interface(tmp_database_config: Optional[BaseDatabaseConfiguration] = None, tmp_queries: Optional['BaseQueryComponents'] = None, tmp_orm_config: Optional['BaseORMConfiguration'] = None, tmp_interface_class: Optional[type['PrefectDBInterface']] = None) -> Generator[None, object, None]\n```\n\nTemporarily override the Prefect REST API database interface.\n\nAny interface components that are not explicitly provided will be\ncleared and inferred from the Prefect REST API database connection string\ndialect.\n\nWhen the context is closed, the existing database interface will\nbe restored.\n\n**Args:**\n\n* `tmp_database_config`: An optional Prefect REST API database configuration to inject.\n* `tmp_orm_config`: An optional Prefect REST API ORM configuration to inject.\n* `tmp_queries`: Optional Prefect REST API query components to inject.\n* `tmp_interface_class`: Optional database interface class to inject\n\n### `set_database_config` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L464\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_database_config(database_config: Optional[BaseDatabaseConfiguration]) -> None\n```\n\nSet Prefect REST API database configuration.\n\n### `set_query_components` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L469\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_query_components(query_components: Optional['BaseQueryComponents']) -> None\n```\n\nSet Prefect REST API query components.\n\n### `set_orm_config` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L474\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_orm_config(orm_config: Optional['BaseORMConfiguration']) -> None\n```\n\nSet Prefect REST API orm configuration.\n\n### `set_interface_class` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L479\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_interface_class(interface_class: Optional[type['PrefectDBInterface']]) -> None\n```\n\nSet Prefect REST API interface class.\n\n## Classes\n\n### `DBInjector` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/dependencies.py#L239\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>",
  "content_length": 7362
}