{
  "title": "database",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-events-storage-database",
  "content": "# `prefect.server.events.storage.database`\n\n## Functions\n\n### `build_distinct_queries` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L35\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nbuild_distinct_queries(db: PrefectDBInterface, events_filter: EventFilter) -> list[sa.Column['ORMEvent']]\n```\n\n### `query_events` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L47\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nquery_events(session: AsyncSession, filter: EventFilter, page_size: int = INTERACTIVE_PAGE_SIZE) -> tuple[list[ReceivedEvent], int, Optional[str]]\n```\n\n### `query_next_page` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nquery_next_page(session: AsyncSession, page_token: str) -> tuple[list[ReceivedEvent], int, Optional[str]]\n```\n\n### `count_events` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L72\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncount_events(session: AsyncSession, filter: EventFilter, countable: Countable, time_unit: TimeUnit, time_interval: float) -> list[EventCount]\n```\n\n### `raw_count_events` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L97\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nraw_count_events(db: PrefectDBInterface, session: AsyncSession, events_filter: EventFilter) -> int\n```\n\nCount events from the database with the given filter.\n\nOnly returns the count and does not return any addition metadata. For additional\nmetadata, use `count_events`.\n\n**Args:**\n\n* `session`: a database session\n* `events_filter`: filter criteria for events\n\n**Returns:**\n\n* The count of events in the database that match the filter criteria.\n\n### `read_events` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L130\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_events(db: PrefectDBInterface, session: AsyncSession, events_filter: EventFilter, limit: Optional[int] = None, offset: Optional[int] = None) -> Sequence['ORMEvent']\n```\n\nRead events from the Postgres database.\n\n**Args:**\n\n* `session`: a Postgres events session.\n* `filter`: filter criteria for events.\n* `limit`: limit for the query.\n* `offset`: offset for the query.\n\n**Returns:**\n\n* A list of events ORM objects.\n\n### `write_events` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L200\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwrite_events(session: AsyncSession, events: list[ReceivedEvent]) -> None\n```\n\nWrite events to the database.\n\n**Args:**\n\n* `session`: a database session\n* `events`: the events to insert\n\n### `get_max_query_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_max_query_parameters() -> int\n```\n\n### `get_number_of_event_fields` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L297\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_number_of_event_fields() -> int\n```\n\n### `get_number_of_resource_fields` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/storage/database.py#L302\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_number_of_resource_fields() -> int\n```",
  "content_length": 4218
}