{
  "title": "storage",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-runner-storage",
  "content": "# `prefect.runner.storage`\n\n## Functions\n\n### `create_storage_from_source` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L854\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncreate_storage_from_source(source: str, pull_interval: Optional[int] = 60) -> RunnerStorage\n```\n\nCreates a storage object from a URL.\n\n**Args:**\n\n* `url`: The URL to create a storage object from. Supports git and `fsspec`\n  URLs.\n* `pull_interval`: The interval at which to pull contents from remote storage to\n  local storage\n\n**Returns:**\n\n* A runner storage compatible object\n\n## Classes\n\n### `RunnerStorage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L31\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA storage interface for a runner to use to retrieve\nremotely stored flow code.\n\n**Methods:**\n\n#### `destination` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L53\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndestination(self) -> Path\n```\n\nThe local file path to pull contents from remote storage to.\n\n#### `pull_code` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L59\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_code(self) -> None\n```\n\nPulls contents from remote storage to the local filesystem.\n\n#### `pull_interval` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L45\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_interval(self) -> Optional[int]\n```\n\nThe interval at which contents from remote storage should be pulled to\nlocal storage. If None, remote storage will perform a one-time sync.\n\n#### `set_base_path` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L37\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_base_path(self, path: Path) -> None\n```\n\nSets the base path to use when pulling contents from remote storage to\nlocal storage.\n\n#### `to_pull_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L65\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_pull_step(self) -> dict[str, Any] | list[dict[str, Any]]\n```\n\nReturns a dictionary representation of the storage object that can be\nused as a deployment pull step.\n\n### `GitCredentials` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L79\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n### `GitRepository` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L117\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nPulls the contents of a git repository to the local filesystem.\n\n**Args:**\n\n* `url`: The URL of the git repository to pull from\n* `credentials`: A dictionary of credentials to use when pulling from the\n  repository. If a username is provided, an access token must also be\n  provided.\n* `name`: The name of the repository. If not provided, the name will be\n  inferred from the repository URL.\n* `branch`: The branch to pull from. Defaults to \"main\".\n* `pull_interval`: The interval in seconds at which to pull contents from\n  remote storage to local storage. If None, remote storage will perform\n  a one-time sync.\n* `directories`: The directories to pull from the Git repository (uses git sparse-checkout)\n\n**Examples:**\n\nPull the contents of a private git repository to the local filesystem:\n\n```python  theme={null}\nfrom prefect.runner.storage import GitRepository\n\nstorage = GitRepository(\n    url=\"https://github.com/org/repo.git\",\n    credentials={\"username\": \"oauth2\", \"access_token\": \"my-access-token\"},\n)\n\nawait storage.pull_code()\n```\n\n**Methods:**\n\n#### `destination` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L193\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndestination(self) -> Path\n```\n\n#### `is_current_commit` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L313\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_current_commit(self) -> bool\n```\n\nCheck if the current commit is the same as the commit SHA\n\n#### `is_shallow_clone` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L300\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_shallow_clone(self) -> bool\n```\n\nCheck if the repository is a shallow clone\n\n#### `is_sparsely_checked_out` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_sparsely_checked_out(self) -> bool\n```\n\nCheck if existing repo is sparsely checked out\n\n#### `pull_code` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L328\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_code(self) -> None\n```\n\nPulls the contents of the configured repository to the local filesystem.\n\n#### `pull_interval` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L200\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_interval(self) -> Optional[int]\n```\n\n#### `set_base_path` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L196\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_base_path(self, path: Path) -> None\n```\n\n#### `to_pull_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L501\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_pull_step(self) -> dict[str, Any]\n```\n\n### `RemoteStorage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L539\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nPulls the contents of a remote storage location to the local filesystem.\n\n**Args:**\n\n* `url`: The URL of the remote storage location to pull from. Supports\n  `fsspec` URLs. Some protocols may require an additional `fsspec`\n  dependency to be installed. Refer to the\n  [`fsspec` docs](https://filesystem-spec.readthedocs.io/en/latest/api.html#other-known-implementations)\n  for more details.\n* `pull_interval`: The interval in seconds at which to pull contents from\n  remote storage to local storage. If None, remote storage will perform\n  a one-time sync.\n* `**settings`: Any additional settings to pass the `fsspec` filesystem class.\n\n**Examples:**\n\nPull the contents of a remote storage location to the local filesystem:\n\n```python  theme={null}\nfrom prefect.runner.storage import RemoteStorage\n\nstorage = RemoteStorage(url=\"s3://my-bucket/my-folder\")\n\nawait storage.pull_code()\n```\n\nPull the contents of a remote storage location to the local filesystem\nwith additional settings:\n\n```python  theme={null}\nfrom prefect.runner.storage import RemoteStorage\nfrom prefect.blocks.system import Secret\n\nstorage = RemoteStorage(\n    url=\"s3://my-bucket/my-folder\",\n    # Use Secret blocks to keep credentials out of your code\n    key=Secret.load(\"my-aws-access-key\"),\n    secret=Secret.load(\"my-aws-secret-key\"),\n)\n\nawait storage.pull_code()\n```\n\n**Methods:**\n\n#### `destination` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L645\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndestination(self) -> Path\n```\n\nThe local file path to pull contents from remote storage to.\n\n#### `pull_code` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L659\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_code(self) -> None\n```\n\nPulls contents from remote storage to the local filesystem.\n\n#### `pull_interval` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L637\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_interval(self) -> Optional[int]\n```\n\nThe interval at which contents from remote storage should be pulled to\nlocal storage. If None, remote storage will perform a one-time sync.\n\n#### `set_base_path` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L633\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_base_path(self, path: Path) -> None\n```\n\n#### `to_pull_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L689\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_pull_step(self) -> dict[str, Any]\n```\n\nReturns a dictionary representation of the storage object that can be\nused as a deployment pull step.\n\n### `BlockStorageAdapter` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L730\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA storage adapter for a storage block object to allow it to be used as a\nrunner storage object.\n\n**Methods:**\n\n#### `destination` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L761\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndestination(self) -> Path\n```\n\n#### `pull_code` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L764\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_code(self) -> None\n```\n\n#### `pull_interval` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L757\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_interval(self) -> Optional[int]\n```\n\n#### `set_base_path` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L753\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_base_path(self, path: Path) -> None\n```\n\n#### `to_pull_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L769\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_pull_step(self) -> dict[str, Any]\n```\n\n### `LocalStorage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L792\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nSets the working directory in the local filesystem.\nParameters:\nPath: Local file path to set the working directory for the flow\nExamples:\nSets the working directory for the local path to the flow:\n\n```python  theme={null}\nfrom prefect.runner.storage import Localstorage\nstorage = LocalStorage(\n    path=\"/path/to/local/flow_directory\",\n)\n```\n\n**Methods:**\n\n#### `destination` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L818\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndestination(self) -> Path\n```\n\n#### `pull_code` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L828\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_code(self) -> None\n```\n\n#### `pull_interval` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L825\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_interval(self) -> Optional[int]\n```\n\n#### `set_base_path` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L821\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_base_path(self, path: Path) -> None\n```\n\n#### `to_pull_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/runner/storage.py#L833\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_pull_step(self) -> dict[str, Any]\n```\n\nReturns a dictionary representation of the storage object that can be\nused as a deployment pull step.",
  "content_length": 13430
}