{
  "title": "run_input",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-input-run_input",
  "content": "# `prefect.input.run_input`\n\nThis module contains functions that allow sending type-checked `RunInput` data\nto flows at runtime. Flows can send back responses, establishing two-way\nchannels with senders. These functions are particularly useful for systems that\nrequire ongoing data transfer or need to react to input quickly.\nreal-time interaction and efficient data handling. It's designed to facilitate\ndynamic communication within distributed or microservices-oriented systems,\nmaking it ideal for scenarios requiring continuous data synchronization and\nprocessing. It's particularly useful for systems that require ongoing data\ninput and output.\n\nThe following is an example of two flows. One sends a random number to the\nother and waits for a response. The other receives the number, squares it, and\nsends the result back. The sender flow then prints the result.\n\nSender flow:\n\n```python  theme={null}\nimport random\nfrom uuid import UUID\nfrom prefect import flow\nfrom prefect.logging import get_run_logger\nfrom prefect.input import RunInput\n\nclass NumberData(RunInput):\n    number: int\n\n\n@flow\nasync def sender_flow(receiver_flow_run_id: UUID):\n    logger = get_run_logger()\n\n    the_number = random.randint(1, 100)\n\n    await NumberData(number=the_number).send_to(receiver_flow_run_id)\n\n    receiver = NumberData.receive(flow_run_id=receiver_flow_run_id)\n    squared = await receiver.next()\n\n    logger.info(f\"{the_number} squared is {squared.number}\")\n```\n\nReceiver flow:\n\n```python  theme={null}\nimport random\nfrom uuid import UUID\nfrom prefect import flow\nfrom prefect.logging import get_run_logger\nfrom prefect.input import RunInput\n\nclass NumberData(RunInput):\n    number: int\n\n\n@flow\nasync def receiver_flow():\n    async for data in NumberData.receive():\n        squared = data.number ** 2\n        data.respond(NumberData(number=squared))\n```\n\n## Functions\n\n### `keyset_from_paused_state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L113\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nkeyset_from_paused_state(state: 'State') -> Keyset\n```\n\nGet the keyset for the given Paused state.\n\n**Args:**\n\n* `- state`: the state to get the keyset for\n\n### `keyset_from_base_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L129\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nkeyset_from_base_key(base_key: str) -> Keyset\n```\n\nGet the keyset for the given base key.\n\n**Args:**\n\n* `- base_key`: the base key to get the keyset for\n\n**Returns:**\n\n* * Dict\\[str, str]: the keyset\n\n### `run_input_subclass_from_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L422\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_input_subclass_from_type(_type: Union[Type[R], Type[T], pydantic.BaseModel]) -> Union[Type[AutomaticRunInput[T]], Type[R]]\n```\n\nCreate a new `RunInput` subclass from the given type.\n\n### `send_input` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L646\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsend_input(run_input: Any, flow_run_id: UUID, sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n### `receive_input` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L686\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nreceive_input(input_type: Union[Type[R], Type[T], pydantic.BaseModel], timeout: Optional[float] = 3600, poll_interval: float = 10, raise_timeout_error: bool = False, exclude_keys: Optional[Set[str]] = None, key_prefix: Optional[str] = None, flow_run_id: Optional[UUID] = None, with_metadata: bool = False) -> Union[GetAutomaticInputHandler[T], GetInputHandler[R]]\n```\n\n## Classes\n\n### `RunInputMetadata` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L146\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n### `BaseRunInput` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L152\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `keyset_from_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L163\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nkeyset_from_type(cls) -> Keyset\n```\n\n#### `load` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L202\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None) -> Self\n```\n\nLoad the run input response from the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to load the input for\n* `- flow_run_id`: the flow run ID to load the input for\n\n#### `load_from_flow_run_input` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L222\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_from_flow_run_input(cls, flow_run_input: 'FlowRunInput') -> Self\n```\n\nLoad the run input from a FlowRunInput object.\n\n**Args:**\n\n* `- flow_run_input`: the flow run input to load the input for\n\n#### `metadata` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L159\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmetadata(self) -> RunInputMetadata\n```\n\n#### `respond` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L264\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrespond(self, run_input: 'RunInput', sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n#### `save` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L168\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsave(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None)\n```\n\nSave the run input response to the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to save the input for\n* `- flow_run_id`: the flow run ID to save the input for\n\n#### `send_to` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsend_to(self, flow_run_id: UUID, sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n#### `with_initial_data` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L238\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwith_initial_data(cls: Type[R], description: Optional[str] = None, **kwargs: Any) -> Type[R]\n```\n\nCreate a new `RunInput` subclass with the given initial data as field\ndefaults.\n\n**Args:**\n\n* `- description`: a description to show when resuming\n  a flow run that requires input\n* `- kwargs`: the initial data to populate the subclass\n\n### `RunInput` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L302\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `keyset_from_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L163\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nkeyset_from_type(cls) -> Keyset\n```\n\n#### `load` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L202\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None) -> Self\n```\n\nLoad the run input response from the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to load the input for\n* `- flow_run_id`: the flow run ID to load the input for\n\n#### `load_from_flow_run_input` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L222\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_from_flow_run_input(cls, flow_run_input: 'FlowRunInput') -> Self\n```\n\nLoad the run input from a FlowRunInput object.\n\n**Args:**\n\n* `- flow_run_input`: the flow run input to load the input for\n\n#### `metadata` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L159\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmetadata(self) -> RunInputMetadata\n```\n\n#### `receive` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L304\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nreceive(cls, timeout: Optional[float] = 3600, poll_interval: float = 10, raise_timeout_error: bool = False, exclude_keys: Optional[Set[str]] = None, key_prefix: Optional[str] = None, flow_run_id: Optional[UUID] = None) -> GetInputHandler[Self]\n```\n\n#### `respond` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L264\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrespond(self, run_input: 'RunInput', sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n#### `save` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L168\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsave(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None)\n```\n\nSave the run input response to the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to save the input for\n* `- flow_run_id`: the flow run ID to save the input for\n\n#### `send_to` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsend_to(self, flow_run_id: UUID, sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n#### `subclass_from_base_model_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L327\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsubclass_from_base_model_type(cls, model_cls: Type[pydantic.BaseModel]) -> Type['RunInput']\n```\n\nCreate a new `RunInput` subclass from the given `pydantic.BaseModel`\nsubclass.\n\n**Args:**\n\n* `- model_cls`: the class from which\n  to create the new `RunInput` subclass\n\n#### `with_initial_data` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L238\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwith_initial_data(cls: Type[R], description: Optional[str] = None, **kwargs: Any) -> Type[R]\n```\n\nCreate a new `RunInput` subclass with the given initial data as field\ndefaults.\n\n**Args:**\n\n* `- description`: a description to show when resuming\n  a flow run that requires input\n* `- kwargs`: the initial data to populate the subclass\n\n### `AutomaticRunInput` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L341\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `keyset_from_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L163\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nkeyset_from_type(cls) -> Keyset\n```\n\n#### `load` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L346\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None) -> Self\n```\n\nLoad the run input response from the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to load the input for\n* `- flow_run_id`: the flow run ID to load the input for\n\n#### `load` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L202\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None) -> Self\n```\n\nLoad the run input response from the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to load the input for\n* `- flow_run_id`: the flow run ID to load the input for\n\n#### `load_from_flow_run_input` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L222\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_from_flow_run_input(cls, flow_run_input: 'FlowRunInput') -> Self\n```\n\nLoad the run input from a FlowRunInput object.\n\n**Args:**\n\n* `- flow_run_input`: the flow run input to load the input for\n\n#### `metadata` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L159\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmetadata(self) -> RunInputMetadata\n```\n\n#### `receive` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L398\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nreceive(cls, timeout: Optional[float] = 3600, poll_interval: float = 10, raise_timeout_error: bool = False, exclude_keys: Optional[Set[str]] = None, key_prefix: Optional[str] = None, flow_run_id: Optional[UUID] = None, with_metadata: bool = False) -> GetAutomaticInputHandler[T]\n```\n\n#### `respond` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L264\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrespond(self, run_input: 'RunInput', sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n#### `save` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L168\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsave(cls, keyset: Keyset, flow_run_id: Optional[UUID] = None)\n```\n\nSave the run input response to the given key.\n\n**Args:**\n\n* `- keyset`: the keyset to save the input for\n* `- flow_run_id`: the flow run ID to save the input for\n\n#### `send_to` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsend_to(self, flow_run_id: UUID, sender: Optional[str] = None, key_prefix: Optional[str] = None)\n```\n\n#### `subclass_from_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L361\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsubclass_from_type(cls, _type: Type[T]) -> Type['AutomaticRunInput[T]']\n```\n\nCreate a new `AutomaticRunInput` subclass from the given type.\n\nThis method uses the type's name as a key prefix to identify related\nflow run inputs. This helps in ensuring that values saved under a type\n(like List\\[int]) are retrievable under the generic type name (like \"list\").\n\n#### `with_initial_data` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L238\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwith_initial_data(cls: Type[R], description: Optional[str] = None, **kwargs: Any) -> Type[R]\n```\n\nCreate a new `RunInput` subclass with the given initial data as field\ndefaults.\n\n**Args:**\n\n* `- description`: a description to show when resuming\n  a flow run that requires input\n* `- kwargs`: the initial data to populate the subclass\n\n### `GetInputHandler` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L443\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `filter_for_inputs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L490\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfilter_for_inputs(self) -> list['FlowRunInput']\n```\n\n#### `next` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L511\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nnext(self) -> R\n```\n\n#### `to_instance` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L507\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_instance(self, flow_run_input: 'FlowRunInput') -> R\n```\n\n### `GetAutomaticInputHandler` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L524\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `filter_for_inputs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L576\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfilter_for_inputs(self) -> list['FlowRunInput']\n```\n\n#### `next` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L594\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nnext(self) -> Union[T, AutomaticRunInput[T]]\n```\n\n#### `to_instance` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/input/run_input.py#L606\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_instance(self, flow_run_input: 'FlowRunInput') -> Union[T, AutomaticRunInput[T]]\n```",
  "content_length": 18880
}