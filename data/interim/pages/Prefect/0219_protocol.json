{
  "title": "protocol",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-locking-protocol",
  "content": "# `prefect.locking.protocol`\n\n## Classes\n\n### `LockManager` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L5\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `aacquire_lock` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L33\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\naacquire_lock(self, key: str, holder: str, acquire_timeout: Optional[float] = None, hold_timeout: Optional[float] = None) -> bool\n```\n\nAcquire a lock for a transaction record with the given key. Will block other\nactors from updating this transaction record until the lock is\nreleased.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n* `holder`: Unique identifier for the holder of the lock.\n* `acquire_timeout`: Max number of seconds to wait for the record to become\n  available if it is locked while attempting to acquire a lock. Pass 0\n  to attempt to acquire a lock without waiting. Blocks indefinitely by\n  default.\n* `hold_timeout`: Max number of seconds to hold the lock for. Holds the lock\n  indefinitely by default.\n\n**Returns:**\n\n* True if the lock was successfully acquired; False otherwise.\n\n#### `acquire_lock` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L6\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nacquire_lock(self, key: str, holder: str, acquire_timeout: Optional[float] = None, hold_timeout: Optional[float] = None) -> bool\n```\n\nAcquire a lock for a transaction record with the given key. Will block other\nactors from updating this transaction record until the lock is\nreleased.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n* `holder`: Unique identifier for the holder of the lock.\n* `acquire_timeout`: Max number of seconds to wait for the record to become\n  available if it is locked while attempting to acquire a lock. Pass 0\n  to attempt to acquire a lock without waiting. Blocks indefinitely by\n  default.\n* `hold_timeout`: Max number of seconds to hold the lock for. Holds the lock\n  indefinitely by default.\n\n**Returns:**\n\n* True if the lock was successfully acquired; False otherwise.\n\n#### `await_for_lock` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L110\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nawait_for_lock(self, key: str, timeout: Optional[float] = None) -> bool\n```\n\nWait for the corresponding transaction record to become free.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n* `timeout`: Maximum time to wait. None means to wait indefinitely.\n\n**Returns:**\n\n* True if the lock becomes free within the timeout; False\n  otherwise.\n\n#### `is_lock_holder` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L83\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_lock_holder(self, key: str, holder: str) -> bool\n```\n\nCheck if the current holder is the lock holder for the transaction record.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n* `holder`: Unique identifier for the holder of the lock.\n\n**Returns:**\n\n* True if the current holder is the lock holder; False otherwise.\n\n#### `is_locked` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L71\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_locked(self, key: str) -> bool\n```\n\nSimple check to see if the corresponding record is currently locked.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n\n**Returns:**\n\n* True is the record is locked; False otherwise.\n\n#### `release_lock` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrelease_lock(self, key: str, holder: str) -> None\n```\n\nReleases the lock on the corresponding transaction record.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n* `holder`: Unique identifier for the holder of the lock. Must match the\n  holder provided when acquiring the lock.\n\n#### `wait_for_lock` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/locking/protocol.py#L96\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait_for_lock(self, key: str, timeout: Optional[float] = None) -> bool\n```\n\nWait for the corresponding transaction record to become free.\n\n**Args:**\n\n* `key`: Unique identifier for the transaction record.\n* `timeout`: Maximum time to wait. None means to wait indefinitely.\n\n**Returns:**\n\n* True if the lock becomes free within the timeout; False\n  otherwise.",
  "content_length": 5087
}