{
  "title": "futures",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-futures",
  "content": "# `prefect.futures`\n\n## Functions\n\n### `as_completed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L506\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nas_completed(futures: list[PrefectFuture[R]], timeout: float | None = None) -> Generator[PrefectFuture[R], None]\n```\n\n### `wait` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L557\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait(futures: list[PrefectFuture[R]], timeout: float | None = None) -> DoneAndNotDoneFutures[R]\n```\n\nWait for the futures in the given sequence to complete.\n\n**Args:**\n\n* `futures`: The sequence of Futures to wait upon.\n* `timeout`: The maximum number of seconds to wait. If None, then there\n  is no limit on the wait time.\n\n**Returns:**\n\n* A named 2-tuple of sets. The first set, named 'done', contains the\n* futures that completed (is finished or cancelled) before the wait\n* completed. The second set, named 'not\\_done', contains uncompleted\n* futures. Duplicate futures given to *futures* are removed and will be\n* returned only once.\n\n**Examples:**\n\n```python  theme={null}\n@task\ndef sleep_task(seconds):\n    sleep(seconds)\n    return 42\n\n@flow\ndef flow():\n    futures = random_task.map(range(10))\n    done, not_done = wait(futures, timeout=5)\n    print(f\"Done: {len(done)}\")\n    print(f\"Not Done: {len(not_done)}\")\n```\n\n### `resolve_futures_to_states` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L641\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresolve_futures_to_states(expr: PrefectFuture[R] | Any) -> PrefectFuture[R] | Any\n```\n\nGiven a Python built-in collection, recursively find `PrefectFutures` and build a\nnew collection with the same structure with futures resolved to their final states.\nResolving futures to their final states may wait for execution to complete.\n\nUnsupported object types will be returned without modification.\n\n### `resolve_futures_to_results` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L662\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresolve_futures_to_results(expr: PrefectFuture[R] | Any) -> Any\n```\n\nGiven a Python built-in collection, recursively find `PrefectFutures` and build a\nnew collection with the same structure with futures resolved to their final results.\nResolving futures to their final result may wait for execution to complete.\n\nUnsupported object types will be returned without modification.\n\n## Classes\n\n### `PrefectFuture` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L34\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nAbstract base class for Prefect futures. A Prefect future is a handle to the\nasynchronous execution of a run. It provides methods to wait for the\nto complete and to retrieve the result of the run.\n\n**Methods:**\n\n#### `add_done_callback` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L119\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nadd_done_callback(self, fn: Callable[['PrefectFuture[R]'], None]) -> None\n```\n\nAdd a callback to be run when the future completes or is cancelled.\n\n**Args:**\n\n* `fn`: A callable that will be called with this future as its only argument when the future completes or is cancelled.\n\n#### `result` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L98\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresult(self, timeout: float | None = None, raise_on_failure: bool = True) -> R\n```\n\n#### `state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L64\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstate(self) -> State\n```\n\nThe current state of the task run associated with this future\n\n#### `task_run_id` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L52\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntask_run_id(self) -> uuid.UUID\n```\n\nThe ID of the task run associated with this future\n\n#### `wait` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L85\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait(self, timeout: float | None = None) -> None\n```\n\n### `PrefectTaskRunFuture` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L129\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prefect future that represents the eventual execution of a task run.\n\n**Methods:**\n\n#### `state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L144\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstate(self) -> State\n```\n\nThe current state of the task run associated with this future\n\n#### `task_run_id` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L139\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntask_run_id(self) -> uuid.UUID\n```\n\nThe ID of the task run associated with this future\n\n### `PrefectWrappedFuture` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L158\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prefect future that wraps another future object.\n\n**Methods:**\n\n#### `add_done_callback` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L176\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nadd_done_callback(self, fn: Callable[[PrefectFuture[R]], None]) -> None\n```\n\nAdd a callback to be executed when the future completes.\n\n#### `wrapped_future` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L172\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwrapped_future(self) -> F\n```\n\nThe underlying future object wrapped by this Prefect future\n\n### `PrefectConcurrentFuture` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L189\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prefect future that wraps a concurrent.futures.Future. This future is used\nwhen the task run is submitted to a ThreadPoolExecutor.\n\n**Methods:**\n\n#### `result` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L203\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresult(self, timeout: float | None = None, raise_on_failure: bool = True) -> R\n```\n\n#### `wait` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L195\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait(self, timeout: float | None = None) -> None\n```\n\n### `PrefectDistributedFuture` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L228\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRepresents the result of a computation happening anywhere.\n\nThis class is typically used to interact with the result of a task run\nscheduled to run in a Prefect task worker but can be used to interact with\nany task run scheduled in Prefect's API.\n\n**Methods:**\n\n#### `add_done_callback` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L318\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nadd_done_callback(self, fn: Callable[[PrefectFuture[R]], None]) -> None\n```\n\n#### `result` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresult(self, timeout: float | None = None, raise_on_failure: bool = True) -> R\n```\n\n#### `result_async` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L297\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresult_async(self, timeout: float | None = None, raise_on_failure: bool = True) -> R\n```\n\n#### `wait` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L240\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait(self, timeout: float | None = None) -> None\n```\n\n#### `wait_async` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L243\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait_async(self, timeout: float | None = None) -> None\n```\n\n### `PrefectFlowRunFuture` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L340\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prefect future that represents the eventual execution of a flow run.\n\n**Methods:**\n\n#### `add_done_callback` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L433\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nadd_done_callback(self, fn: Callable[[PrefectFuture[R]], None]) -> None\n```\n\n#### `aresult` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L419\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\naresult(self, timeout: float | None = None, raise_on_failure: bool = True) -> R\n```\n\n#### `flow_run_id` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L350\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nflow_run_id(self) -> uuid.UUID\n```\n\nThe ID of the flow run associated with this future\n\n#### `result` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L410\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresult(self, timeout: float | None = None, raise_on_failure: bool = True) -> R\n```\n\n#### `state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L355\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstate(self) -> State\n```\n\nThe current state of the flow run associated with this future\n\n#### `wait` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L370\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait(self, timeout: float | None = None) -> None\n```\n\n#### `wait_async` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L373\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait_async(self, timeout: float | None = None) -> None\n```\n\n### `PrefectFutureList` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L455\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA list of Prefect futures.\n\nThis class provides methods to wait for all futures\nin the list to complete and to retrieve the results of all task runs.\n\n**Methods:**\n\n#### `result` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L473\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nresult(self: Self, timeout: float | None = None, raise_on_failure: bool = True) -> list[R]\n```\n\nGet the results of all task runs associated with the futures in the list.\n\n**Args:**\n\n* `timeout`: The maximum number of seconds to wait for all futures to\n  complete.\n* `raise_on_failure`: If `True`, an exception will be raised if any task run fails.\n\n**Returns:**\n\n* A list of results of the task runs.\n\n**Raises:**\n\n* `TimeoutError`: If the timeout is reached before all futures complete.\n\n#### `wait` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L463\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait(self, timeout: float | None = None) -> None\n```\n\nWait for all futures in the list to complete.\n\n**Args:**\n\n* `timeout`: The maximum number of seconds to wait for all futures to\n  complete. This method will not raise if the timeout is reached.\n\n### `DoneAndNotDoneFutures` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/futures.py#L547\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA named 2-tuple of sets.\n\nmultiple inheritance supported in 3.11+, use typing\\_extensions.NamedTuple",
  "content_length": 13660
}