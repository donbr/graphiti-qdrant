{
  "title": "utilities",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-testing-utilities",
  "content": "# `prefect.testing.utilities`\n\nInternal utilities for tests.\n\n## Functions\n\n### `exceptions_equal` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L41\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nexceptions_equal(a: Exception, b: Exception) -> bool\n```\n\nExceptions cannot be compared by `==`. They can be compared using `is` but this\nwill fail if the exception is serialized/deserialized so this utility does its\nbest to assert equality using the type and args used to initialize the exception\n\n### `kubernetes_environments_equal` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L52\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nkubernetes_environments_equal(actual: list[dict[str, str]], expected: list[dict[str, str]] | dict[str, str]) -> bool\n```\n\n### `assert_does_not_warn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L89\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nassert_does_not_warn(ignore_warnings: list[type[Warning]] | None = None) -> Generator[None, None, None]\n```\n\nConverts warnings to errors within this context to assert warnings are not raised,\nexcept for those specified in ignore\\_warnings.\n\nParameters:\n\n* ignore\\_warnings: List of warning types to ignore. Example: \\[DeprecationWarning, UserWarning]\n\n### `prefect_test_harness` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L112\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nprefect_test_harness(server_startup_timeout: int | None = 30)\n```\n\nTemporarily run flows against a local SQLite database for testing.\n\n**Args:**\n\n* `server_startup_timeout`: The maximum time to wait for the server to start.\n  Defaults to 30 seconds. If set to `None`, the value of\n  `PREFECT_SERVER_EPHEMERAL_STARTUP_TIMEOUT_SECONDS` will be used.\n\n**Examples:**\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect.testing.utilities import prefect_test_harness\n\n\n@flow\ndef my_flow():\n    return 'Done!'\n\nwith prefect_test_harness():\n    assert my_flow() == 'Done!' # run against temporary db\n```\n\n### `get_most_recent_flow_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L181\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_most_recent_flow_run(client: 'PrefectClient | None' = None, flow_name: str | None = None) -> 'FlowRun'\n```\n\n### `assert_blocks_equal` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L198\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nassert_blocks_equal(found: Block, expected: Block, exclude_private: bool = True, **kwargs: Any) -> None\n```\n\n### `assert_uses_result_serializer` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L215\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nassert_uses_result_serializer(state: State, serializer: str | Serializer, client: 'PrefectClient') -> None\n```\n\n### `assert_uses_result_storage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L251\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nassert_uses_result_storage(state: State, storage: 'str | ReadableFileSystem', client: 'PrefectClient') -> None\n```\n\n### `a_test_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L279\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\na_test_step(**kwargs: Any) -> dict[str, Any]\n```\n\n### `b_test_step` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/testing/utilities.py#L290\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nb_test_step(**kwargs: Any) -> dict[str, Any]\n```",
  "content_length": 4366
}