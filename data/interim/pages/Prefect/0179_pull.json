{
  "title": "pull",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-deployments-steps-pull",
  "content": "# `prefect.deployments.steps.pull`\n\nCore set of steps for specifying a Prefect project pull step.\n\n## Functions\n\n### `set_working_directory` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/steps/pull.py#L24\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_working_directory(directory: str) -> dict[str, str]\n```\n\nSets the working directory; works with both absolute and relative paths.\n\n**Args:**\n\n* `directory`: the directory to set as the working directory\n\n**Returns:**\n\n* a dictionary containing a `directory` key of the\n  absolute path of the directory that was set\n\n### `agit_clone` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/steps/pull.py#L50\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nagit_clone(repository: str, branch: Optional[str] = None, commit_sha: Optional[str] = None, include_submodules: bool = False, access_token: Optional[str] = None, credentials: Optional['Block'] = None, directories: Optional[list[str]] = None) -> dict[str, str]\n```\n\nAsynchronously clones a git repository into the current working directory.\n\n**Args:**\n\n* `repository`: the URL of the repository to clone\n* `branch`: the branch to clone; if not provided, the default branch will be used\n* `commit_sha`: the commit SHA to clone; if not provided, the default branch will be used\n* `include_submodules`: whether to include git submodules when cloning the repository\n* `access_token`: an access token to use for cloning the repository; if not provided\n  the repository will be cloned using the default git credentials\n* `credentials`: a GitHubCredentials, GitLabCredentials, or BitBucketCredentials block can be used to specify the\n  credentials to use for cloning the repository.\n\n**Returns:**\n\n* a dictionary containing a `directory` key of the new directory that was created\n\n**Raises:**\n\n* `subprocess.CalledProcessError`: if the git clone command fails for any reason\n\n### `git_clone` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/steps/pull.py#L100\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ngit_clone(repository: str, branch: Optional[str] = None, commit_sha: Optional[str] = None, include_submodules: bool = False, access_token: Optional[str] = None, credentials: Optional['Block'] = None, directories: Optional[list[str]] = None) -> dict[str, str]\n```\n\nClones a git repository into the current working directory.\n\n**Args:**\n\n* `repository`: the URL of the repository to clone\n* `branch`: the branch to clone; if not provided, the default branch will be used\n* `commit_sha`: the commit SHA to clone; if not provided, the default branch will be used\n* `include_submodules`: whether to include git submodules when cloning the repository\n* `access_token`: an access token to use for cloning the repository; if not provided\n  the repository will be cloned using the default git credentials\n* `credentials`: a GitHubCredentials, GitLabCredentials, or BitBucketCredentials block can be used to specify the\n  credentials to use for cloning the repository.\n* `directories`: Specify directories you want to be included (uses git sparse-checkout)\n\n**Returns:**\n\n* a dictionary containing a `directory` key of the new directory that was created\n\n**Raises:**\n\n* `subprocess.CalledProcessError`: if the git clone command fails for any reason\n\n**Examples:**\n\nClone a public repository:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/PrefectHQ/prefect.git\n```\n\nClone a branch of a public repository:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/PrefectHQ/prefect.git\n        branch: my-branch\n```\n\nClone a private repository using a GitHubCredentials block:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/org/repo.git\n        credentials: \"{{ prefect.blocks.github-credentials.my-github-credentials-block }}\"\n```\n\nClone a private repository using an access token:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/org/repo.git\n        access_token: \"{{ prefect.blocks.secret.github-access-token }}\" # Requires creation of a Secret block\n```\n\nNote that you will need to [create a Secret block](https://docs.prefect.io/v3/concepts/blocks/#pre-registered-blocks) to store the\nvalue of your git credentials. You can also store a username/password combo or token prefix (e.g. `x-token-auth`)\nin your secret block. Refer to your git providers documentation for the correct authentication schema.\n\nClone a repository with submodules:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/org/repo.git\n        include_submodules: true\n```\n\nClone a repository with an SSH key (note that the SSH key must be added to the worker\nbefore executing flows):\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: git@github.com:org/repo.git\n```\n\nClone a repository using sparse-checkout (allows specific folders of the repository to be checked out)\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.git_clone:\n        repository: https://github.com/org/repo.git\n        directories: [\"dir_1\", \"dir_2\", \"prefect\"]\n```\n\n### `pull_from_remote_storage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/steps/pull.py#L209\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_from_remote_storage(url: str, **settings: Any) -> dict[str, Any]\n```\n\nPulls code from a remote storage location into the current working directory.\n\nWorks with protocols supported by `fsspec`.\n\n**Args:**\n\n* `url`: the URL of the remote storage location. Should be a valid `fsspec` URL.\n  Some protocols may require an additional `fsspec` dependency to be installed.\n  Refer to the [`fsspec` docs](https://filesystem-spec.readthedocs.io/en/latest/api.html#other-known-implementations)\n  for more details.\n* `**settings`: any additional settings to pass the `fsspec` filesystem class.\n\n**Returns:**\n\n* a dictionary containing a `directory` key of the new directory that was created\n\n**Examples:**\n\nPull code from a remote storage location:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.pull_from_remote_storage:\n        url: s3://my-bucket/my-folder\n```\n\nPull code from a remote storage location with additional settings:\n\n```yaml  theme={null}\npull:\n    - prefect.deployments.steps.pull_from_remote_storage:\n        url: s3://my-bucket/my-folder\n        key: {{ prefect.blocks.secret.my-aws-access-key }}}\n        secret: {{ prefect.blocks.secret.my-aws-secret-key }}}\n```\n\n### `pull_with_block` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/steps/pull.py#L251\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npull_with_block(block_document_name: str, block_type_slug: str) -> dict[str, Any]\n```\n\nPulls code using a block.\n\n**Args:**\n\n* `block_document_name`: The name of the block document to use\n* `block_type_slug`: The slug of the type of block to use",
  "content_length": 7479
}