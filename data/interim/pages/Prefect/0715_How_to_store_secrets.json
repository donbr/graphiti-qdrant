{
  "title": "How to store secrets",
  "source_url": "https://docs-3.prefect.io/v3/how-to-guides/configuration/store-secrets",
  "content": "### Store secret strings\n\nYou can use the `Secret` block to store secret strings.\n\n```python  theme={null}\nfrom prefect.blocks.system import Secret\n\nsecret = Secret(value=\"Marvin's surprise birthday party is on the 15th\")\nsecret.save(\"surprise-party\")\n```\n\nYou can access the secret value in your workflow by loading a `Secret` block with the same name.\n\n```python  theme={null}\nfrom prefect import flow    \nfrom prefect.blocks.system import Secret\n\n@flow\ndef my_flow():\n    secret = Secret.load(\"surprise-party\")\n    print(secret.get())\n```\n\nSecret values are encrypted at rest when stored in your Prefect backend.\n\nTo update a secret, save the new value with the `overwrite` parameter set to `True`.\n\n```python  theme={null}\nfrom prefect.blocks.system import Secret\n\nsecret = Secret(value=\"Marvin's surprise birthday party is actually on the 16th\")\nsecret.save(\"surprise-party\", overwrite=True)\n```\n\nSecret blocks can also be created and updated through the Prefect UI.\n\n### Store common configuration securely\n\nPrefect offers a set of blocks for storing common configuration.\n\nMany of these blocks are included as part of Prefect's integration libraries.\n\nFor example, use the `AwsCredentials` block to store AWS keys to connect to AWS services in your workflows.\n\n<Tip>\n  You can install `prefect-aws` by running `pip install prefect-aws`.\n</Tip>\n\n```python  theme={null}\nfrom prefect_aws import AwsCredentials\n\naws_credentials = AwsCredentials(\n    aws_access_key_id=\"my-access-key-id\",\n    aws_secret_access_key=\"nice-try-you-are-not-getting-my-key-friend\")\n\naws_credentials.save(\"aws-credentials\")\n```\n\nYou can load the block to use the credentials in your workflow.\n\n```python  theme={null}\nfrom prefect_aws import AwsCredentials\nimport boto3\n\n# Load AWS credentials from Prefect\ncreds = AwsCredentials.load(\"aws-credentials\")\n\n# Create boto3 session using the credentials\nsession = boto3.Session(\n    aws_access_key_id=creds.aws_access_key_id,\n    aws_secret_access_key=creds.aws_secret_access_key\n)\n\n# Create S3 client\ns3_client = session.client('s3')\n\n# List all buckets\nresponse = s3_client.list_buckets()\nfor bucket in response['Buckets']:\n    print(f\"Bucket name: {bucket['Name']}\")\n```",
  "content_length": 2200
}