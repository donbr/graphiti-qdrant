{
  "title": "How to manage work pools",
  "source_url": "https://docs-3.prefect.io/v3/how-to-guides/deployment_infra/manage-work-pools",
  "content": "Configure Prefect work pools using the CLI, Terraform, or REST API\n\nexport const API = ({name, href}) => <p>You can manage {name} with the <a href={href}>Prefect API</a>.</p>;\n\nexport const TF = ({name, href}) => <p>You can manage {name} with the <a href={href}>Terraform provider for Prefect</a>.</p>;\n\nexport const work_pools = {\n  cli: \"https://docs.prefect.io/v3/api-ref/cli/work-pool\",\n  api: \"https://app.prefect.cloud/api/docs#tag/Work-Pools\",\n  tf: \"https://registry.terraform.io/providers/PrefectHQ/prefect/latest/docs/resources/work_pool\"\n};\n\nexport const CLI = ({name, href}) => <p>You can manage {name} with the <a href={href}>Prefect CLI</a>.</p>;\n\nYou can configure work pools by using the Prefect UI.\n\nTo manage work pools in the UI, click the **Work Pools** icon. This displays a list of currently configured work pools.\n\n<img src=\"https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=16ad4508be0804e4a593a3091ce3182f\" alt=\"The UI displays a list of configured work pools\" data-og-width=\"2540\" width=\"2540\" data-og-height=\"1410\" height=\"1410\" data-path=\"v3/img/ui/work-pool-list.png\" data-optimize=\"true\" data-opv=\"3\" srcset=\"https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?w=280&fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=a4d31b24491f63d340add8f004fd6879 280w, https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?w=560&fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=af91a2bb291950047fab3e13d37ea934 560w, https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?w=840&fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=1eae26672cbbb9d91147b5bb5124fbcd 840w, https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?w=1100&fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=b1e4bbcdabf67810064dc2de55febd6b 1100w, https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?w=1650&fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=2c6c3b625e5e86ce76329b0b5aab601d 1650w, https://mintcdn.com/prefect-bd373955/rT_XiX8cZI7Bzt5c/v3/img/ui/work-pool-list.png?w=2500&fit=max&auto=format&n=rT_XiX8cZI7Bzt5c&q=85&s=9d2753ab0c8cd0dea186414706b608f4 2500w\" />\n\nSelect the **+** button to create a new work pool. You can specify the details about infrastructure created for this work pool.\n\n## Using the CLI\n\n<CLI name=\"work pools\" href={work_pools.cli} />\n\n```bash  theme={null}\nprefect work-pool create [OPTIONS] NAME\n```\n\n`NAME` is a required, unique name for the work pool.\n\nOptional configuration parameters to filter work on the pool include:\n\n<Tip>\n  **Managing work pools in CI/CD**\n\n  Version control your base job template by committing it as a JSON file to a git repository and control updates to your\n  work pools' base job templates with the `prefect work-pool update` command in your CI/CD pipeline.\n\n  For example, use the following command to update a work pool's base job template to the contents of a file named `base-job-template.json`:\n\n  ```bash  theme={null}\n  prefect work-pool update --base-job-template base-job-template.json my-work-pool\n  ```\n</Tip>\n\n### List available work pools\n\n```bash  theme={null}\nprefect work-pool ls\n```\n\n### Inspect a work pool\n\n```bash  theme={null}\nprefect work-pool inspect 'test-pool'\n```\n\n### Preview scheduled work\n\n```bash  theme={null}\nprefect work-pool preview 'test-pool' --hours 12\n```\n\n### Pause a work pool\n\n```bash  theme={null}\nprefect work-pool pause 'test-pool'\n```\n\n### Resume a work pool\n\n```bash  theme={null}\nprefect work-pool resume 'test-pool'\n```\n\n### Delete a work pool\n\n```bash  theme={null}\nprefect work-pool delete 'test-pool'\n```\n\n<Note>\n  **Pausing a work pool does not pause deployment schedules**\n</Note>\n\n### Manage concurrency for a work pool\n\nSet concurrency:\n\n```bash  theme={null}\nprefect work-pool set-concurrency-limit [LIMIT] [POOL_NAME]\n```\n\nClear concurrency:\n\n```bash  theme={null}\nprefect work-pool clear-concurrency-limit [POOL_NAME]\n```\n\n### Base job template\n\nView default base job template:\n\n```bash  theme={null}\nprefect work-pool get-default-base-job-template --type process\n```\n\nExample `prefect.yaml`:\n\n```yaml  theme={null}\ndeployments:\n- name: demo-deployment\n  entrypoint: demo_project/demo_flow.py:some_work\n  work_pool:\n    name: above-ground  \n    job_variables:\n        stream_output: false\n```\n\n<Tip>\n  **Advanced customization of the base job template**\n\n  For advanced use cases, create work pools with fully customizable job templates. This customization is available when\n  creating or editing a work pool on the 'Advanced' tab within the UI or when updating a work pool via the Prefect CLI.\n\n  Advanced customization is useful anytime the underlying infrastructure supports a high degree of customization.\n  In these scenarios a work pool job template allows you to expose a minimal and easy-to-digest set of options to deployment authors.\n  Additionally, these options are the *only* customizable aspects for deployment infrastructure, which are useful for restricting\n  capabilities in secure environments. For example, the `kubernetes` worker type allows users to specify a custom job template\\\n  to configure the manifest that workers use to create jobs for flow execution.\n\n  See more information about [overriding a work pool's job variables](/v3/deploy/infrastructure-concepts/customize).\n</Tip>\n\n## Using Terraform\n\n<TF name=\"work pools\" href={work_pools.tf} />\n\n## Using the REST API\n\n<API name=\"work pools\" href={work_pools.api} />\n\n## Further reading\n\n* [Work pools](/v3/concepts/work-pools) concept page\n* [Customize job variables](/v3/deploy/infrastructure-concepts/customize) page",
  "content_length": 5722
}