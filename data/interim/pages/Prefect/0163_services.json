{
  "title": "services",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-concurrency-services",
  "content": "# `prefect.concurrency.services`\n\n## Classes\n\n### `ConcurrencySlotAcquisitionService` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/concurrency/services.py#L34\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `acquire` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/concurrency/services.py#L48\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nacquire(self, slots: int, mode: Literal['concurrency', 'rate_limit'], timeout_seconds: Optional[float] = None, max_retries: Optional[int] = None) -> httpx.Response\n```\n\n### `ConcurrencySlotAcquisitionWithLeaseService` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/concurrency/services.py#L78\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA service that acquires concurrency slots with leases.\n\nThis service serializes acquisition attempts for a given set of limit names,\npreventing thundering herd issues when many tasks try to acquire slots simultaneously.\nEach unique set of limit names gets its own singleton service instance.\n\n**Args:**\n\n* `concurrency_limit_names`: A frozenset of concurrency limit names to acquire slots from.\n\n**Methods:**\n\n#### `acquire` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/concurrency/services.py#L102\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nacquire(self, slots: int, mode: Literal['concurrency', 'rate_limit'], timeout_seconds: Optional[float] = None, max_retries: Optional[int] = None, lease_duration: float = 300, strict: bool = False, holder: Optional['ConcurrencyLeaseHolder'] = None) -> httpx.Response\n```\n\nAcquire concurrency slots with a lease, with retry logic for 423 responses.\n\n**Args:**\n\n* `slots`: Number of slots to acquire\n* `mode`: Either \"concurrency\" or \"rate\\_limit\"\n* `timeout_seconds`: Optional timeout for the entire acquisition attempt\n* `max_retries`: Maximum number of retries on 423 LOCKED responses\n* `lease_duration`: Duration of the lease in seconds\n* `strict`: Whether to raise errors for missing limits\n* `holder`: Optional holder information for the lease\n\n**Returns:**\n\n* HTTP response from the server\n\n**Raises:**\n\n* `httpx.HTTPStatusError`: If the server returns an error other than 423 LOCKED\n* `TimeoutError`: If acquisition times out",
  "content_length": 2485
}