{
  "title": "How to create deployments",
  "source_url": "https://docs-3.prefect.io/v3/how-to-guides/deployments/create-deployments",
  "content": "Learn how to create deployments via the CLI, Python, or Terraform.\n\nexport const API = ({name, href}) => <p>You can manage {name} with the <a href={href}>Prefect API</a>.</p>;\n\nexport const deployments = {\n  cli: \"https://docs.prefect.io/v3/api-ref/cli/deployment\",\n  api: \"https://app.prefect.cloud/api/docs#tag/Deployments\",\n  tf: \"https://registry.terraform.io/providers/PrefectHQ/prefect/latest/docs/resources/deployment\"\n};\n\nexport const TF = ({name, href}) => <p>You can manage {name} with the <a href={href}>Terraform provider for Prefect</a>.</p>;\n\nThere are several ways to create deployments, each catering to different organizational needs.\n\n## Create deployments with static infrastructure\n\n### Create a deployment with `serve`\n\nThis is the simplest way to get started with deployments:\n\n```python  theme={null}\nfrom prefect import flow\n\n\n@flow\ndef my_flow():\n    print(\"Hello, Prefect!\")\n\n\nif __name__ == \"__main__\":\n    my_flow.serve(name=\"my-first-deployment\", cron=\"* * * * *\")\n```\n\nThe `serve` method creates a deployment from your flow and immediately begins listening for scheduled runs to execute.\nProviding `cron=\"* * * * *\"` to `.serve` associates a schedule with your flow so it will run every minute of every day.\n\n## Create deployments with dynamic infrastructure\n\nFor more configuration, you can create a deployment that uses a work pool.\nReasons to create a work-pool based deployment include:\n\n* Wanting to run your flow on dynamically provisioned infrastructure\n* Needing more control over the execution environment on a per-flow run basis\n* Creating an infrastructure template to use across deployments\n\nWork pools are popular with data platform teams because they allow you to manage infrastructure configuration across an organization.\n\nPrefect offers two options for creating deployments with [dynamic infrastructure](/v3/deploy/infrastructure-concepts/work-pools):\n\n* [Deployments created with the Python SDK](/v3/deploy/infrastructure-concepts/deploy-via-python)\n* [Deployments created with a YAML file](/v3/deploy/infrastructure-concepts/prefect-yaml)\n\n### Create a deployment with `deploy`\n\nTo define a deployment with a Python script, use the `flow.deploy` method.\n\nHere's an example of a deployment that uses a work pool and bakes the code into a Docker image.\n\n```python  theme={null}\nfrom prefect import flow\n\n\n@flow\ndef my_flow():\n    print(\"Hello, Prefect!\")\n\nif __name__ == \"__main__\":\n    my_flow.deploy(\n        name=\"my-second-deployment\",\n        work_pool_name=\"my-work-pool\",\n        image=\"my-image\",\n        push=False,\n        cron=\"* * * * *\",\n    )\n```\n\nTo learn more about the `deploy` method, see [Deploy flows with Python](/v3/deploy/infrastructure-concepts/deploy-via-python).\n\n### Create a deployment with a YAML file\n\nIf you'd rather take a declarative approach to defining a deployment through a YAML file, use a [`prefect.yaml` file](/v3/deploy/infrastructure-concepts/prefect-yaml).\n\nPrefect provides an interactive CLI that walks you through creating a `prefect.yaml` file:\n\n```bash  theme={null}\nprefect deploy\n```\n\nThe result is a `prefect.yaml` file for deployment creation.\nThe file contains `build`, `push`, and `pull` steps for building a Docker image, pushing code to a Docker registry, and pulling code at runtime.\nLearn more about creating deployments with a YAML file in [Define deployments with YAML](/v3/deploy/infrastructure-concepts/prefect-yaml).\n\nPrefect also provides [CI/CD options](/v3/deploy/infrastructure-concepts/deploy-ci-cd) for automatically creating YAML-based deployments.\n\n### Create a deployment with Terraform\n\n<TF name=\"deployments\" href={deployments.tf} />\n\n### Create a deployment with the API\n\n<API name=\"deployments\" href={deployments.api} />\n\n<Tip>\n  **Choosing between deployment methods**\n\n  For many cases, `serve` is sufficient for scheduling and orchestration.\n  The work pool / worker paradigm via `.deploy()` or `prefect deploy` can be great for complex infrastructure requirements and isolated flow run environments.\n  You are not locked into one method and can combine approaches as needed.\n</Tip>",
  "content_length": 4108
}