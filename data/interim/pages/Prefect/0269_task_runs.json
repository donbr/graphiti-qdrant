{
  "title": "task_runs",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-api-task_runs",
  "content": "# `prefect.server.api.task_runs`\n\nRoutes for interacting with task run objects.\n\n## Functions\n\n### `create_task_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L52\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncreate_task_run(task_run: schemas.actions.TaskRunCreate, response: Response, db: PrefectDBInterface = Depends(provide_database_interface), orchestration_parameters: Dict[str, Any] = Depends(orchestration_dependencies.provide_task_orchestration_parameters)) -> schemas.core.TaskRun\n```\n\nCreate a task run. If a task run with the same flow\\_run\\_id,\ntask\\_key, and dynamic\\_key already exists, the existing task\nrun will be returned.\n\nIf no state is provided, the task run will be created in a PENDING state.\n\nFor more information, see [https://docs.prefect.io/v3/concepts/tasks](https://docs.prefect.io/v3/concepts/tasks).\n\n### `update_task_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L96\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nupdate_task_run(task_run: schemas.actions.TaskRunUpdate, task_run_id: UUID = Path(..., description='The task run id', alias='id'), db: PrefectDBInterface = Depends(provide_database_interface)) -> None\n```\n\nUpdates a task run.\n\n### `count_task_runs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L113\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncount_task_runs(db: PrefectDBInterface = Depends(provide_database_interface), flows: schemas.filters.FlowFilter = None, flow_runs: schemas.filters.FlowRunFilter = None, task_runs: schemas.filters.TaskRunFilter = None, deployments: schemas.filters.DeploymentFilter = None) -> int\n```\n\nCount task runs.\n\n### `task_run_history` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L134\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ntask_run_history(history_start: DateTime = Body(..., description=\"The history's start time.\"), history_end: DateTime = Body(..., description=\"The history's end time.\"), history_interval: float = Body(..., description='The size of each history interval, in seconds. Must be at least 1 second.', json_schema_extra={'format': 'time-delta'}, alias='history_interval_seconds'), flows: schemas.filters.FlowFilter = None, flow_runs: schemas.filters.FlowRunFilter = None, task_runs: schemas.filters.TaskRunFilter = None, deployments: schemas.filters.DeploymentFilter = None, db: PrefectDBInterface = Depends(provide_database_interface)) -> List[schemas.responses.HistoryResponse]\n```\n\nQuery for task run history data across a given range and interval.\n\n### `read_task_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L180\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_task_run(task_run_id: UUID = Path(..., description='The task run id', alias='id'), db: PrefectDBInterface = Depends(provide_database_interface)) -> schemas.core.TaskRun\n```\n\nGet a task run by id.\n\n### `read_task_runs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L197\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_task_runs(sort: schemas.sorting.TaskRunSort = Body(schemas.sorting.TaskRunSort.ID_DESC), limit: int = dependencies.LimitBody(), offset: int = Body(0, ge=0), flows: Optional[schemas.filters.FlowFilter] = None, flow_runs: Optional[schemas.filters.FlowRunFilter] = None, task_runs: Optional[schemas.filters.TaskRunFilter] = None, deployments: Optional[schemas.filters.DeploymentFilter] = None, db: PrefectDBInterface = Depends(provide_database_interface)) -> List[schemas.core.TaskRun]\n```\n\nQuery for task runs.\n\n### `paginate_task_runs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L224\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npaginate_task_runs(sort: schemas.sorting.TaskRunSort = Body(schemas.sorting.TaskRunSort.ID_DESC), limit: int = dependencies.LimitBody(), page: int = Body(1, ge=1), flows: Optional[schemas.filters.FlowFilter] = None, flow_runs: Optional[schemas.filters.FlowRunFilter] = None, task_runs: Optional[schemas.filters.TaskRunFilter] = None, deployments: Optional[schemas.filters.DeploymentFilter] = None, db: PrefectDBInterface = Depends(provide_database_interface)) -> TaskRunPaginationResponse\n```\n\nPagination query for task runs.\n\n### `delete_task_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L271\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndelete_task_run(docket: dependencies.Docket, task_run_id: UUID = Path(..., description='The task run id', alias='id'), db: PrefectDBInterface = Depends(provide_database_interface)) -> None\n```\n\nDelete a task run by id.\n\n### `delete_task_run_logs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L288\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndelete_task_run_logs() -> None\n```\n\n### `set_task_run_state` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L304\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nset_task_run_state(task_run_id: UUID = Path(..., description='The task run id', alias='id'), state: schemas.actions.StateCreate = Body(..., description='The intended state.'), force: bool = Body(False, description='If false, orchestration rules will be applied that may alter or prevent the state transition. If True, orchestration rules are not applied.'), db: PrefectDBInterface = Depends(provide_database_interface), response: Response = None, task_policy: TaskRunOrchestrationPolicy = Depends(orchestration_dependencies.provide_task_policy), orchestration_parameters: Dict[str, Any] = Depends(orchestration_dependencies.provide_task_orchestration_parameters)) -> OrchestrationResult\n```\n\nSet a task run state, invoking any orchestration rules.\n\n### `scheduled_task_subscription` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/api/task_runs.py#L352\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nscheduled_task_subscription(websocket: WebSocket) -> None\n```",
  "content_length": 6895
}