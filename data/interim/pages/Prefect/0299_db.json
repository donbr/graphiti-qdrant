{
  "title": "db",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-events-ordering-db",
  "content": "# `prefect.server.events.ordering.db`\n\n## Classes\n\n### `CausalOrdering` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L35\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `event_has_been_seen` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L45\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nevent_has_been_seen(self, event: Union[UUID, Event]) -> bool\n```\n\n#### `forget_follower` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L71\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nforget_follower(self, db: PrefectDBInterface, follower: ReceivedEvent) -> None\n```\n\nForget that this event is waiting on another event to arrive\n\n#### `get_followers` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L86\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_followers(self, db: PrefectDBInterface, leader: ReceivedEvent) -> List[ReceivedEvent]\n```\n\nReturns events that were waiting on this leader event to arrive\n\n#### `get_lost_followers` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L100\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_lost_followers(self, db: PrefectDBInterface) -> List[ReceivedEvent]\n```\n\nReturns events that were waiting on a leader event that never arrived\n\n#### `preceding_event_confirmed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L124\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npreceding_event_confirmed(self, handler: event_handler, event: ReceivedEvent, depth: int = 0)\n```\n\nEvents may optionally declare that they logically follow another event, so that\nwe can preserve important event orderings in the face of unreliable delivery and\nordering of messages from the queues.\n\nThis function keeps track of the ID of each event that this shard has successfully\nprocessed going back to the PRECEDING\\_EVENT\\_LOOKBACK period.  If an event arrives\nthat must follow another one, confirm that we have recently seen and processed that\nevent before proceeding.\n\nevent (ReceivedEvent): The event to be processed. This object should include metadata indicating\nif and what event it follows.\ndepth (int, optional): The current recursion depth, used to prevent infinite recursion due to\ncyclic dependencies between events. Defaults to 0.\n\nRaises EventArrivedEarly if the current event shouldn't be processed yet.\n\n#### `record_event_as_seen` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L49\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrecord_event_as_seen(self, event: ReceivedEvent) -> None\n```\n\n#### `record_follower` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/db.py#L53\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrecord_follower(self, db: PrefectDBInterface, event: ReceivedEvent) -> None\n```\n\nRemember that this event is waiting on another event to arrive",
  "content_length": 3622
}