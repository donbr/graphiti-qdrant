{
  "title": "How to run flows on Prefect Managed infrastructure",
  "source_url": "https://docs-3.prefect.io/v3/how-to-guides/deployment_infra/managed",
  "content": "Learn how Prefect runs deployments on Prefect's infrastructure.\n\n<span class=\"badge cloud\" /> Prefect Cloud can run your flows on your behalf with Prefect Managed work pools.\n\nFlows that run with this work pool do not require a worker or cloud provider\naccountâ€”Prefect handles the infrastructure and code execution for you.\n\nManaged execution is a great option for users who want to get started quickly, with no infrastructure setup.\n\n## Create a managed deployment\n\n1. Create a new work pool of type Prefect Managed in the UI or the CLI.\n   Use this command to create a new work pool using the CLI:\n\n   ```bash  theme={null}\n   prefect work-pool create my-managed-pool --type prefect:managed\n   ```\n\n2. Create a deployment using the flow `deploy` method or `prefect.yaml`.\n   Specify the name of your managed work pool, as shown in this example that uses the `deploy` method:\n\n   ```python managed-execution.py theme={null}\n   from prefect import flow\n\n   if __name__ == \"__main__\":\n       flow.from_source(\n           source=\"https://github.com/prefecthq/demo.git\",\n           entrypoint=\"flow.py:my_flow\",\n       ).deploy(\n           name=\"test-managed-flow\",\n           work_pool_name=\"my-managed-pool\",\n       )\n   ```\n\n3. With your [CLI authenticated to your Prefect Cloud workspace](/v3/how-to-guides/cloud/manage-users/api-keys), run the script to create your deployment:\n\n   ```bash  theme={null}\n   python managed-execution.py\n   ```\n\n4. Run the deployment from the UI or from the CLI.\n\n   This process runs a flow on remote infrastructure without any infrastructure setup, starting a worker, or requiring a cloud provider account.\n\n## Add dependencies\n\nPrefect can install Python packages in the container that runs your flow at runtime.\nSpecify these dependencies in the **Pip Packages** field in the UI, or by configuring\n`job_variables={\"pip_packages\": [\"pandas\", \"prefect-aws\"]}` in your deployment creation like this:\n\n```python  theme={null}\nfrom prefect import flow\n\nif __name__ == \"__main__\":\n    flow.from_source(\n        source=\"https://github.com/prefecthq/demo.git\",\n        entrypoint=\"flow.py:my_flow\",\n    ).deploy(\n        name=\"test-managed-flow\",\n        work_pool_name=\"my-managed-pool\",\n        job_variables={\"pip_packages\": [\"pandas\", \"prefect-aws\"]}\n    )\n```\n\nAlternatively, you can create a `requirements.txt` file and reference it in your [prefect.yaml pull step](/v3/deploy/infrastructure-concepts/prefect-yaml#utility-steps).\n\n## Networking\n\n### Static Outbound IP addresses\n\nFlows running on Prefect Managed infrastructure can be assigned static IP addresses on outbound traffic, which will pose as the `source` address for requests interacting with your system or database.\n\nInclude these `source` addresses in your firewall rules to explicitly allow flows to communicate with your environment.\n\n* `184.73.85.134`\n* `52.4.218.198`\n* `44.217.117.74`\n\n### Images\n\nManaged execution requires that you run an official Prefect Docker image, such as `prefecthq/prefect:3-latest`.\nHowever, as noted above, you can install Python package dependencies at runtime.\nIf you need to use your own image, we recommend using another type of work pool.\n\n### Code storage\n\nYou must store flow code in an accessible remote location.\nPrefect supports git-based cloud providers such as GitHub, Bitbucket, or GitLab.\nRemote block-based storage is also supported, so S3, GCS, and Azure Blob are additional code storage options.\n\n### Resources & Limitations\n\nAll flow runs receive:\n\n* 4vCPUs\n* 16GB of RAM\n* 128GB of ephemeral storage\n\nMaximum flow run time is limited to 24 hours.\n\nEvery account has a compute usage limit per workspace that resets monthly. Compute used is defined as the duration\nbetween compute startup and teardown, rounded up to the nearest minute. This is approximately, although not exactly,\nthe duration of a flow run going from `PENDING` to `COMPLETED`.\n\n## Next steps\n\nRead more about creating deployments in [Run flows in Docker containers](/v3/how-to-guides/deployment_infra/docker).\n\nFor more control over your infrastructure, such as the ability to run\ncustom Docker images, [serverless push work pools](/v3/how-to-guides/deployment_infra/serverless)\nare a good option.",
  "content_length": 4216
}