{
  "title": "memory",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-events-ordering-memory",
  "content": "# `prefect.server.events.ordering.memory`\n\n## Classes\n\n### `EventBeingProcessed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L32\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nIndicates that an event is currently being processed and should not be processed\nuntil it is finished. This may happen due to concurrent processing.\n\n### `CausalOrdering` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L40\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `clear` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L71\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nclear(self) -> None\n```\n\nClear all data for this scope.\n\n#### `clear_all_scopes` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L80\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nclear_all_scopes(cls) -> None\n```\n\nClear all data for all scopes - useful for testing.\n\n#### `event_has_been_seen` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L104\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nevent_has_been_seen(self, event: UUID | Event) -> bool\n```\n\n#### `event_has_started_processing` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L95\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nevent_has_started_processing(self, event: UUID | Event) -> bool\n```\n\n#### `event_is_processing` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L188\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nevent_is_processing(self, event: ReceivedEvent) -> AsyncGenerator[None, None]\n```\n\nMark an event as being processed for the duration of its lifespan through\nthe ordering system.\n\n#### `followers_by_id` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L149\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfollowers_by_id(self, follower_ids: list[UUID]) -> list[ReceivedEvent]\n```\n\nReturns the events with the given IDs, in the order they occurred.\n\n#### `forget_event_is_processing` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L100\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nforget_event_is_processing(self, event: ReceivedEvent) -> None\n```\n\n#### `forget_follower` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L124\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nforget_follower(self, follower: ReceivedEvent) -> None\n```\n\nForget that this event is waiting on another event to arrive.\n\n#### `get_followers` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L136\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_followers(self, leader: ReceivedEvent) -> list[ReceivedEvent]\n```\n\nReturns events that were waiting on this leader event to arrive.\n\n#### `get_lost_followers` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L158\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_lost_followers(self) -> list[ReceivedEvent]\n```\n\nReturns events that were waiting on a leader event that never arrived.\n\n#### `preceding_event_confirmed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L243\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\npreceding_event_confirmed(self, handler: event_handler, event: ReceivedEvent, depth: int = 0) -> AsyncGenerator[None, None]\n```\n\nEvents may optionally declare that they logically follow another event, so that\nwe can preserve important event orderings in the face of unreliable delivery and\nordering of messages from the queues.\n\nThis function keeps track of the ID of each event that this shard has\nsuccessfully processed going back to the PRECEDING\\_EVENT\\_LOOKBACK period. If an\nevent arrives that must follow another one, confirm that we have recently seen\nand processed that event before proceeding.\n\n**Args:**\n\n* `handler`: The function to call when an out-of-order event is\n  ready to be processed\n* `event`: The event to be processed. This object should include\n  metadata indicating if and what event it follows.\n* `depth`: The current recursion depth, used to prevent infinite\n  recursion due to cyclic dependencies between events. Defaults to 0.\n\nRaises EventArrivedEarly if the current event shouldn't be processed yet.\n\n#### `record_event_as_processing` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L87\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrecord_event_as_processing(self, event: ReceivedEvent) -> bool\n```\n\nRecord that an event is being processed, returning False if already processing.\n\n#### `record_event_as_seen` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L109\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrecord_event_as_seen(self, event: ReceivedEvent) -> None\n```\n\n#### `record_follower` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L113\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrecord_follower(self, event: ReceivedEvent) -> None\n```\n\nRemember that this event is waiting on another event to arrive.\n\n#### `wait_for_leader` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/events/ordering/memory.py#L203\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwait_for_leader(self, event: ReceivedEvent) -> None\n```\n\nGiven an event, wait for its leader to be processed before proceeding, or\nraise EventArrivedEarly if we would wait too long in this attempt.",
  "content_length": 6976
}