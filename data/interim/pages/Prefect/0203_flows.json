{
  "title": "flows",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-flows",
  "content": "# `prefect.flows`\n\nModule containing the base workflow class and decorator - for most use cases, using the `@flow` decorator is preferred.\n\n## Functions\n\n### `bind_flow_to_infrastructure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2400\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nbind_flow_to_infrastructure(flow: Flow[P, R], work_pool: str, worker_cls: type['BaseWorker[Any, Any, Any]'], job_variables: dict[str, Any] | None = None) -> InfrastructureBoundFlow[P, R]\n```\n\n### `select_flow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2435\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nselect_flow(flows: Iterable[Flow[P, R]], flow_name: Optional[str] = None, from_message: Optional[str] = None) -> Flow[P, R]\n```\n\nSelect the only flow in an iterable or a flow specified by name.\n\nReturns\nA single flow object\n\n**Raises:**\n\n* `MissingFlowError`: If no flows exist in the iterable\n* `MissingFlowError`: If a flow name is provided and that flow does not exist\n* `UnspecifiedFlowError`: If multiple flows exist but no flow name was provided\n\n### `load_flow_from_entrypoint` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2481\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_flow_from_entrypoint(entrypoint: str, use_placeholder_flow: bool = True) -> Flow[P, Any]\n```\n\nExtract a flow object from a script at an entrypoint by running all of the code in the file.\n\n**Args:**\n\n* `entrypoint`: a string in the format `<path_to_script>\\:<flow_func_name>`\n  or a string in the format `<path_to_script>\\:<class_name>.<flow_method_name>`\n  or a module path to a flow function\n* `use_placeholder_flow`: if True, use a placeholder Flow object if the actual flow object\n  cannot be loaded from the entrypoint (e.g. dependencies are missing)\n\n**Returns:**\n\n* The flow object from the script\n\n**Raises:**\n\n* `ScriptError`: If an exception is encountered while running the script\n* `MissingFlowError`: If the flow function specified in the entrypoint does not exist\n\n### `load_function_and_convert_to_flow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2533\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_function_and_convert_to_flow(entrypoint: str) -> Flow[P, Any]\n```\n\nLoads a function from an entrypoint and converts it to a flow if it is not already a flow.\n\n### `serve` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2556\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nserve(*args: 'RunnerDeployment', **kwargs: Any) -> None\n```\n\nServe the provided list of deployments.\n\n**Args:**\n\n* `*args`: A list of deployments to serve.\n* `pause_on_shutdown`: A boolean for whether or not to automatically pause\n  deployment schedules on shutdown.\n* `print_starting_message`: Whether or not to print message to the console\n  on startup.\n* `limit`: The maximum number of runs that can be executed concurrently.\n* `**kwargs`: Additional keyword arguments to pass to the runner.\n\n**Examples:**\n\nPrepare two deployments and serve them:\n\n```python  theme={null}\nimport datetime\n\nfrom prefect import flow, serve\n\n@flow\ndef my_flow(name):\n    print(f\"hello {name}\")\n\n@flow\ndef my_other_flow(name):\n    print(f\"goodbye {name}\")\n\nif __name__ == \"__main__\":\n    # Run once a day\n    hello_deploy = my_flow.to_deployment(\n        \"hello\", tags=[\"dev\"], interval=datetime.timedelta(days=1)\n    )\n\n    # Run every Sunday at 4:00 AM\n    bye_deploy = my_other_flow.to_deployment(\n        \"goodbye\", tags=[\"dev\"], cron=\"0 4 * * sun\"\n    )\n\n    serve(hello_deploy, bye_deploy)\n```\n\n### `aserve` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2634\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\naserve(*args: 'RunnerDeployment', **kwargs: Any) -> None\n```\n\nAsynchronously serve the provided list of deployments.\n\nUse `serve` instead if calling from a synchronous context.\n\n**Args:**\n\n* `*args`: A list of deployments to serve.\n* `pause_on_shutdown`: A boolean for whether or not to automatically pause\n  deployment schedules on shutdown.\n* `print_starting_message`: Whether or not to print message to the console\n  on startup.\n* `limit`: The maximum number of runs that can be executed concurrently.\n* `**kwargs`: Additional keyword arguments to pass to the runner.\n\n**Examples:**\n\nPrepare deployment and asynchronous initialization function and serve them:\n\n````python  theme={null}\nimport asyncio\nimport datetime\n\nfrom prefect import flow, aserve, get_client\n\n\nasync def init():\n    await set_concurrency_limit()\n\n\nasync def set_concurrency_limit():\n    async with get_client() as client:\n        await client.create_concurrency_limit(tag='dev', concurrency_limit=3)\n\n\n@flow\nasync def my_flow(name):\n    print(f\"hello {name}\")\n\n\nasync def main():\n    # Initialization function\n    await init()\n\n    # Run once a day\n    hello_deploy = await my_flow.to_deployment(\n        \"hello\", tags=[\"dev\"], interval=datetime.timedelta(days=1)\n    )\n\n    await aserve(hello_deploy)\n\n\nif __name__ == \"__main__\":\n    asyncio.run(main())\n\n\n### `load_flow_from_flow_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2742\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python\nload_flow_from_flow_run(client: 'PrefectClient', flow_run: 'FlowRun', ignore_storage: bool = False, storage_base_path: Optional[str] = None, use_placeholder_flow: bool = True) -> Flow[..., Any]\n````\n\nLoad a flow from the location/script provided in a deployment's storage document.\n\nIf `ignore_storage=True` is provided, no pull from remote storage occurs.  This flag\nis largely for testing, and assumes the flow is already available locally.\n\n### `load_placeholder_flow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2850\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_placeholder_flow(entrypoint: str, raises: Exception) -> Flow[P, Any]\n```\n\nLoad a placeholder flow that is initialized with the same arguments as the\nflow specified in the entrypoint. If called the flow will raise `raises`.\n\nThis is useful when a flow can't be loaded due to missing dependencies or\nother issues but the base metadata defining the flow is still needed.\n\n**Args:**\n\n* `entrypoint`: a string in the format `<path_to_script>\\:<flow_func_name>`\n  or a module path to a flow function\n* `raises`: an exception to raise when the flow is called\n\n### `safe_load_flow_from_entrypoint` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2885\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsafe_load_flow_from_entrypoint(entrypoint: str) -> Optional[Flow[P, Any]]\n```\n\nSafely load a Prefect flow from an entrypoint string. Returns None if loading fails.\n\n**Args:**\n\n* `entrypoint`: A string identifying the flow to load. Can be in one of the following formats:\n* `<path_to_script>\\:<flow_func_name>`\n* `<path_to_script>\\:<class_name>.<flow_method_name>`\n* `<module_path>.<flow_func_name>`\n\n**Returns:**\n\n* Optional\\[Flow]: The loaded Prefect flow object, or None if loading fails due to errors\n* (e.g. unresolved dependencies, syntax errors, or missing objects).\n\n### `load_flow_arguments_from_entrypoint` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L3055\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nload_flow_arguments_from_entrypoint(entrypoint: str, arguments: Optional[Union[list[str], set[str]]] = None) -> dict[str, Any]\n```\n\nExtract flow arguments from an entrypoint string.\n\nLoads the source code of the entrypoint and extracts the flow arguments\nfrom the `flow` decorator.\n\n**Args:**\n\n* `entrypoint`: a string in the format `<path_to_script>\\:<flow_func_name>`\n  or a module path to a flow function\n\n### `is_entrypoint_async` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L3135\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_entrypoint_async(entrypoint: str) -> bool\n```\n\nDetermine if the function specified in the entrypoint is asynchronous.\n\n**Args:**\n\n* `entrypoint`: A string in the format `<path_to_script>\\:<func_name>` or\n  a module path to a function.\n\n**Returns:**\n\n* True if the function is asynchronous, False otherwise.\n\n## Classes\n\n### `FlowStateHook` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L115\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA callable that is invoked when a flow enters a given state.\n\n### `Flow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L139\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prefect workflow definition.\n\nWraps a function with an entrypoint to the Prefect engine. To preserve the input\nand output types, we use the generic type variables `P` and `R` for \"Parameters\" and\n\"Returns\" respectively.\n\n**Args:**\n\n* `fn`: The function defining the workflow.\n* `name`: An optional name for the flow; if not provided, the name will be inferred\n  from the given function.\n* `version`: An optional version string for the flow; if not provided, we will\n  attempt to create a version string as a hash of the file containing the\n  wrapped function; if the file cannot be located, the version will be null.\n* `flow_run_name`: An optional name to distinguish runs of this flow; this name can\n  be provided as a string template with the flow's parameters as variables,\n  or a function that returns a string.\n* `task_runner`: An optional task runner to use for task execution within the flow;\n  if not provided, a `ThreadPoolTaskRunner` will be used.\n* `description`: An optional string description for the flow; if not provided, the\n  description will be pulled from the docstring for the decorated function.\n* `timeout_seconds`: An optional number of seconds indicating a maximum runtime for\n  the flow. If the flow exceeds this runtime, it will be marked as failed.\n  Flow execution may continue until the next task is called.\n* `validate_parameters`: By default, parameters passed to flows are validated by\n  Pydantic. This will check that input values conform to the annotated types\n  on the function. Where possible, values will be coerced into the correct\n  type; for example, if a parameter is defined as `x\\: int` and \"5\" is passed,\n  it will be resolved to `5`. If set to `False`, no validation will be\n  performed on flow parameters.\n* `retries`: An optional number of times to retry on flow run failure.\n* `retry_delay_seconds`: An optional number of seconds to wait before retrying the\n  flow after failure. This is only applicable if `retries` is nonzero.\n* `persist_result`: An optional toggle indicating whether the result of this flow\n  should be persisted to result storage. Defaults to `None`, which indicates\n  that Prefect should choose whether the result should be persisted depending on\n  the features being used.\n* `result_storage`: An optional block to use to persist the result of this flow.\n  This value will be used as the default for any tasks in this flow.\n  If not provided, the local file system will be used unless called as\n  a subflow, at which point the default will be loaded from the parent flow.\n* `result_serializer`: An optional serializer to use to serialize the result of this\n  flow for persistence. This value will be used as the default for any tasks\n  in this flow. If not provided, the value of `PREFECT_RESULTS_DEFAULT_SERIALIZER`\n  will be used unless called as a subflow, at which point the default will be\n  loaded from the parent flow.\n* `on_failure`: An optional list of callables to run when the flow enters a failed state.\n* `on_completion`: An optional list of callables to run when the flow enters a completed state.\n* `on_cancellation`: An optional list of callables to run when the flow enters a cancelling state.\n* `on_crashed`: An optional list of callables to run when the flow enters a crashed state.\n* `on_running`: An optional list of callables to run when the flow enters a running state.\n\n**Methods:**\n\n#### `afrom_source` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1159\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nafrom_source(cls, source: Union[str, Path, 'RunnerStorage', ReadableDeploymentStorage], entrypoint: str) -> 'Flow[..., Any]'\n```\n\nLoads a flow from a remote source asynchronously.\n\n**Args:**\n\n* `source`: Either a URL to a git repository or a storage object.\n* `entrypoint`: The path to a file containing a flow and the name of the flow function in\n  the format `./path/to/file.py\\:flow_func_name`.\n\n**Returns:**\n\n* A new `Flow` instance.\n\n**Examples:**\n\nLoad a flow from a public git repository:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect.runner.storage import GitRepository\nfrom prefect.blocks.system import Secret\n\nmy_flow = flow.from_source(\n    source=\"https://github.com/org/repo.git\",\n    entrypoint=\"flows.py:my_flow\",\n)\n\nmy_flow()\n```\n\nLoad a flow from a private git repository using an access token stored in a `Secret` block:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect.runner.storage import GitRepository\nfrom prefect.blocks.system import Secret\n\nmy_flow = flow.from_source(\n    source=GitRepository(\n        url=\"https://github.com/org/repo.git\",\n        credentials={\"access_token\": Secret.load(\"github-access-token\")}\n    ),\n    entrypoint=\"flows.py:my_flow\",\n)\n\nmy_flow()\n```\n\nLoad a flow from a local directory:\n\n```python  theme={null}\n# from_local_source.py\n\nfrom pathlib import Path\nfrom prefect import flow\n\n@flow(log_prints=True)\ndef my_flow(name: str = \"world\"):\n    print(f\"Hello {name}! I'm a flow from a Python script!\")\n\nif __name__ == \"__main__\":\n    my_flow.from_source(\n        source=str(Path(__file__).parent),\n        entrypoint=\"from_local_source.py:my_flow\",\n    ).deploy(\n        name=\"my-deployment\",\n        parameters=dict(name=\"Marvin\"),\n        work_pool_name=\"local\",\n    )\n```\n\n#### `ato_deployment` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L699\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nato_deployment(self, name: str, interval: Optional[Union[Iterable[Union[int, float, datetime.timedelta]], int, float, datetime.timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, parameters: Optional[dict[str, Any]] = None, triggers: Optional[list[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, description: Optional[str] = None, tags: Optional[list[str]] = None, version: Optional[str] = None, version_type: Optional[VersionType] = None, enforce_parameter_schema: bool = True, work_pool_name: Optional[str] = None, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, entrypoint_type: EntrypointType = EntrypointType.FILE_PATH, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> 'RunnerDeployment'\n```\n\nAsynchronously creates a runner deployment object for this flow.\n\n**Args:**\n\n* `name`: The name to give the created deployment.\n* `interval`: An interval on which to execute the new deployment. Accepts either a number\n  or a timedelta object. If a number is given, it will be interpreted as seconds.\n* `cron`: A cron schedule of when to execute runs of this deployment.\n* `rrule`: An rrule schedule of when to execute runs of this deployment.\n* `paused`: Whether or not to set this deployment as paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to define multiple schedules or additional scheduling options such as `timezone`.\n* `concurrency_limit`: The maximum number of runs of this deployment that can run at the same time.\n* `parameters`: A dictionary of default parameter values to pass to runs of this deployment.\n* `triggers`: A list of triggers that will kick off runs of this deployment.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `version_type`: The type of version to use for the created deployment. The version type\n  will be inferred if not provided.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for the created deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n* `entrypoint_type`: Type of entrypoint to use for the deployment. When using a module path\n  entrypoint, ensure that the module will be importable in the execution environment.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\n**Examples:**\n\nPrepare two deployments and serve them:\n\n```python  theme={null}\nfrom prefect import flow, serve\n\n@flow\ndef my_flow(name):\n    print(f\"hello {name}\")\n\n@flow\ndef my_other_flow(name):\n    print(f\"goodbye {name}\")\n\nif __name__ == \"__main__\":\n    hello_deploy = my_flow.to_deployment(\"hello\", tags=[\"dev\"])\n    bye_deploy = my_other_flow.to_deployment(\"goodbye\", tags=[\"dev\"])\n    serve(hello_deploy, bye_deploy)\n```\n\n#### `deploy` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1381\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndeploy(self, name: str, work_pool_name: Optional[str] = None, image: Optional[Union[str, 'DockerImage']] = None, build: bool = True, push: bool = True, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, interval: Optional[Union[int, float, datetime.timedelta]] = None, cron: Optional[str] = None, rrule: Optional[str] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional[list[Schedule]] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, triggers: Optional[list[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, parameters: Optional[dict[str, Any]] = None, description: Optional[str] = None, tags: Optional[list[str]] = None, version: Optional[str] = None, version_type: Optional[VersionType] = None, enforce_parameter_schema: bool = True, entrypoint_type: EntrypointType = EntrypointType.FILE_PATH, print_next_steps: bool = True, ignore_warnings: bool = False, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> UUID\n```\n\nDeploys a flow to run on dynamic infrastructure via a work pool.\n\nBy default, calling this method will build a Docker image for the flow, push it to a registry,\nand create a deployment via the Prefect API that will run the flow on the given schedule.\n\nIf you want to use an existing image, you can pass `build=False` to skip building and pushing\nan image.\n\n**Args:**\n\n* `name`: The name to give the created deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment. Defaults to\n  the value of `PREFECT_DEFAULT_WORK_POOL_NAME`.\n* `image`: The name of the Docker image to build, including the registry and\n  repository. Pass a DockerImage instance to customize the Dockerfile used\n  and build arguments.\n* `build`: Whether or not to build a new image for the flow. If False, the provided\n  image will be used as-is and pulled at runtime.\n* `push`: Whether or not to skip pushing the built image to a registry.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n  available settings.\n* `interval`: An interval on which to execute the deployment. Accepts a number or a\n  timedelta object to create a single schedule. If a number is given, it will be\n  interpreted as seconds. Also accepts an iterable of numbers or timedelta to create\n  multiple schedules.\n* `cron`: A cron schedule string of when to execute runs of this deployment.\n  Also accepts an iterable of cron schedule strings to create multiple schedules.\n* `rrule`: An rrule schedule string of when to execute runs of this deployment.\n  Also accepts an iterable of rrule schedule strings to create multiple schedules.\n* `triggers`: A list of triggers that will kick off runs of this deployment.\n* `paused`: Whether or not to set this deployment as paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to define multiple schedules or additional scheduling options like `timezone`.\n* `concurrency_limit`: The maximum number of runs that can be executed concurrently.\n* `parameters`: A dictionary of default parameter values to pass to runs of this deployment.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `version_type`: The type of version to use for the created deployment. The version type\n  will be inferred if not provided.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for the created deployment.\n* `entrypoint_type`: Type of entrypoint to use for the deployment. When using a module path\n  entrypoint, ensure that the module will be importable in the execution environment.\n* `print_next_steps_message`: Whether or not to print a message with next steps\n  after deploying the deployments.\n* `ignore_warnings`: Whether or not to ignore warnings about the work pool type.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\nReturns:\nThe ID of the created/updated deployment.\n\n**Examples:**\n\nDeploy a local flow to a work pool:\n\n```python  theme={null}\nfrom prefect import flow\n\n@flow\ndef my_flow(name):\n    print(f\"hello {name}\")\n\nif __name__ == \"__main__\":\n    my_flow.deploy(\n        \"example-deployment\",\n        work_pool_name=\"my-work-pool\",\n        image=\"my-repository/my-image:dev\",\n    )\n```\n\nDeploy a remotely stored flow to a work pool:\n\n```python  theme={null}\nfrom prefect import flow\n\nif __name__ == \"__main__\":\n    flow.from_source(\n        source=\"https://github.com/org/repo.git\",\n        entrypoint=\"flows.py:my_flow\",\n    ).deploy(\n        \"example-deployment\",\n        work_pool_name=\"my-work-pool\",\n        image=\"my-repository/my-image:dev\",\n    )\n```\n\n#### `from_source` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1273\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_source(cls, source: Union[str, Path, 'RunnerStorage', ReadableDeploymentStorage], entrypoint: str) -> 'Flow[..., Any]'\n```\n\nLoads a flow from a remote source.\n\n**Args:**\n\n* `source`: Either a URL to a git repository or a storage object.\n* `entrypoint`: The path to a file containing a flow and the name of the flow function in\n  the format `./path/to/file.py\\:flow_func_name`.\n\n**Returns:**\n\n* A new `Flow` instance.\n\n**Examples:**\n\nLoad a flow from a public git repository:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect.runner.storage import GitRepository\nfrom prefect.blocks.system import Secret\n\nmy_flow = flow.from_source(\n    source=\"https://github.com/org/repo.git\",\n    entrypoint=\"flows.py:my_flow\",\n)\n\nmy_flow()\n```\n\nLoad a flow from a private git repository using an access token stored in a `Secret` block:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect.runner.storage import GitRepository\nfrom prefect.blocks.system import Secret\n\nmy_flow = flow.from_source(\n    source=GitRepository(\n        url=\"https://github.com/org/repo.git\",\n        credentials={\"access_token\": Secret.load(\"github-access-token\")}\n    ),\n    entrypoint=\"flows.py:my_flow\",\n)\n\nmy_flow()\n```\n\nLoad a flow from a local directory:\n\n```python  theme={null}\n# from_local_source.py\n\nfrom pathlib import Path\nfrom prefect import flow\n\n@flow(log_prints=True)\ndef my_flow(name: str = \"world\"):\n    print(f\"Hello {name}! I'm a flow from a Python script!\")\n\nif __name__ == \"__main__\":\n    my_flow.from_source(\n        source=str(Path(__file__).parent),\n        entrypoint=\"from_local_source.py:my_flow\",\n    ).deploy(\n        name=\"my-deployment\",\n        parameters=dict(name=\"Marvin\"),\n        work_pool_name=\"local\",\n    )\n```\n\n#### `isclassmethod` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L406\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nisclassmethod(self) -> bool\n```\n\n#### `ismethod` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L402\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nismethod(self) -> bool\n```\n\n#### `isstaticmethod` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L410\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nisstaticmethod(self) -> bool\n```\n\n#### `on_cancellation` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L988\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\non_cancellation(self, fn: FlowStateHook[P, R]) -> FlowStateHook[P, R]\n```\n\n#### `on_completion` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L984\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\non_completion(self, fn: FlowStateHook[P, R]) -> FlowStateHook[P, R]\n```\n\n#### `on_crashed` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L992\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\non_crashed(self, fn: FlowStateHook[P, R]) -> FlowStateHook[P, R]\n```\n\n#### `on_failure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1000\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\non_failure(self, fn: FlowStateHook[P, R]) -> FlowStateHook[P, R]\n```\n\n#### `on_running` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L996\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\non_running(self, fn: FlowStateHook[P, R]) -> FlowStateHook[P, R]\n```\n\n#### `serialize_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L662\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nserialize_parameters(self, parameters: dict[str, Any | PrefectFuture[Any] | State]) -> dict[str, Any]\n```\n\nConvert parameters to a serializable form.\n\nUses FastAPI's `jsonable_encoder` to convert to JSON compatible objects without\nconverting everything directly to a string. This maintains basic types like\nintegers during API roundtrips.\n\n#### `serve` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1004\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nserve(self, name: Optional[str] = None, interval: Optional[Union[Iterable[Union[int, float, datetime.timedelta]], int, float, datetime.timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, global_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, triggers: Optional[list[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, parameters: Optional[dict[str, Any]] = None, description: Optional[str] = None, tags: Optional[list[str]] = None, version: Optional[str] = None, enforce_parameter_schema: bool = True, pause_on_shutdown: bool = True, print_starting_message: bool = True, limit: Optional[int] = None, webserver: bool = False, entrypoint_type: EntrypointType = EntrypointType.FILE_PATH) -> None\n```\n\nCreates a deployment for this flow and starts a runner to monitor for scheduled work.\n\n**Args:**\n\n* `name`: The name to give the created deployment. Defaults to the name of the flow.\n* `interval`: An interval on which to execute the deployment. Accepts a number or a\n  timedelta object to create a single schedule. If a number is given, it will be\n  interpreted as seconds. Also accepts an iterable of numbers or timedelta to create\n  multiple schedules.\n* `cron`: A cron schedule string of when to execute runs of this deployment.\n  Also accepts an iterable of cron schedule strings to create multiple schedules.\n* `rrule`: An rrule schedule string of when to execute runs of this deployment.\n  Also accepts an iterable of rrule schedule strings to create multiple schedules.\n* `triggers`: A list of triggers that will kick off runs of this deployment.\n* `paused`: Whether or not to set this deployment as paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to define multiple schedules or additional scheduling options like `timezone`.\n* `global_limit`: The maximum number of concurrent runs allowed across all served flow instances associated with the same deployment.\n* `parameters`: A dictionary of default parameter values to pass to runs of this deployment.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for the created deployment.\n* `pause_on_shutdown`: If True, provided schedule will be paused when the serve function is stopped.\n  If False, the schedules will continue running.\n* `print_starting_message`: Whether or not to print the starting message when flow is served.\n* `limit`: The maximum number of runs that can be executed concurrently by the created runner; only applies to this served flow. To apply a limit across multiple served flows, use `global_limit`.\n* `webserver`: Whether or not to start a monitoring webserver for this flow.\n* `entrypoint_type`: Type of entrypoint to use for the deployment. When using a module path\n  entrypoint, ensure that the module will be importable in the execution environment.\n\n**Examples:**\n\nServe a flow:\n\n```python  theme={null}\nfrom prefect import flow\n\n@flow\ndef my_flow(name):\n    print(f\"hello {name}\")\n\nif __name__ == \"__main__\":\n    my_flow.serve(\"example-deployment\")\n```\n\nServe a flow and run it every hour:\n\n```python  theme={null}\nfrom prefect import flow\n\n@flow\ndef my_flow(name):\n    print(f\"hello {name}\")\n\nif __name__ == \"__main__\":\n    my_flow.serve(\"example-deployment\", interval=3600)\n```\n\n#### `to_deployment` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L840\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nto_deployment(self, name: str, interval: Optional[Union[Iterable[Union[int, float, datetime.timedelta]], int, float, datetime.timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, parameters: Optional[dict[str, Any]] = None, triggers: Optional[list[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, description: Optional[str] = None, tags: Optional[list[str]] = None, version: Optional[str] = None, version_type: Optional[VersionType] = None, enforce_parameter_schema: bool = True, work_pool_name: Optional[str] = None, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, entrypoint_type: EntrypointType = EntrypointType.FILE_PATH, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> 'RunnerDeployment'\n```\n\nCreates a runner deployment object for this flow.\n\n**Args:**\n\n* `name`: The name to give the created deployment.\n* `interval`: An interval on which to execute the new deployment. Accepts either a number\n  or a timedelta object. If a number is given, it will be interpreted as seconds.\n* `cron`: A cron schedule of when to execute runs of this deployment.\n* `rrule`: An rrule schedule of when to execute runs of this deployment.\n* `paused`: Whether or not to set this deployment as paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to define multiple schedules or additional scheduling options such as `timezone`.\n* `concurrency_limit`: The maximum number of runs of this deployment that can run at the same time.\n* `parameters`: A dictionary of default parameter values to pass to runs of this deployment.\n* `triggers`: A list of triggers that will kick off runs of this deployment.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `version_type`: The type of version to use for the created deployment. The version type\n  will be inferred if not provided.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for the created deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n* `entrypoint_type`: Type of entrypoint to use for the deployment. When using a module path\n  entrypoint, ensure that the module will be importable in the execution environment.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\n**Examples:**\n\nPrepare two deployments and serve them:\n\n```python  theme={null}\nfrom prefect import flow, serve\n\n@flow\ndef my_flow(name):\n    print(f\"hello {name}\")\n\n@flow\ndef my_other_flow(name):\n    print(f\"goodbye {name}\")\n\nif __name__ == \"__main__\":\n    hello_deploy = my_flow.to_deployment(\"hello\", tags=[\"dev\"])\n    bye_deploy = my_other_flow.to_deployment(\"goodbye\", tags=[\"dev\"])\n    serve(hello_deploy, bye_deploy)\n```\n\n#### `validate_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L572\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nvalidate_parameters(self, parameters: dict[str, Any]) -> dict[str, Any]\n```\n\nValidate parameters for compatibility with the flow by attempting to cast the inputs to the\nassociated types specified by the function's type annotations.\n\n**Returns:**\n\n* A new dict of parameters that have been cast to the appropriate types\n\n**Raises:**\n\n* `ParameterTypeError`: if the provided parameters are not valid\n\n#### `visualize` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1716\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nvisualize(self, *args: 'P.args', **kwargs: 'P.kwargs')\n```\n\nGenerates a graphviz object representing the current flow. In IPython notebooks,\nit's rendered inline, otherwise in a new window as a PNG.\n\n**Raises:**\n\n* `- ImportError`: If `graphviz` isn't installed.\n* `- GraphvizExecutableNotFoundError`: If the `dot` executable isn't found.\n* `- FlowVisualizationError`: If the flow can't be visualized for any other reason.\n\n#### `with_options` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L434\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwith_options(self) -> 'Flow[P, R]'\n```\n\nCreate a new flow from the current object, updating provided options.\n\n**Args:**\n\n* `name`: A new name for the flow.\n* `version`: A new version for the flow.\n* `description`: A new description for the flow.\n* `flow_run_name`: An optional name to distinguish runs of this flow; this name\n  can be provided as a string template with the flow's parameters as variables,\n  or a function that returns a string.\n* `task_runner`: A new task runner for the flow.\n* `timeout_seconds`: A new number of seconds to fail the flow after if still\n  running.\n* `validate_parameters`: A new value indicating if flow calls should validate\n  given parameters.\n* `retries`: A new number of times to retry on flow run failure.\n* `retry_delay_seconds`: A new number of seconds to wait before retrying the\n  flow after failure. This is only applicable if `retries` is nonzero.\n* `persist_result`: A new option for enabling or disabling result persistence.\n* `result_storage`: A new storage type to use for results.\n* `result_serializer`: A new serializer to use for results.\n* `cache_result_in_memory`: A new value indicating if the flow's result should\n  be cached in memory.\n* `on_failure`: A new list of callables to run when the flow enters a failed state.\n* `on_completion`: A new list of callables to run when the flow enters a completed state.\n* `on_cancellation`: A new list of callables to run when the flow enters a cancelling state.\n* `on_crashed`: A new list of callables to run when the flow enters a crashed state.\n* `on_running`: A new list of callables to run when the flow enters a running state.\n\n**Returns:**\n\n* A new `Flow` instance.\n\nExamples:\n\nCreate a new flow from an existing flow and update the name:\n\n```python  theme={null}\nfrom prefect import flow\n\n@flow(name=\"My flow\")\ndef my_flow():\n    return 1\n\nnew_flow = my_flow.with_options(name=\"My new flow\")\n```\n\nCreate a new flow from an existing flow, update the task runner, and call\nit without an intermediate variable:\n\n```python  theme={null}\nfrom prefect.task_runners import ThreadPoolTaskRunner\n\n@flow\ndef my_flow(x, y):\n    return x + y\n\nstate = my_flow.with_options(task_runner=ThreadPoolTaskRunner)(1, 3)\nassert state.result() == 4\n```\n\n### `FlowDecorator` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L1775\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n### `InfrastructureBoundFlow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2035\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA flow that is bound to running on a specific infrastructure.\n\n**Methods:**\n\n#### `submit` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2151\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsubmit(self, *args: P.args, **kwargs: P.kwargs) -> PrefectFlowRunFuture[R]\n```\n\nSubmit the flow to run on remote infrastructure.\n\nThis method will spin up a local worker to submit the flow to remote infrastructure. To\nsubmit the flow to remote infrastructure without spinning up a local worker, use\n`submit_to_work_pool` instead.\n\n**Args:**\n\n* `*args`: Positional arguments to pass to the flow.\n* `**kwargs`: Keyword arguments to pass to the flow.\n\n**Returns:**\n\n* A `PrefectFlowRunFuture` that can be used to retrieve the result of the flow run.\n\n**Examples:**\n\nSubmit a flow to run on Kubernetes:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect_kubernetes.experimental import kubernetes\n\n@kubernetes(work_pool=\"my-kubernetes-work-pool\")\n@flow\ndef my_flow(x: int, y: int):\n    return x + y\n\nfuture = my_flow.submit(x=1, y=2)\nresult = future.result()\nprint(result)\n```\n\n#### `submit_to_work_pool` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2198\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsubmit_to_work_pool(self, *args: P.args, **kwargs: P.kwargs) -> PrefectFlowRunFuture[R]\n```\n\nSubmits the flow to run on remote infrastructure.\n\nThis method will create a flow run for an existing worker to submit to remote infrastructure.\nIf you don't have a worker available, use `submit` instead.\n\n**Args:**\n\n* `*args`: Positional arguments to pass to the flow.\n* `**kwargs`: Keyword arguments to pass to the flow.\n\n**Returns:**\n\n* A `PrefectFlowRunFuture` that can be used to retrieve the result of the flow run.\n\n**Examples:**\n\nDispatch a flow to run on Kubernetes:\n\n```python  theme={null}\nfrom prefect import flow\nfrom prefect_kubernetes.experimental import kubernetes\n\n@kubernetes(work_pool=\"my-kubernetes-work-pool\")\n@flow\ndef my_flow(x: int, y: int):\n    return x + y\n\nfuture = my_flow.submit_to_work_pool(x=1, y=2)\nresult = future.result()\nprint(result)\n```\n\n#### `with_options` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/flows.py#L2342\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwith_options(self) -> 'InfrastructureBoundFlow[P, R]'\n```",
  "content_length": 44023
}