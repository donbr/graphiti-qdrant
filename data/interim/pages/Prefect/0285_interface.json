{
  "title": "interface",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-database-interface",
  "content": "# `prefect.server.database.interface`\n\n## Classes\n\n### `DBSingleton` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L21\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nEnsures that only one database interface is created per unique key\n\n### `PrefectDBInterface` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L55\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nAn interface for backend-specific SqlAlchemy actions and ORM models.\n\nThe REST API can be configured to run against different databases in order maintain\nperformance at different scales. This interface integrates database- and dialect-\nspecific configuration into a unified interface that the orchestration engine runs\nagainst.\n\n**Methods:**\n\n#### `Agent` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L240\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAgent(self) -> type[orm_models.Agent]\n```\n\nAn agent model\n\n#### `Artifact` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L175\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nArtifact(self) -> type[orm_models.Artifact]\n```\n\nAn artifact orm model\n\n#### `ArtifactCollection` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L180\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nArtifactCollection(self) -> type[orm_models.ArtifactCollection]\n```\n\nAn artifact collection orm model\n\n#### `Automation` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L285\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAutomation(self) -> type[orm_models.Automation]\n```\n\nAn automation model\n\n#### `AutomationBucket` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L290\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAutomationBucket(self) -> type[orm_models.AutomationBucket]\n```\n\nAn automation bucket model\n\n#### `AutomationEventFollower` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L307\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAutomationEventFollower(self) -> type[orm_models.AutomationEventFollower]\n```\n\nA model capturing one event following another event\n\n#### `AutomationRelatedResource` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L295\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nAutomationRelatedResource(self) -> type[orm_models.AutomationRelatedResource]\n```\n\nAn automation related resource model\n\n#### `Base` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L145\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nBase(self) -> type[orm_models.Base]\n```\n\nBase class for orm models\n\n#### `BlockDocument` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L260\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nBlockDocument(self) -> type[orm_models.BlockDocument]\n```\n\nA block document model\n\n#### `BlockDocumentReference` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L265\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nBlockDocumentReference(self) -> type[orm_models.BlockDocumentReference]\n```\n\nA block document reference model\n\n#### `BlockSchema` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L250\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nBlockSchema(self) -> type[orm_models.BlockSchema]\n```\n\nA block schema model\n\n#### `BlockSchemaReference` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L255\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nBlockSchemaReference(self) -> type[orm_models.BlockSchemaReference]\n```\n\nA block schema reference model\n\n#### `BlockType` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L245\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nBlockType(self) -> type[orm_models.BlockType]\n```\n\nA block type model\n\n#### `CompositeTriggerChildFiring` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L300\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nCompositeTriggerChildFiring(self) -> type[orm_models.CompositeTriggerChildFiring]\n```\n\nA model capturing a composite trigger's child firing\n\n#### `ConcurrencyLimit` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L220\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nConcurrencyLimit(self) -> type[orm_models.ConcurrencyLimit]\n```\n\nA concurrency model\n\n#### `ConcurrencyLimitV2` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L225\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nConcurrencyLimitV2(self) -> type[orm_models.ConcurrencyLimitV2]\n```\n\nA v2 concurrency model\n\n#### `Configuration` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L270\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nConfiguration(self) -> type[orm_models.Configuration]\n```\n\nAn configuration model\n\n#### `CsrfToken` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L230\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nCsrfToken(self) -> type[orm_models.CsrfToken]\n```\n\nA csrf token model\n\n#### `Deployment` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L190\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nDeployment(self) -> type[orm_models.Deployment]\n```\n\nA deployment orm model\n\n#### `DeploymentSchedule` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L195\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nDeploymentSchedule(self) -> type[orm_models.DeploymentSchedule]\n```\n\nA deployment schedule orm model\n\n#### `Event` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L312\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nEvent(self) -> type[orm_models.Event]\n```\n\nAn event model\n\n#### `EventResource` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L317\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nEventResource(self) -> type[orm_models.EventResource]\n```\n\nAn event resource model\n\n#### `Flow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L150\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nFlow(self) -> type[orm_models.Flow]\n```\n\nA flow orm model\n\n#### `FlowRun` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L155\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nFlowRun(self) -> type[orm_models.FlowRun]\n```\n\nA flow run orm model\n\n#### `FlowRunInput` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L280\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nFlowRunInput(self) -> type[orm_models.FlowRunInput]\n```\n\nA flow run input model\n\n#### `FlowRunState` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L160\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nFlowRunState(self) -> type[orm_models.FlowRunState]\n```\n\nA flow run state orm model\n\n#### `Log` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L215\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nLog(self) -> type[orm_models.Log]\n```\n\nA log orm model\n\n#### `SavedSearch` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L200\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nSavedSearch(self) -> type[orm_models.SavedSearch]\n```\n\nA saved search orm model\n\n#### `TaskRun` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L165\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nTaskRun(self) -> type[orm_models.TaskRun]\n```\n\nA task run orm model\n\n#### `TaskRunState` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L170\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nTaskRunState(self) -> type[orm_models.TaskRunState]\n```\n\nA task run state orm model\n\n#### `TaskRunStateCache` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L185\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nTaskRunStateCache(self) -> type[orm_models.TaskRunStateCache]\n```\n\nA task run state cache orm model\n\n#### `Variable` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L275\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nVariable(self) -> type[orm_models.Variable]\n```\n\nA variable model\n\n#### `WorkPool` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L205\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nWorkPool(self) -> type[orm_models.WorkPool]\n```\n\nA work pool orm model\n\n#### `WorkQueue` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L235\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nWorkQueue(self) -> type[orm_models.WorkQueue]\n```\n\nA work queue model\n\n#### `Worker` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L210\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nWorker(self) -> type[orm_models.Worker]\n```\n\nA worker process orm model\n\n#### `create_db` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L75\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncreate_db(self) -> None\n```\n\nCreate the database\n\n#### `dialect` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L141\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndialect(self) -> type[sa.engine.Dialect]\n```\n\n#### `drop_db` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L79\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndrop_db(self) -> None\n```\n\nDrop the database\n\n#### `engine` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L103\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nengine(self) -> AsyncEngine\n```\n\nProvides a SqlAlchemy engine against a specific database.\n\n#### `is_db_connectable` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L91\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_db_connectable(self) -> bool\n```\n\nReturns boolean indicating if the database is connectable.\nThis method is used to determine if the server is ready to accept requests.\n\n#### `run_migrations_downgrade` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L87\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_migrations_downgrade(self, revision: str = '-1') -> None\n```\n\nRun all downgrade migrations\n\n#### `run_migrations_upgrade` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L83\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_migrations_upgrade(self) -> None\n```\n\nRun all upgrade migrations\n\n#### `session` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L111\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsession(self) -> AsyncSession\n```\n\nProvides a SQLAlchemy session.\n\n#### `session_context` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/database/interface.py#L119\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsession_context(self, begin_transaction: bool = False, with_for_update: bool = False)\n```\n\nProvides a SQLAlchemy session and a context manager for opening/closing\nthe underlying connection.\n\n**Args:**\n\n* `begin_transaction`: if True, the context manager will begin a SQL transaction.\n  Exiting the context manager will COMMIT or ROLLBACK any changes.",
  "content_length": 15251
}