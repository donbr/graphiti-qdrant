{
  "title": "work_queues",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-models-work_queues",
  "content": "# `prefect.server.models.work_queues`\n\nFunctions for interacting with work queue ORM objects.\nIntended for internal use by the Prefect REST API.\n\n## Functions\n\n### `create_work_queue` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L49\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncreate_work_queue(db: PrefectDBInterface, session: AsyncSession, work_queue: Union[schemas.core.WorkQueue, schemas.actions.WorkQueueCreate]) -> orm_models.WorkQueue\n```\n\nInserts a WorkQueue.\n\nIf a WorkQueue with the same name exists, an error will be thrown.\n\n**Args:**\n\n* `session`: a database session\n* `work_queue`: a WorkQueue model\n\n**Returns:**\n\n* orm\\_models.WorkQueue: the newly-created or updated WorkQueue\n\n### `read_work_queue` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L135\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_work_queue(db: PrefectDBInterface, session: AsyncSession, work_queue_id: Union[UUID, PrefectUUID]) -> Optional[orm_models.WorkQueue]\n```\n\nReads a WorkQueue by id.\n\n**Args:**\n\n* `session`: A database session\n* `work_queue_id`: a WorkQueue id\n\n**Returns:**\n\n* orm\\_models.WorkQueue: the WorkQueue\n\n### `read_work_queue_by_name` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L155\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_work_queue_by_name(db: PrefectDBInterface, session: AsyncSession, name: str) -> Optional[orm_models.WorkQueue]\n```\n\nReads a WorkQueue by id.\n\n**Args:**\n\n* `session`: A database session\n* `work_queue_id`: a WorkQueue id\n\n**Returns:**\n\n* orm\\_models.WorkQueue: the WorkQueue\n\n### `read_work_queues` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L183\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_work_queues(db: PrefectDBInterface, session: AsyncSession, offset: Optional[int] = None, limit: Optional[int] = None, work_queue_filter: Optional[schemas.filters.WorkQueueFilter] = None) -> Sequence[orm_models.WorkQueue]\n```\n\nRead WorkQueues.\n\n**Args:**\n\n* `session`: A database session\n* `offset`: Query offset\n* `limit`: Query limit\n* `work_queue_filter`: only select work queues matching these filters\n\nReturns:\nSequence\\[orm\\_models.WorkQueue]: WorkQueues\n\n### `is_last_polled_recent` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L215\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_last_polled_recent(last_polled: Optional[DateTime]) -> bool\n```\n\n### `update_work_queue` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L222\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nupdate_work_queue(db: PrefectDBInterface, session: AsyncSession, work_queue_id: UUID, work_queue: schemas.actions.WorkQueueUpdate, emit_status_change: Optional[Callable[[orm_models.WorkQueue], Awaitable[None]]] = None) -> bool\n```\n\nUpdate a WorkQueue by id.\n\n**Args:**\n\n* `session`: A database session\n* `work_queue`: the work queue data\n* `work_queue_id`: a WorkQueue id\n\n**Returns:**\n\n* whether or not the WorkQueue was updated\n\n### `delete_work_queue` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L294\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndelete_work_queue(db: PrefectDBInterface, session: AsyncSession, work_queue_id: UUID) -> bool\n```\n\nDelete a WorkQueue by id.\n\n**Args:**\n\n* `session`: A database session\n* `work_queue_id`: a WorkQueue id\n\n**Returns:**\n\n* whether or not the WorkQueue was deleted\n\n### `get_runs_in_work_queue` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L315\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_runs_in_work_queue(db: PrefectDBInterface, session: AsyncSession, work_queue_id: UUID, limit: Optional[int] = None, scheduled_before: Optional[datetime.datetime] = None) -> Tuple[orm_models.WorkQueue, Sequence[orm_models.FlowRun]]\n```\n\nGet runs from a work queue.\n\n**Args:**\n\n* `session`: A database session. work\\_queue\\_id: The work queue id.\n* `scheduled_before`: Only return runs scheduled to start before this time.\n* `limit`: An optional limit for the number of runs to return from the\n  queue. This limit applies to the request only. It does not affect\n  the work queue's concurrency limit. If `limit` exceeds the work\n  queue's concurrency limit, it will be ignored.\n\n### `ensure_work_queue_exists` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L430\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nensure_work_queue_exists(session: AsyncSession, name: str) -> orm_models.WorkQueue\n```\n\nChecks if a work queue exists and creates it if it does not.\n\nUseful when working with deployments, agents, and flow runs that automatically create work queues.\n\nWill also create a work pool queue in the default agent pool to facilitate migration to work pools.\n\n### `read_work_queue_status` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L470\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_work_queue_status(session: AsyncSession, work_queue_id: UUID) -> schemas.core.WorkQueueStatusDetail\n```\n\nGet work queue status by id.\n\n**Args:**\n\n* `session`: A database session\n* `work_queue_id`: a WorkQueue id\n\n**Returns:**\n\n* Information about the status of the work queue.\n\n### `record_work_queue_polls` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L517\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrecord_work_queue_polls(db: PrefectDBInterface, session: AsyncSession, polled_work_queue_ids: Sequence[UUID], ready_work_queue_ids: Sequence[UUID]) -> None\n```\n\nRecord that the given work queues were polled, and also update the given\nready\\_work\\_queue\\_ids to READY.\n\n### `mark_work_queues_ready` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L542\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmark_work_queues_ready() -> None\n```\n\n### `mark_work_queues_not_ready` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L582\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmark_work_queues_not_ready(db: PrefectDBInterface, work_queue_ids: Iterable[UUID]) -> None\n```\n\n### `emit_work_queue_status_event` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/models/work_queues.py#L620\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nemit_work_queue_status_event(db: PrefectDBInterface, work_queue: orm_models.WorkQueue) -> None\n```",
  "content_length": 7627
}