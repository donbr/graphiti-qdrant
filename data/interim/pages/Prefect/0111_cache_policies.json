{
  "title": "cache_policies",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-cache_policies",
  "content": "# `prefect.cache_policies`\n\n## Classes\n\n### `CachePolicy` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L46\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nBase class for all cache policies.\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.\n\n### `CacheKeyFnPolicy` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L155\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nThis policy accepts a custom function with signature f(task\\_run\\_context, task\\_parameters, flow\\_parameters) -> str\nand uses it to compute a task run cache key.\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L166\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.\n\n### `CompoundCachePolicy` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L178\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nThis policy is constructed from two or more other cache policies and works by computing the keys\nfor each policy individually, and then hashing a sorted tuple of all computed keys.\n\nAny keys that return `None` will be ignored.\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L205\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.\n\n### `TaskSource` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L278\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nPolicy for computing a cache key based on the source code of the task.\n\nThis policy only considers raw lines of code in the task, and not the source code of nested tasks.\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L285\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: Optional[dict[str, Any]], flow_parameters: Optional[dict[str, Any]], **kwargs: Any) -> Optional[str]\n```\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.\n\n### `FlowParameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L307\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nPolicy that computes the cache key based on a hash of the flow parameters.\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L312\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.\n\n### `RunId` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L325\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nReturns either the prevailing flow run ID, or if not found, the prevailing task\nrun ID.\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L331\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.\n\n### `Inputs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L347\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nPolicy that computes a cache key based on a hash of the runtime inputs provided to the task..\n\n**Methods:**\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L354\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `compute_key` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncompute_key(self, task_ctx: TaskRunContext, inputs: dict[str, Any], flow_parameters: dict[str, Any], **kwargs: Any) -> Optional[str]\n```\n\n#### `configure` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L68\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconfigure(self, key_storage: Union['WritableFileSystem', str, Path, None] = None, lock_manager: Optional['LockManager'] = None, isolation_level: Union[Literal['READ_COMMITTED', 'SERIALIZABLE'], 'IsolationLevel', None] = None) -> Self\n```\n\nConfigure the cache policy with the given key storage, lock manager, and isolation level.\n\n**Args:**\n\n* `key_storage`: The storage to use for cache keys. If not provided,\n  the current key storage will be used.\n* `lock_manager`: The lock manager to use for the cache policy. If not provided,\n  the current lock manager will be used.\n* `isolation_level`: The isolation level to use for the cache policy. If not provided,\n  the current isolation level will be used.\n\n**Returns:**\n\n* A new cache policy with the given key storage, lock manager, and isolation level.\n\n#### `from_cache_key_fn` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/cache_policies.py#L60\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_cache_key_fn(cls, cache_key_fn: Callable[['TaskRunContext', Dict[str, Any]], Optional[str]]) -> 'CacheKeyFnPolicy'\n```\n\nGiven a function generates a key policy.",
  "content_length": 17085
}