{
  "title": "base",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-workers-base",
  "content": "# `prefect.workers.base`\n\n## Classes\n\n### `BaseJobConfiguration` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L103\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `from_template_and_values` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L165\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_template_and_values(cls, base_job_template: dict[str, Any], values: dict[str, Any], client: 'PrefectClient | None' = None)\n```\n\nCreates a valid worker configuration object from the provided base\nconfiguration and overrides.\n\nImportant: this method expects that the base\\_job\\_template was already\nvalidated server-side.\n\n#### `is_using_a_runner` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L135\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_using_a_runner(self) -> bool\n```\n\n#### `json_template` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L211\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\njson_template(cls) -> dict[str, Any]\n```\n\nReturns a dict with job configuration as keys and the corresponding templates as values\n\nDefaults to using the job configuration parameter name as the template variable name.\n\ne.g.\n\n```python  theme={null}\n{\n    key1: '{{ key1 }}',     # default variable template\n    key2: '{{ template2 }}', # `template2` specifically provide as template\n}\n```\n\n#### `prepare_for_flow_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L235\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nprepare_for_flow_run(self, flow_run: 'FlowRun', deployment: 'DeploymentResponse | None' = None, flow: 'APIFlow | None' = None, work_pool: 'WorkPool | None' = None, worker_name: str | None = None) -> None\n```\n\nPrepare the job configuration for a flow run.\n\nThis method is called by the worker before starting a flow run. It\nshould be used to set any configuration values that are dependent on\nthe flow run.\n\n**Args:**\n\n* `flow_run`: The flow run to be executed.\n* `deployment`: The deployment that the flow run is associated with.\n* `flow`: The flow that the flow run is associated with.\n* `work_pool`: The work pool that the flow run is running in.\n* `worker_name`: The name of the worker that is submitting the flow run.\n\n### `BaseVariables` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L378\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `model_json_schema` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L402\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nmodel_json_schema(cls, by_alias: bool = True, ref_template: str = '#/definitions/{model}', schema_generator: Type[GenerateJsonSchema] = GenerateJsonSchema, mode: Literal['validation', 'serialization'] = 'validation') -> dict[str, Any]\n```\n\nTODO: stop overriding this method - use GenerateSchema in ConfigDict instead?\n\n### `BaseWorkerResult` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L431\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n### `BaseWorker` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L446\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `client` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L522\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nclient(self) -> PrefectClient\n```\n\n#### `get_all_available_worker_types` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L589\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_all_available_worker_types() -> list[str]\n```\n\nReturns all worker types available in the local registry.\n\n#### `get_and_submit_flow_runs` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L987\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_and_submit_flow_runs(self) -> list['FlowRun']\n```\n\n#### `get_default_base_job_template` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L558\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_default_base_job_template(cls) -> dict[str, Any]\n```\n\n#### `get_description` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L554\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_description(cls) -> str\n```\n\n#### `get_documentation_url` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L546\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_documentation_url(cls) -> str\n```\n\n#### `get_flow_run_logger` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L602\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_flow_run_logger(self, flow_run: 'FlowRun') -> PrefectLogAdapter\n```\n\n#### `get_logo_url` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L550\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_logo_url(cls) -> str\n```\n\n#### `get_name_slug` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L599\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_name_slug(self) -> str\n```\n\n#### `get_status` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L1359\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_status(self) -> dict[str, Any]\n```\n\nRetrieves the status of the current worker including its name, current worker\npool, the work pool queues it is polling, and its local settings.\n\n#### `get_worker_class_from_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L576\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nget_worker_class_from_type(type: str) -> Optional[Type['BaseWorker[Any, Any, Any]']]\n```\n\nReturns the worker class for a given worker type. If the worker type\nis not recognized, returns None.\n\n#### `is_worker_still_polling` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L958\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nis_worker_still_polling(self, query_interval_seconds: float) -> bool\n```\n\nThis method is invoked by a webserver healthcheck handler\nand returns a boolean indicating if the worker has recorded a\nscheduled flow run poll within a variable amount of time.\n\nThe `query_interval_seconds` is the same value that is used by\nthe loop services - we will evaluate if the \\_last\\_polled\\_time\nwas within that interval x 30 (so 10s -> 5m)\n\nThe instance property `self._last_polled_time`\nis currently set/updated in `get_and_submit_flow_runs()`\n\n#### `limiter` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L538\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nlimiter(self) -> anyio.CapacityLimiter\n```\n\n#### `run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L711\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun(self, flow_run: 'FlowRun', configuration: C, task_status: Optional[anyio.abc.TaskStatus[int]] = None) -> R\n```\n\nRuns a given flow run on the current worker.\n\n#### `setup` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L920\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsetup(self) -> None\n```\n\nPrepares the worker to run.\n\n#### `start` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L618\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstart(self, run_once: bool = False, with_healthcheck: bool = False, printer: Callable[..., None] = print) -> None\n```\n\nStarts the worker and runs the main worker loops.\n\nBy default, the worker will run loops to poll for scheduled/cancelled flow\nruns and sync with the Prefect API server.\n\nIf `run_once` is set, the worker will only run each loop once and then return.\n\nIf `with_healthcheck` is set, the worker will start a healthcheck server which\ncan be used to determine if the worker is still polling for flow runs and restart\nthe worker if necessary.\n\n**Args:**\n\n* `run_once`: If set, the worker will only run each loop once then return.\n* `with_healthcheck`: If set, the worker will start a healthcheck server.\n* `printer`: A `print`-like function where logs will be reported.\n\n#### `submit` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L743\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsubmit(self, flow: 'Flow[..., FR]', parameters: dict[str, Any] | None = None, job_variables: dict[str, Any] | None = None) -> 'PrefectFlowRunFuture[FR]'\n```\n\nEXPERIMENTAL: The interface for this method is subject to change.\n\nSubmits a flow to run via the worker.\n\n**Args:**\n\n* `flow`: The flow to submit\n* `parameters`: The parameters to pass to the flow\n\n**Returns:**\n\n* A flow run object\n\n#### `sync_with_backend` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L1109\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nsync_with_backend(self) -> None\n```\n\nUpdates the worker's local information about it's current work pool and\nqueues. Sends a worker heartbeat to the API.\n\n#### `teardown` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L940\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nteardown(self, *exc_info: Any) -> None\n```\n\nCleans up resources after the worker is stopped.\n\n#### `work_pool` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/workers/base.py#L530\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nwork_pool(self) -> WorkPool\n```",
  "content_length": 11451
}