{
  "title": "sync",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-concurrency-sync",
  "content": "# `prefect.concurrency.sync`\n\n## Functions\n\n### `concurrency` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/concurrency/sync.py#L22\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nconcurrency(names: Union[str, list[str]], occupy: int = 1, timeout_seconds: Optional[float] = None, max_retries: Optional[int] = None, lease_duration: float = 300, strict: bool = False, holder: 'Optional[ConcurrencyLeaseHolder]' = None) -> Generator[None, None, None]\n```\n\nA context manager that acquires and releases concurrency slots from the\ngiven concurrency limits.\n\n**Args:**\n\n* `names`: The names of the concurrency limits to acquire slots from.\n* `occupy`: The number of slots to acquire and hold from each limit.\n* `timeout_seconds`: The number of seconds to wait for the slots to be acquired before\n  raising a `TimeoutError`. A timeout of `None` will wait indefinitely.\n* `max_retries`: The maximum number of retries to acquire the concurrency slots.\n* `lease_duration`: The duration of the lease for the acquired slots in seconds.\n* `strict`: A boolean specifying whether to raise an error if the concurrency limit does not exist.\n  Defaults to `False`.\n* `holder`: A dictionary containing information about the holder of the concurrency slots.\n  Typically includes 'type' and 'id' keys.\n\n**Raises:**\n\n* `TimeoutError`: If the slots are not acquired within the given timeout.\n* `ConcurrencySlotAcquisitionError`: If the concurrency limit does not exist and `strict` is `True`.\n\nExample:\nA simple example of using the sync `concurrency` context manager:\n\n```python  theme={null}\nfrom prefect.concurrency.sync import concurrency\n\ndef resource_heavy():\n    with concurrency(\"test\", occupy=1):\n        print(\"Resource heavy task\")\n\ndef main():\n    resource_heavy()\n```\n\n### `rate_limit` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/concurrency/sync.py#L76\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrate_limit(names: Union[str, list[str]], occupy: int = 1, timeout_seconds: Optional[float] = None, strict: bool = False) -> None\n```\n\nBlock execution until an `occupy` number of slots of the concurrency\nlimits given in `names` are acquired. Requires that all given concurrency\nlimits have a slot decay.\n\n**Args:**\n\n* `names`: The names of the concurrency limits to acquire slots from.\n* `occupy`: The number of slots to acquire and hold from each limit.\n* `timeout_seconds`: The number of seconds to wait for the slots to be acquired before\n  raising a `TimeoutError`. A timeout of `None` will wait indefinitely.\n* `strict`: A boolean specifying whether to raise an error if the concurrency limit does not exist.\n  Defaults to `False`.\n\n**Raises:**\n\n* `TimeoutError`: If the slots are not acquired within the given timeout.\n* `ConcurrencySlotAcquisitionError`: If the concurrency limit does not exist and `strict` is `True`.",
  "content_length": 2995
}