{
  "title": "late_runs",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-services-late_runs",
  "content": "# `prefect.server.services.late_runs`\n\nThe MarkLateRuns service. Responsible for putting flow runs in a Late state if they are not started on time.\nThe threshold for a late run can be configured by changing `PREFECT_API_SERVICES_LATE_RUNS_AFTER_SECONDS`.\n\n## Classes\n\n### `MarkLateRuns` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/late_runs.py#L34\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nFinds flow runs that are later than their scheduled start time\n\nA flow run is defined as \"late\" if has not scheduled within a certain amount\nof time after its scheduled start time. The exact amount is configurable in\nPrefect REST API Settings.\n\n**Methods:**\n\n#### `run_once` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/late_runs.py#L63\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_once(self, db: PrefectDBInterface) -> None\n```\n\nMark flow runs as late by:\n\n* Querying for flow runs in a scheduled state that are Scheduled to start in the past\n* For any runs past the \"late\" threshold, setting the flow run state to a new `Late` state\n\n#### `run_once` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/base.py#L336\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_once(self) -> None\n```\n\nRepresents one loop of the service.\n\nSubclasses must override this method.\n\nTo actually run the service once, call `LoopService().start(loops=1)`\ninstead of `LoopService().run_once()`, because this method will not invoke setup\nand teardown methods properly.\n\n#### `service_settings` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/late_runs.py#L44\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nservice_settings(cls) -> ServicesBaseSetting\n```\n\n#### `start` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/base.py#L218\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstart(self, loops: None = None) -> NoReturn\n```\n\nRun the service indefinitely.\n\n#### `stop` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/base.py#L298\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstop(self, block: bool = True) -> None\n```\n\nGracefully stops a running LoopService and optionally blocks until the\nservice stops.\n\n**Args:**\n\n* `block`: if True, blocks until the service is\n  finished running. Otherwise it requests a stop and returns but\n  the service may still be running a final loop.",
  "content_length": 2865
}