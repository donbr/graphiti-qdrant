{
  "title": "task_worker",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-task_worker",
  "content": "# `prefect.task_worker`\n\n## Functions\n\n### `should_try_to_read_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L67\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nshould_try_to_read_parameters(task: Task[P, R], task_run: TaskRun) -> bool\n```\n\nDetermines whether a task run should read parameters from the result store.\n\n### `create_status_server` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L410\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncreate_status_server(task_worker: TaskWorker) -> FastAPI\n```\n\n### `serve` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L436\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nserve(*tasks: Task[P, R])\n```\n\nServe the provided tasks so that their runs may be submitted to\nand executed in the engine. Tasks do not need to be within a flow run context to be\nsubmitted. You must `.submit` the same task object that you pass to `serve`.\n\n**Args:**\n\n* `- tasks`: A list of tasks to serve. When a scheduled task run is found for a\n  given task, the task run will be submitted to the engine for execution.\n* `- limit`: The maximum number of tasks that can be run concurrently. Defaults to 10.\n  Pass `None` to remove the limit.\n* `- status_server_port`: An optional port on which to start an HTTP server\n  exposing status information about the task worker. If not provided, no\n  status server will run.\n* `- timeout`: If provided, the task worker will exit after the given number of\n  seconds. Defaults to None, meaning the task worker will run indefinitely.\n\n### `store_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L522\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstore_parameters(result_store: ResultStore, identifier: UUID, parameters: dict[str, Any]) -> None\n```\n\nStore parameters for a task run in the result store.\n\n**Args:**\n\n* `result_store`: The result store to store the parameters in.\n* `identifier`: The identifier of the task run.\n* `parameters`: The parameters to store.\n\n### `read_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L551\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nread_parameters(result_store: ResultStore, identifier: UUID) -> dict[str, Any]\n```\n\nRead parameters for a task run from the result store.\n\n**Args:**\n\n* `result_store`: The result store to read the parameters from.\n* `identifier`: The identifier of the task run.\n\n**Returns:**\n\n* The parameters for the task run.\n\n## Classes\n\n### `StopTaskWorker` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L61\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRaised when the task worker is stopped.\n\n### `TaskWorker` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L79\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nThis class is responsible for serving tasks that may be executed in the background\nby a task runner via the traditional engine machinery.\n\nWhen `start()` is called, the task worker will open a websocket connection to a\nserver-side queue of scheduled task runs. When a scheduled task run is found, the\nscheduled task run is submitted to the engine for execution with a minimal `EngineContext`\nso that the task run can be governed by orchestration rules.\n\n**Args:**\n\n* `- tasks`: A list of tasks to serve. These tasks will be submitted to the engine\n  when a scheduled task run is found.\n* `- limit`: The maximum number of tasks that can be run concurrently. Defaults to 10.\n  Pass `None` to remove the limit.\n\n**Methods:**\n\n#### `available_tasks` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L164\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\navailable_tasks(self) -> Optional[int]\n```\n\n#### `client_id` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L140\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nclient_id(self) -> str\n```\n\n#### `current_tasks` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L156\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ncurrent_tasks(self) -> Optional[int]\n```\n\n#### `execute_task_run` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L382\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nexecute_task_run(self, task_run: TaskRun) -> None\n```\n\nExecute a task run in the task worker.\n\n#### `handle_sigterm` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L167\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nhandle_sigterm(self, signum: int, frame: object) -> None\n```\n\nShuts down the task worker when a SIGTERM is received.\n\n#### `limit` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L152\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nlimit(self) -> Optional[int]\n```\n\n#### `start` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L177\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstart(self, timeout: Optional[float] = None) -> None\n```\n\nStarts a task worker, which runs the tasks provided in the constructor.\n\n**Args:**\n\n* `timeout`: If provided, the task worker will exit after the given number of\n  seconds. Defaults to None, meaning the task worker will run indefinitely.\n\n#### `started` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L148\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstarted(self) -> bool\n```\n\n#### `started_at` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L144\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstarted_at(self) -> Optional[DateTime]\n```\n\n#### `stop` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/task_worker.py#L207\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstop(self)\n```\n\nStops the task worker's polling cycle.",
  "content_length": 7063
}