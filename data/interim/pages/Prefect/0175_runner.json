{
  "title": "runner",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-deployments-runner",
  "content": "# `prefect.deployments.runner`\n\nObjects for creating and configuring deployments for flows using `serve` functionality.\n\nExample:\n\n```python  theme={null}\nimport time\nfrom prefect import flow, serve\n\n\n@flow\ndef slow_flow(sleep: int = 60):\n    \"Sleepy flow - sleeps the provided amount of time (in seconds).\"\n    time.sleep(sleep)\n\n\n@flow\ndef fast_flow():\n    \"Fastest flow this side of the Mississippi.\"\n    return\n\n\nif __name__ == \"__main__\":\n    # to_deployment creates RunnerDeployment instances\n    slow_deploy = slow_flow.to_deployment(name=\"sleeper\", interval=45)\n    fast_deploy = fast_flow.to_deployment(name=\"fast\")\n\n    serve(slow_deploy, fast_deploy)\n```\n\n## Functions\n\n### `deploy` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L1139\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\ndeploy(*deployments: RunnerDeployment) -> List[UUID]\n```\n\nDeploy the provided list of deployments to dynamic infrastructure via a\nwork pool.\n\nBy default, calling this function will build a Docker image for the deployments, push it to a\nregistry, and create each deployment via the Prefect API that will run the corresponding\nflow on the given schedule.\n\nIf you want to use an existing image, you can pass `build=False` to skip building and pushing\nan image.\n\n**Args:**\n\n* `*deployments`: A list of deployments to deploy.\n* `work_pool_name`: The name of the work pool to use for these deployments. Defaults to\n  the value of `PREFECT_DEFAULT_WORK_POOL_NAME`.\n* `image`: The name of the Docker image to build, including the registry and\n  repository. Pass a DockerImage instance to customize the Dockerfile used\n  and build arguments.\n* `build`: Whether or not to build a new image for the flow. If False, the provided\n  image will be used as-is and pulled at runtime.\n* `push`: Whether or not to skip pushing the built image to a registry.\n* `print_next_steps_message`: Whether or not to print a message with next steps\n  after deploying the deployments.\n\n**Returns:**\n\n* A list of deployment IDs for the created/updated deployments.\n\n**Examples:**\n\nDeploy a group of flows to a work pool:\n\n```python  theme={null}\nfrom prefect import deploy, flow\n\n@flow(log_prints=True)\ndef local_flow():\n    print(\"I'm a locally defined flow!\")\n\nif __name__ == \"__main__\":\n    deploy(\n        local_flow.to_deployment(name=\"example-deploy-local-flow\"),\n        flow.from_source(\n            source=\"https://github.com/org/repo.git\",\n            entrypoint=\"flows.py:my_flow\",\n        ).to_deployment(\n            name=\"example-deploy-remote-flow\",\n        ),\n        work_pool_name=\"my-work-pool\",\n        image=\"my-registry/my-image:dev\",\n    )\n```\n\n## Classes\n\n### `DeploymentApplyError` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L119\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRaised when an error occurs while applying a deployment.\n\n### `RunnerDeployment` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L125\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prefect RunnerDeployment definition, used for specifying and building deployments.\n\n**Methods:**\n\n#### `afrom_storage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L889\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nafrom_storage(cls, storage: RunnerStorage, entrypoint: str, name: str, flow_name: Optional[str] = None, interval: Optional[Union[Iterable[Union[int, float, timedelta]], int, float, timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, parameters: Optional[dict[str, Any]] = None, triggers: Optional[List[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, description: Optional[str] = None, tags: Optional[List[str]] = None, version: Optional[str] = None, version_type: Optional[VersionType] = None, enforce_parameter_schema: bool = True, work_pool_name: Optional[str] = None, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> 'RunnerDeployment'\n```\n\nCreate a RunnerDeployment from a flow located at a given entrypoint and stored in a\nlocal storage location.\n\n**Args:**\n\n* `entrypoint`: The path to a file containing a flow and the name of the flow function in\n  the format `./path/to/file.py\\:flow_func_name`.\n* `name`: A name for the deployment\n* `flow_name`: The name of the flow to deploy\n* `storage`: A storage object to use for retrieving flow code. If not provided, a\n  URL must be provided.\n* `interval`: An interval on which to execute the current flow. Accepts either a number\n  or a timedelta object. If a number is given, it will be interpreted as seconds.\n* `cron`: A cron schedule of when to execute runs of this flow.\n* `rrule`: An rrule schedule of when to execute runs of this flow.\n* `paused`: Whether or not the deployment is paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `triggers`: A list of triggers that should kick of a run of this flow.\n* `parameters`: A dictionary of default parameter values to pass to runs of this flow.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `version_type`: The type of version information to use for the deployment. The version type\n  will be inferred if not provided.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for this deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n  available settings.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\n#### `apply` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L493\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\napply(self, schedules: Optional[List[dict[str, Any]]] = None, work_pool_name: Optional[str] = None, image: Optional[str] = None, version_info: Optional[VersionInfo] = None) -> UUID\n```\n\nRegisters this deployment with the API and returns the deployment's ID.\n\n**Args:**\n\n* `work_pool_name`: The name of the work pool to use for this\n  deployment.\n* `image`: The registry, name, and tag of the Docker image to\n  use for this deployment. Only used when the deployment is\n  deployed to a work pool.\n* `version_info`: The version information to use for the deployment.\n\nReturns:\nThe ID of the created deployment.\n\n#### `entrypoint_type` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L263\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nentrypoint_type(self) -> EntrypointType\n```\n\n#### `from_entrypoint` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L785\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_entrypoint(cls, entrypoint: str, name: str, flow_name: Optional[str] = None, interval: Optional[Union[Iterable[Union[int, float, timedelta]], int, float, timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, parameters: Optional[dict[str, Any]] = None, triggers: Optional[List[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, description: Optional[str] = None, tags: Optional[List[str]] = None, version: Optional[str] = None, enforce_parameter_schema: bool = True, work_pool_name: Optional[str] = None, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> 'RunnerDeployment'\n```\n\nConfigure a deployment for a given flow located at a given entrypoint.\n\n**Args:**\n\n* `entrypoint`: The path to a file containing a flow and the name of the flow function in\n  the format `./path/to/file.py\\:flow_func_name`.\n* `name`: A name for the deployment\n* `flow_name`: The name of the flow to deploy\n* `interval`: An interval on which to execute the current flow. Accepts either a number\n  or a timedelta object. If a number is given, it will be interpreted as seconds.\n* `cron`: A cron schedule of when to execute runs of this flow.\n* `rrule`: An rrule schedule of when to execute runs of this flow.\n* `paused`: Whether or not to set this deployment as paused.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to define multiple schedules or additional scheduling options like `timezone`.\n* `triggers`: A list of triggers that should kick of a run of this flow.\n* `parameters`: A dictionary of default parameter values to pass to runs of this flow.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for this deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n  available settings.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\n#### `from_flow` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L641\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_flow(cls, flow: 'Flow[..., Any]', name: str, interval: Optional[Union[Iterable[Union[int, float, timedelta]], int, float, timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, parameters: Optional[dict[str, Any]] = None, triggers: Optional[List[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, description: Optional[str] = None, tags: Optional[List[str]] = None, version: Optional[str] = None, version_type: Optional[VersionType] = None, enforce_parameter_schema: bool = True, work_pool_name: Optional[str] = None, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, entrypoint_type: EntrypointType = EntrypointType.FILE_PATH, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> 'RunnerDeployment'\n```\n\nConfigure a deployment for a given flow.\n\n**Args:**\n\n* `flow`: A flow function to deploy\n* `name`: A name for the deployment\n* `interval`: An interval on which to execute the current flow. Accepts either a number\n  or a timedelta object. If a number is given, it will be interpreted as seconds.\n* `cron`: A cron schedule of when to execute runs of this flow.\n* `rrule`: An rrule schedule of when to execute runs of this flow.\n* `paused`: Whether or not to set this deployment as paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to define multiple schedules or additional scheduling options like `timezone`.\n* `concurrency_limit`: The maximum number of concurrent runs this deployment will allow.\n* `triggers`: A list of triggers that should kick of a run of this flow.\n* `parameters`: A dictionary of default parameter values to pass to runs of this flow.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `version_type`: The type of version information to use for the deployment.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for this deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n  available settings.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\n#### `from_storage` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L1015\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfrom_storage(cls, storage: RunnerStorage, entrypoint: str, name: str, flow_name: Optional[str] = None, interval: Optional[Union[Iterable[Union[int, float, timedelta]], int, float, timedelta]] = None, cron: Optional[Union[Iterable[str], str]] = None, rrule: Optional[Union[Iterable[str], str]] = None, paused: Optional[bool] = None, schedule: Optional[Schedule] = None, schedules: Optional['FlexibleScheduleList'] = None, concurrency_limit: Optional[Union[int, ConcurrencyLimitConfig, None]] = None, parameters: Optional[dict[str, Any]] = None, triggers: Optional[List[Union[DeploymentTriggerTypes, TriggerTypes]]] = None, description: Optional[str] = None, tags: Optional[List[str]] = None, version: Optional[str] = None, version_type: Optional[VersionType] = None, enforce_parameter_schema: bool = True, work_pool_name: Optional[str] = None, work_queue_name: Optional[str] = None, job_variables: Optional[dict[str, Any]] = None, _sla: Optional[Union[SlaTypes, list[SlaTypes]]] = None) -> 'RunnerDeployment'\n```\n\nCreate a RunnerDeployment from a flow located at a given entrypoint and stored in a\nlocal storage location.\n\n**Args:**\n\n* `entrypoint`: The path to a file containing a flow and the name of the flow function in\n  the format `./path/to/file.py\\:flow_func_name`.\n* `name`: A name for the deployment\n* `flow_name`: The name of the flow to deploy\n* `storage`: A storage object to use for retrieving flow code. If not provided, a\n  URL must be provided.\n* `interval`: An interval on which to execute the current flow. Accepts either a number\n  or a timedelta object. If a number is given, it will be interpreted as seconds.\n* `cron`: A cron schedule of when to execute runs of this flow.\n* `rrule`: An rrule schedule of when to execute runs of this flow.\n* `paused`: Whether or not the deployment is paused.\n* `schedule`: A schedule object defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `schedules`: A list of schedule objects defining when to execute runs of this deployment.\n  Used to provide additional scheduling options like `timezone` or `parameters`.\n* `triggers`: A list of triggers that should kick of a run of this flow.\n* `parameters`: A dictionary of default parameter values to pass to runs of this flow.\n* `description`: A description for the created deployment. Defaults to the flow's\n  description if not provided.\n* `tags`: A list of tags to associate with the created deployment for organizational\n  purposes.\n* `version`: A version for the created deployment. Defaults to the flow's version.\n* `version_type`: The type of version information to use for the deployment. The version type\n  will be inferred if not provided.\n* `enforce_parameter_schema`: Whether or not the Prefect API should enforce the\n  parameter schema for this deployment.\n* `work_pool_name`: The name of the work pool to use for this deployment.\n* `work_queue_name`: The name of the work queue to use for this deployment's scheduled runs.\n  If not provided the default work queue for the work pool will be used.\n* `job_variables`: Settings used to override the values specified default base job template\n  of the chosen work pool. Refer to the base job template of the chosen work pool for\n  available settings.\n* `_sla`: (Experimental) SLA configuration for the deployment. May be removed or modified at any time. Currently only supported on Prefect Cloud.\n\n#### `full_name` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L267\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nfull_name(self) -> str\n```\n\n#### `reconcile_paused` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L318\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nreconcile_paused(cls, values: dict[str, Any]) -> dict[str, Any]\n```\n\n#### `reconcile_schedules` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L323\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nreconcile_schedules(cls, values: dict[str, Any]) -> dict[str, Any]\n```\n\n#### `validate_automation_names` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L292\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nvalidate_automation_names(self)\n```\n\nEnsure that each trigger has a name for its automation if none is provided.\n\n#### `validate_deployment_parameters` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L301\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nvalidate_deployment_parameters(self) -> Self\n```\n\nUpdate the parameter schema to mark frozen parameters as readonly.\n\n#### `validate_name` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/deployments/runner.py#L286\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nvalidate_name(cls, value: str) -> str\n```",
  "content_length": 20237
}