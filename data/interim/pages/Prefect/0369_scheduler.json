{
  "title": "scheduler",
  "source_url": "https://docs-3.prefect.io/v3/api-ref/python/prefect-server-services-scheduler",
  "content": "# `prefect.server.services.scheduler`\n\nThe Scheduler service.\n\n## Classes\n\n### `TryAgain` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L34\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nInternal control-flow exception used to retry the Scheduler's main loop\n\n### `Scheduler` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L38\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nSchedules flow runs from deployments.\n\n**Methods:**\n\n#### `run_once` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L76\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_once(self, db: PrefectDBInterface) -> None\n```\n\nSchedule flow runs by:\n\n* Querying for deployments with active schedules\n* Generating the next set of flow runs based on each deployments schedule\n* Inserting all scheduled flow runs into the database\n\nAll inserted flow runs are committed to the database at the termination of the\nloop.\n\n#### `run_once` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/base.py#L336\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_once(self) -> None\n```\n\nRepresents one loop of the service.\n\nSubclasses must override this method.\n\nTo actually run the service once, call `LoopService().start(loops=1)`\ninstead of `LoopService().run_once()`, because this method will not invoke setup\nand teardown methods properly.\n\n#### `service_settings` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L48\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nservice_settings(cls) -> ServicesBaseSetting\n```\n\n#### `start` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/base.py#L218\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstart(self, loops: None = None) -> NoReturn\n```\n\nRun the service indefinitely.\n\n#### `stop` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/base.py#L298\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nstop(self, block: bool = True) -> None\n```\n\nGracefully stops a running LoopService and optionally blocks until the\nservice stops.\n\n**Args:**\n\n* `block`: if True, blocks until the service is\n  finished running. Otherwise it requests a stop and returns but\n  the service may still be running a final loop.\n\n### `RecentDeploymentsScheduler` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L305\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nSchedules deployments that were updated very recently\n\nThis scheduler can run on a tight loop and ensure that runs from\nnewly-created or updated deployments are rapidly scheduled without having to\nwait for the \"main\" scheduler to complete its loop.\n\nNote that scheduling is idempotent, so its ok for this scheduler to attempt\nto schedule the same deployments as the main scheduler. It's purpose is to\naccelerate scheduling for any deployments that users are interacting with.\n\n**Methods:**\n\n#### `run_once` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L76\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nrun_once(self, db: PrefectDBInterface) -> None\n```\n\nSchedule flow runs by:\n\n* Querying for deployments with active schedules\n* Generating the next set of flow runs based on each deployments schedule\n* Inserting all scheduled flow runs into the database\n\nAll inserted flow runs are committed to the database at the termination of the\nloop.\n\n#### `service_settings` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L322\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nservice_settings(cls) -> ServicesBaseSetting\n```\n\n#### `service_settings` <sup><a href=\"https://github.com/PrefectHQ/prefect/blob/main/src/prefect/server/services/scheduler.py#L48\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={null}\nservice_settings(cls) -> ServicesBaseSetting\n```",
  "content_length": 4695
}