{
  "title": "Claude Code Analytics API",
  "source_url": "https://docs.claude.com/en/docs/build-with-claude/claude-code-analytics-api",
  "content": "Programmatically access your organization's Claude Code usage analytics and productivity metrics with the Claude Code Analytics Admin API.\n\n<Tip>\n  **The Admin API is unavailable for individual accounts.** To collaborate with teammates and add members, set up your organization in **Console → Settings → Organization**.\n</Tip>\n\nThe Claude Code Analytics Admin API provides programmatic access to daily aggregated usage metrics for Claude Code users, enabling organizations to analyze developer productivity and build custom dashboards. This API bridges the gap between our basic [Analytics dashboard](https://console.anthropic.com/claude-code) and the complex OpenTelemetry integration.\n\nThis API enables you to better monitor, analyze, and optimize your Claude Code adoption:\n\n* **Developer Productivity Analysis:** Track sessions, lines of code added/removed, commits, and pull requests created using Claude Code\n* **Tool Usage Metrics:** Monitor acceptance and rejection rates for different Claude Code tools (Edit, Write, NotebookEdit)\n* **Cost Analysis:** View estimated costs and token usage broken down by Claude model\n* **Custom Reporting:** Export data to build executive dashboards and reports for management teams\n* **Usage Justification:** Provide metrics to justify and expand Claude Code adoption internally\n\n<Check>\n  **Admin API key required**\n\n  This API is part of the [Admin API](/en/docs/build-with-claude/administration-api). These endpoints require an Admin API key (starting with `sk-ant-admin...`) that differs from standard API keys. Only organization members with the admin role can provision Admin API keys through the [Claude Console](https://console.anthropic.com/settings/admin-keys).\n</Check>\n\n## Quick start\n\nGet your organization's Claude Code analytics for a specific day:\n\n```bash  theme={null}\ncurl \"https://api.anthropic.com/v1/organizations/usage_report/claude_code?\\\nstarting_at=2025-09-08&\\\nlimit=20\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"\n```\n\n<Tip>\n  **Set a User-Agent header for integrations**\n\n  If you're building an integration, set your User-Agent header to help us understand usage patterns:\n\n  ```\n  User-Agent: YourApp/1.0.0 (https://yourapp.com)\n  ```\n</Tip>\n\n## Claude Code Analytics API\n\nTrack Claude Code usage, productivity metrics, and developer activity across your organization with the `/v1/organizations/usage_report/claude_code` endpoint.\n\n### Key concepts\n\n* **Daily aggregation**: Returns metrics for a single day specified by the `starting_at` parameter\n* **User-level data**: Each record represents one user's activity for the specified day\n* **Productivity metrics**: Track sessions, lines of code, commits, pull requests, and tool usage\n* **Token and cost data**: Monitor usage and estimated costs broken down by Claude model\n* **Cursor-based pagination**: Handle large datasets with stable pagination using opaque cursors\n* **Data freshness**: Metrics are available with up to 1-hour delay for consistency\n\nFor complete parameter details and response schemas, see the [Claude Code Analytics API reference](/en/api/admin-api/claude-code/get-claude-code-usage-report).\n\n### Basic examples\n\n#### Get analytics for a specific day\n\n```bash  theme={null}\ncurl \"https://api.anthropic.com/v1/organizations/usage_report/claude_code?\\\nstarting_at=2025-09-08\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"\n```\n\n#### Get analytics with pagination\n\n```bash  theme={null}\n# First request\ncurl \"https://api.anthropic.com/v1/organizations/usage_report/claude_code?\\\nstarting_at=2025-09-08&\\\nlimit=20\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"\n\n# Subsequent request using cursor from response\ncurl \"https://api.anthropic.com/v1/organizations/usage_report/claude_code?\\\nstarting_at=2025-09-08&\\\npage=page_MjAyNS0wNS0xNFQwMDowMDowMFo=\" \\\n  --header \"anthropic-version: 2023-06-01\" \\\n  --header \"x-api-key: $ADMIN_API_KEY\"\n```\n\n### Request parameters\n\n| Parameter     | Type    | Required | Description                                                             |\n| ------------- | ------- | -------- | ----------------------------------------------------------------------- |\n| `starting_at` | string  | Yes      | UTC date in YYYY-MM-DD format. Returns metrics for this single day only |\n| `limit`       | integer | No       | Number of records per page (default: 20, max: 1000)                     |\n| `page`        | string  | No       | Opaque cursor token from previous response's `next_page` field          |\n\n### Available metrics\n\nEach response record contains the following metrics for a single user on a single day:\n\n#### Dimensions\n\n* **date**: Date in RFC 3339 format (UTC timestamp)\n* **actor**: The user or API key that performed the Claude Code actions (either `user_actor` with `email_address` or `api_actor` with `api_key_name`)\n* **organization\\_id**: Organization UUID\n* **customer\\_type**: Type of customer account (`api` for API customers, `subscription` for Pro/Team customers)\n* **terminal\\_type**: Type of terminal or environment where Claude Code was used (e.g., `vscode`, `iTerm.app`, `tmux`)\n\n#### Core metrics\n\n* **num\\_sessions**: Number of distinct Claude Code sessions initiated by this actor\n* **lines\\_of\\_code.added**: Total number of lines of code added across all files by Claude Code\n* **lines\\_of\\_code.removed**: Total number of lines of code removed across all files by Claude Code\n* **commits\\_by\\_claude\\_code**: Number of git commits created through Claude Code's commit functionality\n* **pull\\_requests\\_by\\_claude\\_code**: Number of pull requests created through Claude Code's PR functionality\n\n#### Tool action metrics\n\nBreakdown of tool action acceptance and rejection rates by tool type:\n\n* **edit\\_tool.accepted/rejected**: Number of Edit tool proposals that the user accepted/rejected\n* **write\\_tool.accepted/rejected**: Number of Write tool proposals that the user accepted/rejected\n* **notebook\\_edit\\_tool.accepted/rejected**: Number of NotebookEdit tool proposals that the user accepted/rejected\n\n#### Model breakdown\n\nFor each Claude model used:\n\n* **model**: Claude model identifier (e.g., `claude-sonnet-4-5-20250929`)\n* **tokens.input/output**: Input and output token counts for this model\n* **tokens.cache\\_read/cache\\_creation**: Cache-related token usage for this model\n* **estimated\\_cost.amount**: Estimated cost in cents USD for this model\n* **estimated\\_cost.currency**: Currency code for the cost amount (currently always `USD`)\n\n### Response structure\n\nThe API returns data in the following format:\n\n```json  theme={null}\n{\n  \"data\": [\n    {\n      \"date\": \"2025-09-01T00:00:00Z\",\n      \"actor\": {\n        \"type\": \"user_actor\",\n        \"email_address\": \"developer@company.com\"\n      },\n      \"organization_id\": \"dc9f6c26-b22c-4831-8d01-0446bada88f1\",\n      \"customer_type\": \"api\",\n      \"terminal_type\": \"vscode\",\n      \"core_metrics\": {\n        \"num_sessions\": 5,\n        \"lines_of_code\": {\n          \"added\": 1543,\n          \"removed\": 892\n        },\n        \"commits_by_claude_code\": 12,\n        \"pull_requests_by_claude_code\": 2\n      },\n      \"tool_actions\": {\n        \"edit_tool\": {\n          \"accepted\": 45,\n          \"rejected\": 5\n        },\n        \"multi_edit_tool\": {\n          \"accepted\": 12,\n          \"rejected\": 2\n        },\n        \"write_tool\": {\n          \"accepted\": 8,\n          \"rejected\": 1\n        },\n        \"notebook_edit_tool\": {\n          \"accepted\": 3,\n          \"rejected\": 0\n        }\n      },\n      \"model_breakdown\": [\n        {\n          \"model\": \"claude-sonnet-4-5-20250929\",\n          \"tokens\": {\n            \"input\": 100000,\n            \"output\": 35000,\n            \"cache_read\": 10000,\n            \"cache_creation\": 5000\n          },\n          \"estimated_cost\": {\n            \"currency\": \"USD\",\n            \"amount\": 1025\n          }\n        }\n      ]\n    }\n  ],\n  \"has_more\": false,\n  \"next_page\": null\n}\n```\n\n## Pagination\n\nThe API supports cursor-based pagination for organizations with large numbers of users:\n\n1. Make your initial request with optional `limit` parameter\n2. If `has_more` is `true` in the response, use the `next_page` value in your next request\n3. Continue until `has_more` is `false`\n\nThe cursor encodes the position of the last record and ensures stable pagination even as new data arrives. Each pagination session maintains a consistent data boundary to ensure you don't miss or duplicate records.\n\n## Common use cases\n\n* **Executive dashboards**: Create high-level reports showing Claude Code impact on development velocity\n* **AI tool comparison**: Export metrics to compare Claude Code with other AI coding tools like Copilot and Cursor\n* **Developer productivity analysis**: Track individual and team productivity metrics over time\n* **Cost tracking and allocation**: Monitor spending patterns and allocate costs by team or project\n* **Adoption monitoring**: Identify which teams and users are getting the most value from Claude Code\n* **ROI justification**: Provide concrete metrics to justify and expand Claude Code adoption internally\n\n## Frequently asked questions\n\n### How fresh is the analytics data?\n\nClaude Code analytics data typically appears within 1 hour of user activity completion. To ensure consistent pagination results, only data older than 1 hour is included in responses.\n\n### Can I get real-time metrics?\n\nNo, this API provides daily aggregated metrics only. For real-time monitoring, consider using the [OpenTelemetry integration](https://code.claude.com/docs/en/monitoring-usage).\n\n### How are users identified in the data?\n\nUsers are identified through the `actor` field in two ways:\n\n* **`user_actor`**: Contains `email_address` for users who authenticate via OAuth (most common)\n* **`api_actor`**: Contains `api_key_name` for users who authenticate via API key\n\nThe `customer_type` field indicates whether the usage is from `api` customers (API PAYG) or `subscription` customers (Pro/Team plans).\n\n### What's the data retention period?\n\nHistorical Claude Code analytics data is retained and accessible through the API. There is no specified deletion period for this data.\n\n### Which Claude Code deployments are supported?\n\nThis API only tracks Claude Code usage on the Claude API (1st party). Usage on Amazon Bedrock, Google Vertex AI, or other third-party platforms is not included.\n\n### What does it cost to use this API?\n\nThe Claude Code Analytics API is free to use for all organizations with access to the Admin API.\n\n### How do I calculate tool acceptance rates?\n\nTool acceptance rate = `accepted / (accepted + rejected)` for each tool type. For example, if the edit tool shows 45 accepted and 5 rejected, the acceptance rate is 90%.\n\n### What time zone is used for the date parameter?\n\nAll dates are in UTC. The `starting_at` parameter should be in YYYY-MM-DD format and represents UTC midnight for that day.\n\n## See also\n\nThe Claude Code Analytics API helps you understand and optimize your team's development workflow. Learn more about related features:\n\n* [Admin API overview](/en/docs/build-with-claude/administration-api)\n* [Admin API reference](/en/api/admin-api)\n* [Claude Code Analytics dashboard](https://console.anthropic.com/claude-code)\n* [Usage and Cost API](/en/docs/build-with-claude/usage-cost-api) - Track API usage across all Anthropic services\n* [Identity and access management](https://code.claude.com/docs/en/iam)\n* [Monitoring usage with OpenTelemetry](https://code.claude.com/docs/en/monitoring-usage) for custom metrics and alerting",
  "content_length": 11603
}