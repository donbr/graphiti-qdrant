{
  "title": "SQL sorcerer",
  "source_url": "https://docs.claude.com/en/resources/prompt-library/sql-sorcerer",
  "content": "Transform everyday language into SQL queries.\n\n> Copy this prompt into our developer [Console](https://console.anthropic.com/dashboard) to try it for yourself!\n\n|        | Content                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    |\n| ------ | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |\n| System | Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists: <br /> <br /> Customers: <br /> - customer\\_id (INT, PRIMARY KEY) <br /> - first\\_name (VARCHAR) <br /> - last\\_name (VARCHAR) <br /> - email (VARCHAR) <br /> - phone (VARCHAR) <br /> - address (VARCHAR) <br /> - city (VARCHAR) <br /> - state (VARCHAR) <br /> - zip\\_code (VARCHAR) <br /><br /> Products: <br /> - product\\_id (INT, PRIMARY KEY) <br /> - product\\_name (VARCHAR) <br /> - description (TEXT) <br /> - category (VARCHAR) <br /> - price (DECIMAL) <br /> - stock\\_quantity (INT) <br /> <br /> Orders: <br /> - order\\_id (INT, PRIMARY KEY) <br /> - customer\\_id (INT, FOREIGN KEY REFERENCES Customers) <br /> - order\\_date (DATE) <br /> - total\\_amount (DECIMAL) <br /> - status (VARCHAR) <br /><br /> Order\\_Items: <br /> - order\\_item\\_id (INT, PRIMARY KEY) <br /> - order\\_id (INT, FOREIGN KEY REFERENCES Orders) <br /> - product\\_id (INT, FOREIGN KEY REFERENCES Products) <br /> - quantity (INT) <br /> - price (DECIMAL) <br /><br /> Reviews: <br /> - review\\_id (INT, PRIMARY KEY) <br /> - product\\_id (INT, FOREIGN KEY REFERENCES Products) <br /> - customer\\_id (INT, FOREIGN KEY REFERENCES Customers) <br /> - rating (INT) <br /> - comment (TEXT) <br /> - review\\_date (DATE) <br /><br /> Employees: <br /> - employee\\_id (INT, PRIMARY KEY) <br /> - first\\_name (VARCHAR) <br /> - last\\_name (VARCHAR) <br /> - email (VARCHAR) <br /> - phone (VARCHAR) <br /> - hire\\_date (DATE) <br /> - job\\_title (VARCHAR) <br /> - department (VARCHAR) <br /> - salary (DECIMAL) <br /><br /> Provide the SQL query that would retrieve the data based on the natural language request. |\n| User   | Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 |\n\n## Example output\n\n```sql  theme={null}\nSELECT c.first_name, c.last_name, SUM(o.total_amount) AS total_spent\nFROM Customers c\nINNER JOIN Orders o ON c.customer_id = o.customer_id\nLEFT JOIN Reviews r ON c.customer_id = r.customer_id\nWHERE r.review_id IS NULL\nGROUP BY c.customer_id, c.first_name, c.last_name;\n\n```\n\n## API Request\n\n***\n\n<Tabs>\n  <Tab title=\"Python\">\n    ```Python  theme={null}\n    import anthropic\n\n    client = anthropic.Anthropic(\n      # defaults to os.environ.get(\"ANTHROPIC_API_KEY\")\n      api_key=\"my_api_key\",\n    )\n    message = client.messages.create(\n      model=\"claude-sonnet-4-5\",\n      max_tokens=1000,\n      temperature=0,\n      system=\"Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists: \\n \\nCustomers: \\n- customer_id (INT, PRIMARY KEY) \\n- first_name (VARCHAR) \\n- last_name (VARCHAR) \\n- email (VARCHAR) \\n- phone (VARCHAR) \\n- address (VARCHAR) \\n- city (VARCHAR) \\n- state (VARCHAR) \\n- zip_code (VARCHAR) \\n \\nProducts: \\n- product_id (INT, PRIMARY KEY) \\n- product_name (VARCHAR) \\n- description (TEXT) \\n- category (VARCHAR) \\n- price (DECIMAL) \\n- stock_quantity (INT) \\n \\nOrders: \\n- order_id (INT, PRIMARY KEY) \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers) \\n- order_date (DATE) \\n- total_amount (DECIMAL) \\n- status (VARCHAR) \\n \\nOrder_Items: \\n- order_item_id (INT, PRIMARY KEY) \\n- order_id (INT, FOREIGN KEY REFERENCES Orders) \\n- product_id (INT, FOREIGN KEY REFERENCES Products) \\n- quantity (INT) \\n- price (DECIMAL) \\n \\nReviews: \\n- review_id (INT, PRIMARY KEY) \\n- product_id (INT, FOREIGN KEY REFERENCES Products) \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers) \\n- rating (INT) \\n- comment (TEXT) \\n- review_date (DATE) \\n \\nEmployees: \\n- employee_id (INT, PRIMARY KEY) \\n- first_name (VARCHAR) \\n- last_name (VARCHAR) \\n- email (VARCHAR) \\n- phone (VARCHAR) \\n- hire_date (DATE) \\n- job_title (VARCHAR) \\n- department (VARCHAR) \\n- salary (DECIMAL) \\n \\nProvide the SQL query that would retrieve the data based on the natural language request.\",\n      messages=[\n        {\n          \"role\": \"user\",\n          \"content\": [\n            {\n              \"type\": \"text\",\n              \"text\": \"Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.\"\n            }\n          ]\n        }\n      ]\n    )\n    print(message.content)\n\n    ```\n  </Tab>\n\n  <Tab title=\"TypeScript\">\n    ```TypeScript  theme={null}\n    import Anthropic from \"@anthropic-ai/sdk\";\n\n    const anthropic = new Anthropic({\n      apiKey: \"my_api_key\", // defaults to process.env[\"ANTHROPIC_API_KEY\"]\n    });\n\n    const msg = await anthropic.messages.create({\n      model: \"claude-sonnet-4-5\",\n      max_tokens: 1000,\n      temperature: 0,\n      system: \"Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists:  \\n  \\nCustomers:  \\n- customer_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- address (VARCHAR)  \\n- city (VARCHAR)  \\n- state (VARCHAR)  \\n- zip_code (VARCHAR)  \\n  \\nProducts:  \\n- product_id (INT, PRIMARY KEY)  \\n- product_name (VARCHAR)  \\n- description (TEXT)  \\n- category (VARCHAR)  \\n- price (DECIMAL)  \\n- stock_quantity (INT)  \\n  \\nOrders:  \\n- order_id (INT, PRIMARY KEY)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- order_date (DATE)  \\n- total_amount (DECIMAL)  \\n- status (VARCHAR)  \\n  \\nOrder_Items:  \\n- order_item_id (INT, PRIMARY KEY)  \\n- order_id (INT, FOREIGN KEY REFERENCES Orders)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- quantity (INT)  \\n- price (DECIMAL)  \\n  \\nReviews:  \\n- review_id (INT, PRIMARY KEY)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- rating (INT)  \\n- comment (TEXT)  \\n- review_date (DATE)  \\n  \\nEmployees:  \\n- employee_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- hire_date (DATE)  \\n- job_title (VARCHAR)  \\n- department (VARCHAR)  \\n- salary (DECIMAL)  \\n  \\nProvide the SQL query that would retrieve the data based on the natural language request.\",\n      messages: [\n        {\n          \"role\": \"user\",\n          \"content\": [\n            {\n              \"type\": \"text\",\n              \"text\": \"Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.\"\n            }\n          ]\n        }\n      ]\n    });\n    console.log(msg);\n\n    ```\n  </Tab>\n\n  <Tab title=\"AWS Bedrock Python\">\n    ```Python  theme={null}\n    from anthropic import AnthropicBedrock\n\n    # See https://docs.claude.com/claude/reference/claude-on-amazon-bedrock\n    # for authentication options\n    client = AnthropicBedrock()\n\n    message = client.messages.create(\n        model=\"anthropic.claude-sonnet-4-5-20250929-v1:0\",\n        max_tokens=1000,\n        temperature=0,\n        system=\"Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists:  \\n  \\nCustomers:  \\n- customer_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- address (VARCHAR)  \\n- city (VARCHAR)  \\n- state (VARCHAR)  \\n- zip_code (VARCHAR)  \\n  \\nProducts:  \\n- product_id (INT, PRIMARY KEY)  \\n- product_name (VARCHAR)  \\n- description (TEXT)  \\n- category (VARCHAR)  \\n- price (DECIMAL)  \\n- stock_quantity (INT)  \\n  \\nOrders:  \\n- order_id (INT, PRIMARY KEY)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- order_date (DATE)  \\n- total_amount (DECIMAL)  \\n- status (VARCHAR)  \\n  \\nOrder_Items:  \\n- order_item_id (INT, PRIMARY KEY)  \\n- order_id (INT, FOREIGN KEY REFERENCES Orders)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- quantity (INT)  \\n- price (DECIMAL)  \\n  \\nReviews:  \\n- review_id (INT, PRIMARY KEY)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- rating (INT)  \\n- comment (TEXT)  \\n- review_date (DATE)  \\n  \\nEmployees:  \\n- employee_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- hire_date (DATE)  \\n- job_title (VARCHAR)  \\n- department (VARCHAR)  \\n- salary (DECIMAL)  \\n  \\nProvide the SQL query that would retrieve the data based on the natural language request.\",\n        messages=[\n            {\n                \"role\": \"user\",\n                \"content\": [\n                    {\n                        \"type\": \"text\",\n                        \"text\": \"Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.\"\n                    }\n                ]\n            }\n        ]\n    )\n    print(message.content)\n\n    ```\n  </Tab>\n\n  <Tab title=\"AWS Bedrock TypeScript\">\n    ```TypeScript  theme={null}\n    import AnthropicBedrock from \"@anthropic-ai/bedrock-sdk\";\n\n    // See https://docs.claude.com/claude/reference/claude-on-amazon-bedrock\n    // for authentication options\n    const client = new AnthropicBedrock();\n\n    const msg = await client.messages.create({\n      model: \"anthropic.claude-sonnet-4-5-20250929-v1:0\",\n      max_tokens: 1000,\n      temperature: 0,\n      system: \"Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists:  \\n  \\nCustomers:  \\n- customer_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- address (VARCHAR)  \\n- city (VARCHAR)  \\n- state (VARCHAR)  \\n- zip_code (VARCHAR)  \\n  \\nProducts:  \\n- product_id (INT, PRIMARY KEY)  \\n- product_name (VARCHAR)  \\n- description (TEXT)  \\n- category (VARCHAR)  \\n- price (DECIMAL)  \\n- stock_quantity (INT)  \\n  \\nOrders:  \\n- order_id (INT, PRIMARY KEY)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- order_date (DATE)  \\n- total_amount (DECIMAL)  \\n- status (VARCHAR)  \\n  \\nOrder_Items:  \\n- order_item_id (INT, PRIMARY KEY)  \\n- order_id (INT, FOREIGN KEY REFERENCES Orders)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- quantity (INT)  \\n- price (DECIMAL)  \\n  \\nReviews:  \\n- review_id (INT, PRIMARY KEY)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- rating (INT)  \\n- comment (TEXT)  \\n- review_date (DATE)  \\n  \\nEmployees:  \\n- employee_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- hire_date (DATE)  \\n- job_title (VARCHAR)  \\n- department (VARCHAR)  \\n- salary (DECIMAL)  \\n  \\nProvide the SQL query that would retrieve the data based on the natural language request.\",\n      messages: [\n        {\n          \"role\": \"user\",\n          \"content\": [\n            {\n              \"type\": \"text\",\n              \"text\": \"Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.\"\n            }\n          ]\n        }\n      ]\n    });\n    console.log(msg);\n\n    ```\n  </Tab>\n\n  <Tab title=\"Vertex AI Python\">\n    ```Python  theme={null}\n    from anthropic import AnthropicVertex\n\n    client = AnthropicVertex()\n\n    message = client.messages.create(\n        model=\"claude-sonnet-4@20250514\",\n        max_tokens=1000,\n        temperature=0,\n        system=\"Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists:  \\n  \\nCustomers:  \\n- customer_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- address (VARCHAR)  \\n- city (VARCHAR)  \\n- state (VARCHAR)  \\n- zip_code (VARCHAR)  \\n  \\nProducts:  \\n- product_id (INT, PRIMARY KEY)  \\n- product_name (VARCHAR)  \\n- description (TEXT)  \\n- category (VARCHAR)  \\n- price (DECIMAL)  \\n- stock_quantity (INT)  \\n  \\nOrders:  \\n- order_id (INT, PRIMARY KEY)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- order_date (DATE)  \\n- total_amount (DECIMAL)  \\n- status (VARCHAR)  \\n  \\nOrder_Items:  \\n- order_item_id (INT, PRIMARY KEY)  \\n- order_id (INT, FOREIGN KEY REFERENCES Orders)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- quantity (INT)  \\n- price (DECIMAL)  \\n  \\nReviews:  \\n- review_id (INT, PRIMARY KEY)  \\n- product_id (INT, FOREIGN KEY REFERENCES Products)  \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers)  \\n- rating (INT)  \\n- comment (TEXT)  \\n- review_date (DATE)  \\n  \\nEmployees:  \\n- employee_id (INT, PRIMARY KEY)  \\n- first_name (VARCHAR)  \\n- last_name (VARCHAR)  \\n- email (VARCHAR)  \\n- phone (VARCHAR)  \\n- hire_date (DATE)  \\n- job_title (VARCHAR)  \\n- department (VARCHAR)  \\n- salary (DECIMAL)  \\n  \\nProvide the SQL query that would retrieve the data based on the natural language request.\",\n        messages=[\n            {\n                \"role\": \"user\",\n                \"content\": [\n                    {\n                        \"type\": \"text\",\n                        \"text\": \"Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.\"\n                    }\n                ]\n            }\n        ]\n    )\n    print(message.content)\n\n    ```\n  </Tab>\n\n  <Tab title=\"Vertex AI TypeScript\">\n    ```TypeScript  theme={null}\n    import { AnthropicVertex } from '@anthropic-ai/vertex-sdk';\n\n    // Reads from the `CLOUD_ML_REGION` & `ANTHROPIC_VERTEX_PROJECT_ID` environment variables.\n    // Additionally goes through the standard `google-auth-library` flow.\n    const client = new AnthropicVertex();\n\n    const msg = await client.messages.create({\n    model: \"claude-sonnet-4@20250514\",\n    max_tokens: 1000,\n    temperature: 0,\n    system: \"Transform the following natural language requests into valid SQL queries. Assume a database with the following tables and columns exists: \\n \\nCustomers: \\n- customer_id (INT, PRIMARY KEY) \\n- first_name (VARCHAR) \\n- last_name (VARCHAR) \\n- email (VARCHAR) \\n- phone (VARCHAR) \\n- address (VARCHAR) \\n- city (VARCHAR) \\n- state (VARCHAR) \\n- zip_code (VARCHAR) \\n \\nProducts: \\n- product_id (INT, PRIMARY KEY) \\n- product_name (VARCHAR) \\n- description (TEXT) \\n- category (VARCHAR) \\n- price (DECIMAL) \\n- stock_quantity (INT) \\n \\nOrders: \\n- order_id (INT, PRIMARY KEY) \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers) \\n- order_date (DATE) \\n- total_amount (DECIMAL) \\n- status (VARCHAR) \\n \\nOrder_Items: \\n- order_item_id (INT, PRIMARY KEY) \\n- order_id (INT, FOREIGN KEY REFERENCES Orders) \\n- product_id (INT, FOREIGN KEY REFERENCES Products) \\n- quantity (INT) \\n- price (DECIMAL) \\n \\nReviews: \\n- review_id (INT, PRIMARY KEY) \\n- product_id (INT, FOREIGN KEY REFERENCES Products) \\n- customer_id (INT, FOREIGN KEY REFERENCES Customers) \\n- rating (INT) \\n- comment (TEXT) \\n- review_date (DATE) \\n \\nEmployees: \\n- employee_id (INT, PRIMARY KEY) \\n- first_name (VARCHAR) \\n- last_name (VARCHAR) \\n- email (VARCHAR) \\n- phone (VARCHAR) \\n- hire_date (DATE) \\n- job_title (VARCHAR) \\n- department (VARCHAR) \\n- salary (DECIMAL) \\n \\nProvide the SQL query that would retrieve the data based on the natural language request.\",\n    messages: [\n    {\n    \"role\": \"user\",\n    \"content\": [\n    {\n    \"type\": \"text\",\n    \"text\": \"Get the list of customers who have placed orders but have not provided any reviews, along with the total amount they have spent on orders.\"\n    }\n    ]\n    }\n    ]\n    });\n    console.log(msg);\n\n    ```\n  </Tab>\n</Tabs>\n\n```\n \n```",
  "content_length": 21001
}