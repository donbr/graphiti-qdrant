{
  "title": "Claude on Vertex AI",
  "source_url": "https://docs.claude.com/en/docs/build-with-claude/claude-on-vertex-ai",
  "content": "Anthropic's Claude models are now generally available through [Vertex AI](https://cloud.google.com/vertex-ai).\n\nexport const ModelId = ({children, style = {}}) => {\n  const copiedNotice = 'Copied!';\n  const handleClick = e => {\n    const element = e.currentTarget;\n    const textSpan = element.querySelector('.model-id-text');\n    const copiedSpan = element.querySelector('.model-id-copied');\n    navigator.clipboard.writeText(children).then(() => {\n      textSpan.style.opacity = '0';\n      copiedSpan.style.opacity = '1';\n      element.style.backgroundColor = '#d4edda';\n      element.style.borderColor = '#c3e6cb';\n      setTimeout(() => {\n        textSpan.style.opacity = '1';\n        copiedSpan.style.opacity = '0';\n        element.style.backgroundColor = '#f5f5f5';\n        element.style.borderColor = 'transparent';\n      }, 2000);\n    }).catch(error => {\n      console.error('Failed to copy:', error);\n    });\n  };\n  const handleMouseEnter = e => {\n    const element = e.currentTarget;\n    const copiedSpan = element.querySelector('.model-id-copied');\n    const tooltip = element.querySelector('.copy-tooltip');\n    if (tooltip && copiedSpan.style.opacity !== '1') {\n      tooltip.style.opacity = '1';\n    }\n    element.style.backgroundColor = '#e8e8e8';\n    element.style.borderColor = '#d0d0d0';\n  };\n  const handleMouseLeave = e => {\n    const element = e.currentTarget;\n    const copiedSpan = element.querySelector('.model-id-copied');\n    const tooltip = element.querySelector('.copy-tooltip');\n    if (tooltip) {\n      tooltip.style.opacity = '0';\n    }\n    if (copiedSpan.style.opacity !== '1') {\n      element.style.backgroundColor = '#f5f5f5';\n      element.style.borderColor = 'transparent';\n    }\n  };\n  const defaultStyle = {\n    cursor: 'pointer',\n    position: 'relative',\n    transition: 'all 0.2s ease',\n    display: 'inline-block',\n    userSelect: 'none',\n    backgroundColor: '#f5f5f5',\n    padding: '2px 4px',\n    borderRadius: '4px',\n    fontFamily: 'Monaco, Consolas, \"Courier New\", monospace',\n    fontSize: '0.75em',\n    border: '1px solid transparent',\n    ...style\n  };\n  return <span onClick={handleClick} onMouseEnter={handleMouseEnter} onMouseLeave={handleMouseLeave} style={defaultStyle}>\n      <span className=\"model-id-text\" style={{\n    transition: 'opacity 0.1s ease'\n  }}>\n        {children}\n      </span>\n      <span className=\"model-id-copied\" style={{\n    position: 'absolute',\n    top: '2px',\n    left: '4px',\n    right: '4px',\n    opacity: '0',\n    transition: 'opacity 0.1s ease',\n    color: '#155724'\n  }}>\n        {copiedNotice}\n      </span>\n    </span>;\n};\n\nThe Vertex API for accessing Claude is nearly-identical to the [Messages API](/en/api/messages) and supports all of the same options, with two key differences:\n\n* In Vertex, `model` is not passed in the request body. Instead, it is specified in the Google Cloud endpoint URL.\n* In Vertex, `anthropic_version` is passed in the request body (rather than as a header), and must be set to the value `vertex-2023-10-16`.\n\nVertex is also supported by Anthropic's official [client SDKs](/en/api/client-sdks). This guide will walk you through the process of making a request to Claude on Vertex AI in either Python or TypeScript.\n\nNote that this guide assumes you have already have a GCP project that is able to use Vertex AI. See [using the Claude 3 models from Anthropic](https://cloud.google.com/vertex-ai/generative-ai/docs/partner-models/use-claude) for more information on the setup required, as well as a full walkthrough.\n\n## Install an SDK for accessing Vertex AI\n\nFirst, install Anthropic's [client SDK](/en/api/client-sdks) for your language of choice.\n\n<CodeGroup>\n  ```Python Python theme={null}\n  pip install -U google-cloud-aiplatform \"anthropic[vertex]\"\n  ```\n\n  ```TypeScript TypeScript theme={null}\n  npm install @anthropic-ai/vertex-sdk\n  ```\n</CodeGroup>\n\n## Accessing Vertex AI\n\n### Model Availability\n\nNote that Anthropic model availability varies by region. Search for \"Claude\" in the [Vertex AI Model Garden](https://cloud.google.com/model-garden) or go to [Use Claude 3](https://cloud.google.com/vertex-ai/generative-ai/docs/partner-models/use-claude) for the latest information.\n\n#### API model IDs\n\n| Model                                                                            | Vertex AI API model ID                         |\n| -------------------------------------------------------------------------------- | ---------------------------------------------- |\n| Claude Sonnet 4.5                                                                | <ModelId>claude-sonnet-4-5\\@20250929</ModelId> |\n| Claude Sonnet 4                                                                  | <ModelId>claude-sonnet-4\\@20250514</ModelId>   |\n| Claude Sonnet 3.7 <Tooltip tip=\"Deprecated as of October 28, 2025.\">⚠️</Tooltip> | <ModelId>claude-3-7-sonnet\\@20250219</ModelId> |\n| Claude Opus 4.1                                                                  | <ModelId>claude-opus-4-1\\@20250805</ModelId>   |\n| Claude Opus 4                                                                    | <ModelId>claude-opus-4\\@20250514</ModelId>     |\n| Claude Opus 3 <Tooltip tip=\"Deprecated as of June 30, 2025.\">⚠️</Tooltip>        | <ModelId>claude-3-opus\\@20240229</ModelId>     |\n| Claude Haiku 4.5                                                                 | <ModelId>claude-haiku-4-5\\@20251001</ModelId>  |\n| Claude Haiku 3.5                                                                 | <ModelId>claude-3-5-haiku\\@20241022</ModelId>  |\n| Claude Haiku 3                                                                   | <ModelId>claude-3-haiku\\@20240307</ModelId>    |\n\n### Making requests\n\nBefore running requests you may need to run `gcloud auth application-default login` to authenticate with GCP.\n\nThe following examples shows how to generate text from Claude on Vertex AI:\n\n<CodeGroup>\n  ```Python Python theme={null}\n  from anthropic import AnthropicVertex\n\n  project_id = \"MY_PROJECT_ID\"\n  region = \"global\"\n\n  client = AnthropicVertex(project_id=project_id, region=region)\n\n  message = client.messages.create(\n      model=\"claude-sonnet-4-5@20250929\",\n      max_tokens=100,\n      messages=[\n          {\n              \"role\": \"user\",\n              \"content\": \"Hey Claude!\",\n          }\n      ],\n  )\n  print(message)\n  ```\n\n  ```TypeScript TypeScript theme={null}\n  import { AnthropicVertex } from '@anthropic-ai/vertex-sdk';\n\n  const projectId = 'MY_PROJECT_ID';\n  const region = 'global';\n\n  // Goes through the standard `google-auth-library` flow.\n  const client = new AnthropicVertex({\n    projectId,\n    region,\n  });\n\n  async function main() {\n    const result = await client.messages.create({\n      model: 'claude-sonnet-4-5@20250929',\n      max_tokens: 100,\n      messages: [\n        {\n          role: 'user',\n          content: 'Hey Claude!',\n        },\n      ],\n    });\n    console.log(JSON.stringify(result, null, 2));\n  }\n\n  main();\n  ```\n\n  ```bash Shell theme={null}\n  MODEL_ID=claude-sonnet-4-5@20250929\n  LOCATION=global\n  PROJECT_ID=MY_PROJECT_ID\n\n  curl \\\n  -X POST \\\n  -H \"Authorization: Bearer $(gcloud auth print-access-token)\" \\\n  -H \"Content-Type: application/json\" \\\n  https://$LOCATION-aiplatform.googleapis.com/v1/projects/${PROJECT_ID}/locations/${LOCATION}/publishers/anthropic/models/${MODEL_ID}:streamRawPredict -d \\\n  '{\n    \"anthropic_version\": \"vertex-2023-10-16\",\n    \"messages\": [{\n      \"role\": \"user\",\n      \"content\": \"Hey Claude!\"\n    }],\n    \"max_tokens\": 100,\n  }'\n  ```\n</CodeGroup>\n\nSee our [client SDKs](/en/api/client-sdks) and the official [Vertex AI docs](https://cloud.google.com/vertex-ai/docs) for more details.\n\n## Activity logging\n\nVertex provides a [request-response logging service](https://cloud.google.com/vertex-ai/generative-ai/docs/multimodal/request-response-logging) that allows customers to log the prompts and completions associated with your usage.\n\nAnthropic recommends that you log your activity on at least a 30-day rolling basis in order to understand your activity and investigate any potential misuse.\n\n<Note>\n  Turning on this service does not give Google or Anthropic any access to your content.\n</Note>\n\n## Feature support\n\nYou can find all the features currently supported on Vertex [here](/en/api/overview).\n\n## Global vs regional endpoints\n\nStarting with **Claude Sonnet 4.5 and all future models**, Google Vertex AI offers two endpoint types:\n\n* **Global endpoints**: Dynamic routing for maximum availability\n* **Regional endpoints**: Guaranteed data routing through specific geographic regions\n\nRegional endpoints include a 10% pricing premium over global endpoints.\n\n<Note>\n  This applies to Claude Sonnet 4.5 and future models only. Older models (Claude Sonnet 4, Opus 4, and earlier) maintain their existing pricing structures.\n</Note>\n\n### When to use each option\n\n**Global endpoints (recommended):**\n\n* Provide maximum availability and uptime\n* Dynamically route requests to regions with available capacity\n* No pricing premium\n* Best for applications where data residency is flexible\n* Only supports pay-as-you-go traffic (provisioned throughput requires regional endpoints)\n\n**Regional endpoints:**\n\n* Route traffic through specific geographic regions\n* Required for data residency and compliance requirements\n* Support both pay-as-you-go and provisioned throughput\n* 10% pricing premium reflects infrastructure costs for dedicated regional capacity\n\n### Implementation\n\n**Using global endpoints (recommended):**\n\nSet the `region` parameter to `\"global\"` when initializing the client:\n\n<CodeGroup>\n  ```python Python theme={null}\n  from anthropic import AnthropicVertex\n\n  project_id = \"MY_PROJECT_ID\"\n  region = \"global\"\n\n  client = AnthropicVertex(project_id=project_id, region=region)\n\n  message = client.messages.create(\n      model=\"claude-sonnet-4-5@20250929\",\n      max_tokens=100,\n      messages=[\n          {\n              \"role\": \"user\",\n              \"content\": \"Hey Claude!\",\n          }\n      ],\n  )\n  print(message)\n  ```\n\n  ```typescript TypeScript theme={null}\n  import { AnthropicVertex } from '@anthropic-ai/vertex-sdk';\n\n  const projectId = 'MY_PROJECT_ID';\n  const region = 'global';\n\n  const client = new AnthropicVertex({\n    projectId,\n    region,\n  });\n\n  const result = await client.messages.create({\n    model: 'claude-sonnet-4-5@20250929',\n    max_tokens: 100,\n    messages: [\n      {\n        role: 'user',\n        content: 'Hey Claude!',\n      },\n    ],\n  });\n  ```\n</CodeGroup>\n\n**Using regional endpoints:**\n\nSpecify a specific region like `\"us-east1\"` or `\"europe-west1\"`:\n\n<CodeGroup>\n  ```python Python theme={null}\n  from anthropic import AnthropicVertex\n\n  project_id = \"MY_PROJECT_ID\"\n  region = \"us-east1\"  # Specify a specific region\n\n  client = AnthropicVertex(project_id=project_id, region=region)\n\n  message = client.messages.create(\n      model=\"claude-sonnet-4-5@20250929\",\n      max_tokens=100,\n      messages=[\n          {\n              \"role\": \"user\",\n              \"content\": \"Hey Claude!\",\n          }\n      ],\n  )\n  print(message)\n  ```\n\n  ```typescript TypeScript theme={null}\n  import { AnthropicVertex } from '@anthropic-ai/vertex-sdk';\n\n  const projectId = 'MY_PROJECT_ID';\n  const region = 'us-east1';  // Specify a specific region\n\n  const client = new AnthropicVertex({\n    projectId,\n    region,\n  });\n\n  const result = await client.messages.create({\n    model: 'claude-sonnet-4-5@20250929',\n    max_tokens: 100,\n    messages: [\n      {\n        role: 'user',\n        content: 'Hey Claude!',\n      },\n    ],\n  });\n  ```\n</CodeGroup>\n\n### Additional resources\n\n* **Google Vertex AI pricing:** [cloud.google.com/vertex-ai/generative-ai/pricing](https://cloud.google.com/vertex-ai/generative-ai/pricing)\n* **Claude models documentation:** [Claude on Vertex AI](https://cloud.google.com/vertex-ai/generative-ai/docs/partner-models/claude)\n* **Google blog post:** [Global endpoint for Claude models](https://cloud.google.com/blog/products/ai-machine-learning/global-endpoint-for-claude-models-generally-available-on-vertex-ai)\n* **Anthropic pricing details:** [Pricing documentation](/en/docs/about-claude/pricing#third-party-platform-pricing)",
  "content_length": 12218
}