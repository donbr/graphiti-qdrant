{
  "title": "Slash Commands in the SDK",
  "source_url": "https://docs.claude.com/en/docs/agent-sdk/slash-commands",
  "content": "Learn how to use slash commands to control Claude Code sessions through the SDK\n\nSlash commands provide a way to control Claude Code sessions with special commands that start with `/`. These commands can be sent through the SDK to perform actions like clearing conversation history, compacting messages, or getting help.\n\n## Discovering Available Slash Commands\n\nThe Claude Agent SDK provides information about available slash commands in the system initialization message. Access this information when your session starts:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  for await (const message of query({\n    prompt: \"Hello Claude\",\n    options: { maxTurns: 1 }\n  })) {\n    if (message.type === \"system\" && message.subtype === \"init\") {\n      console.log(\"Available slash commands:\", message.slash_commands);\n      // Example output: [\"/compact\", \"/clear\", \"/help\"]\n    }\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      async for message in query(\n          prompt=\"Hello Claude\",\n          options={\"max_turns\": 1}\n      ):\n          if message.type == \"system\" and message.subtype == \"init\":\n              print(\"Available slash commands:\", message.slash_commands)\n              # Example output: [\"/compact\", \"/clear\", \"/help\"]\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n## Sending Slash Commands\n\nSend slash commands by including them in your prompt string, just like regular text:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  // Send a slash command\n  for await (const message of query({\n    prompt: \"/compact\",\n    options: { maxTurns: 1 }\n  })) {\n    if (message.type === \"result\") {\n      console.log(\"Command executed:\", message.result);\n    }\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      # Send a slash command\n      async for message in query(\n          prompt=\"/compact\",\n          options={\"max_turns\": 1}\n      ):\n          if message.type == \"result\":\n              print(\"Command executed:\", message.result)\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n## Common Slash Commands\n\n### `/compact` - Compact Conversation History\n\nThe `/compact` command reduces the size of your conversation history by summarizing older messages while preserving important context:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  for await (const message of query({\n    prompt: \"/compact\",\n    options: { maxTurns: 1 }\n  })) {\n    if (message.type === \"system\" && message.subtype === \"compact_boundary\") {\n      console.log(\"Compaction completed\");\n      console.log(\"Pre-compaction tokens:\", message.compact_metadata.pre_tokens);\n      console.log(\"Trigger:\", message.compact_metadata.trigger);\n    }\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      async for message in query(\n          prompt=\"/compact\",\n          options={\"max_turns\": 1}\n      ):\n          if (message.type == \"system\" and \n              message.subtype == \"compact_boundary\"):\n              print(\"Compaction completed\")\n              print(\"Pre-compaction tokens:\", \n                    message.compact_metadata.pre_tokens)\n              print(\"Trigger:\", message.compact_metadata.trigger)\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n### `/clear` - Clear Conversation\n\nThe `/clear` command starts a fresh conversation by clearing all previous history:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  // Clear conversation and start fresh\n  for await (const message of query({\n    prompt: \"/clear\",\n    options: { maxTurns: 1 }\n  })) {\n    if (message.type === \"system\" && message.subtype === \"init\") {\n      console.log(\"Conversation cleared, new session started\");\n      console.log(\"Session ID:\", message.session_id);\n    }\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      # Clear conversation and start fresh\n      async for message in query(\n          prompt=\"/clear\",\n          options={\"max_turns\": 1}\n      ):\n          if message.type == \"system\" and message.subtype == \"init\":\n              print(\"Conversation cleared, new session started\")\n              print(\"Session ID:\", message.session_id)\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n## Creating Custom Slash Commands\n\nIn addition to using built-in slash commands, you can create your own custom commands that are available through the SDK. Custom commands are defined as markdown files in specific directories, similar to how subagents are configured.\n\n### File Locations\n\nCustom slash commands are stored in designated directories based on their scope:\n\n* **Project commands**: `.claude/commands/` - Available only in the current project\n* **Personal commands**: `~/.claude/commands/` - Available across all your projects\n\n### File Format\n\nEach custom command is a markdown file where:\n\n* The filename (without `.md` extension) becomes the command name\n* The file content defines what the command does\n* Optional YAML frontmatter provides configuration\n\n#### Basic Example\n\nCreate `.claude/commands/refactor.md`:\n\n```markdown  theme={null}\nRefactor the selected code to improve readability and maintainability.\nFocus on clean code principles and best practices.\n```\n\nThis creates the `/refactor` command that you can use through the SDK.\n\n#### With Frontmatter\n\nCreate `.claude/commands/security-check.md`:\n\n```markdown  theme={null}\n---\nallowed-tools: Read, Grep, Glob\ndescription: Run security vulnerability scan\nmodel: claude-sonnet-4-5-20250929\n---\n\nAnalyze the codebase for security vulnerabilities including:\n- SQL injection risks\n- XSS vulnerabilities\n- Exposed credentials\n- Insecure configurations\n```\n\n### Using Custom Commands in the SDK\n\nOnce defined in the filesystem, custom commands are automatically available through the SDK:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  // Use a custom command\n  for await (const message of query({\n    prompt: \"/refactor src/auth/login.ts\",\n    options: { maxTurns: 3 }\n  })) {\n    if (message.type === \"assistant\") {\n      console.log(\"Refactoring suggestions:\", message.message);\n    }\n  }\n\n  // Custom commands appear in the slash_commands list\n  for await (const message of query({\n    prompt: \"Hello\",\n    options: { maxTurns: 1 }\n  })) {\n    if (message.type === \"system\" && message.subtype === \"init\") {\n      // Will include both built-in and custom commands\n      console.log(\"Available commands:\", message.slash_commands);\n      // Example: [\"/compact\", \"/clear\", \"/help\", \"/refactor\", \"/security-check\"]\n    }\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      # Use a custom command\n      async for message in query(\n          prompt=\"/refactor src/auth/login.py\",\n          options={\"max_turns\": 3}\n      ):\n          if message.type == \"assistant\":\n              print(\"Refactoring suggestions:\", message.message)\n      \n      # Custom commands appear in the slash_commands list\n      async for message in query(\n          prompt=\"Hello\",\n          options={\"max_turns\": 1}\n      ):\n          if message.type == \"system\" and message.subtype == \"init\":\n              # Will include both built-in and custom commands\n              print(\"Available commands:\", message.slash_commands)\n              # Example: [\"/compact\", \"/clear\", \"/help\", \"/refactor\", \"/security-check\"]\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n### Advanced Features\n\n#### Arguments and Placeholders\n\nCustom commands support dynamic arguments using placeholders:\n\nCreate `.claude/commands/fix-issue.md`:\n\n```markdown  theme={null}\n---\nargument-hint: [issue-number] [priority]\ndescription: Fix a GitHub issue\n---\n\nFix issue #$1 with priority $2.\nCheck the issue description and implement the necessary changes.\n```\n\nUse in SDK:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  // Pass arguments to custom command\n  for await (const message of query({\n    prompt: \"/fix-issue 123 high\",\n    options: { maxTurns: 5 }\n  })) {\n    // Command will process with $1=\"123\" and $2=\"high\"\n    if (message.type === \"result\") {\n      console.log(\"Issue fixed:\", message.result);\n    }\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      # Pass arguments to custom command\n      async for message in query(\n          prompt=\"/fix-issue 123 high\",\n          options={\"max_turns\": 5}\n      ):\n          # Command will process with $1=\"123\" and $2=\"high\"\n          if message.type == \"result\":\n              print(\"Issue fixed:\", message.result)\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n#### Bash Command Execution\n\nCustom commands can execute bash commands and include their output:\n\nCreate `.claude/commands/git-commit.md`:\n\n```markdown  theme={null}\n---\nallowed-tools: Bash(git add:*), Bash(git status:*), Bash(git commit:*)\ndescription: Create a git commit\n---\n\n## Context\n\n- Current status: !`git status`\n- Current diff: !`git diff HEAD`\n\n## Task\n\nCreate a git commit with appropriate message based on the changes.\n```\n\n#### File References\n\nInclude file contents using the `@` prefix:\n\nCreate `.claude/commands/review-config.md`:\n\n```markdown  theme={null}\n---\ndescription: Review configuration files\n---\n\nReview the following configuration files for issues:\n- Package config: @package.json\n- TypeScript config: @tsconfig.json\n- Environment config: @.env\n\nCheck for security issues, outdated dependencies, and misconfigurations.\n```\n\n### Organization with Namespacing\n\nOrganize commands in subdirectories for better structure:\n\n```bash  theme={null}\n.claude/commands/\n├── frontend/\n│   ├── component.md      # Creates /component (project:frontend)\n│   └── style-check.md     # Creates /style-check (project:frontend)\n├── backend/\n│   ├── api-test.md        # Creates /api-test (project:backend)\n│   └── db-migrate.md      # Creates /db-migrate (project:backend)\n└── review.md              # Creates /review (project)\n```\n\nThe subdirectory appears in the command description but doesn't affect the command name itself.\n\n### Practical Examples\n\n#### Code Review Command\n\nCreate `.claude/commands/code-review.md`:\n\n```markdown  theme={null}\n---\nallowed-tools: Read, Grep, Glob, Bash(git diff:*)\ndescription: Comprehensive code review\n---\n\n## Changed Files\n!`git diff --name-only HEAD~1`\n\n## Detailed Changes\n!`git diff HEAD~1`\n\n## Review Checklist\n\nReview the above changes for:\n1. Code quality and readability\n2. Security vulnerabilities\n3. Performance implications\n4. Test coverage\n5. Documentation completeness\n\nProvide specific, actionable feedback organized by priority.\n```\n\n#### Test Runner Command\n\nCreate `.claude/commands/test.md`:\n\n```markdown  theme={null}\n---\nallowed-tools: Bash, Read, Edit\nargument-hint: [test-pattern]\ndescription: Run tests with optional pattern\n---\n\nRun tests matching pattern: $ARGUMENTS\n\n1. Detect the test framework (Jest, pytest, etc.)\n2. Run tests with the provided pattern\n3. If tests fail, analyze and fix them\n4. Re-run to verify fixes\n```\n\nUse these commands through the SDK:\n\n<CodeGroup>\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  // Run code review\n  for await (const message of query({\n    prompt: \"/code-review\",\n    options: { maxTurns: 3 }\n  })) {\n    // Process review feedback\n  }\n\n  // Run specific tests\n  for await (const message of query({\n    prompt: \"/test auth\",\n    options: { maxTurns: 5 }\n  })) {\n    // Handle test results\n  }\n  ```\n\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query\n\n  async def main():\n      # Run code review\n      async for message in query(\n          prompt=\"/code-review\",\n          options={\"max_turns\": 3}\n      ):\n          # Process review feedback\n          pass\n      \n      # Run specific tests\n      async for message in query(\n          prompt=\"/test auth\",\n          options={\"max_turns\": 5}\n      ):\n          # Handle test results\n          pass\n\n  asyncio.run(main())\n  ```\n</CodeGroup>\n\n## See Also\n\n* [Slash Commands](https://code.claude.com/docs/en/slash-commands) - Complete slash command documentation\n* [Subagents in the SDK](/en/docs/agent-sdk/subagents) - Similar filesystem-based configuration for subagents\n* [TypeScript SDK reference](/en/docs/agent-sdk/typescript) - Complete API documentation\n* [SDK overview](/en/docs/agent-sdk/overview) - General SDK concepts\n* [CLI reference](https://code.claude.com/docs/en/cli-reference) - Command-line interface",
  "content_length": 12967
}