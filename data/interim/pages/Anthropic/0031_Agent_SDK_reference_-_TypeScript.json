{
  "title": "Agent SDK reference - TypeScript",
  "source_url": "https://docs.claude.com/en/docs/agent-sdk/typescript",
  "content": "Complete API reference for the TypeScript Agent SDK, including all functions, types, and interfaces.\n\n<script src=\"/components/typescript-sdk-type-links.js\" defer />\n\n## Installation\n\n```bash  theme={null}\nnpm install @anthropic-ai/claude-agent-sdk\n```\n\n## Functions\n\n### `query()`\n\nThe primary function for interacting with Claude Code. Creates an async generator that streams messages as they arrive.\n\n```ts  theme={null}\nfunction query({\n  prompt,\n  options\n}: {\n  prompt: string | AsyncIterable<SDKUserMessage>;\n  options?: Options;\n}): Query\n```\n\n#### Parameters\n\n| Parameter | Type                                                             | Description                                                       |\n| :-------- | :--------------------------------------------------------------- | :---------------------------------------------------------------- |\n| `prompt`  | `string \\| AsyncIterable<`[`SDKUserMessage`](#sdkusermessage)`>` | The input prompt as a string or async iterable for streaming mode |\n| `options` | [`Options`](#options)                                            | Optional configuration object (see Options type below)            |\n\n#### Returns\n\nReturns a [`Query`](#query-1) object that extends `AsyncGenerator<`[`SDKMessage`](#sdkmessage)`, void>` with additional methods.\n\n### `tool()`\n\nCreates a type-safe MCP tool definition for use with SDK MCP servers.\n\n```ts  theme={null}\nfunction tool<Schema extends ZodRawShape>(\n  name: string,\n  description: string,\n  inputSchema: Schema,\n  handler: (args: z.infer<ZodObject<Schema>>, extra: unknown) => Promise<CallToolResult>\n): SdkMcpToolDefinition<Schema>\n```\n\n#### Parameters\n\n| Parameter     | Type                                                              | Description                                     |\n| :------------ | :---------------------------------------------------------------- | :---------------------------------------------- |\n| `name`        | `string`                                                          | The name of the tool                            |\n| `description` | `string`                                                          | A description of what the tool does             |\n| `inputSchema` | `Schema extends ZodRawShape`                                      | Zod schema defining the tool's input parameters |\n| `handler`     | `(args, extra) => Promise<`[`CallToolResult`](#calltoolresult)`>` | Async function that executes the tool logic     |\n\n### `createSdkMcpServer()`\n\nCreates an MCP server instance that runs in the same process as your application.\n\n```ts  theme={null}\nfunction createSdkMcpServer(options: {\n  name: string;\n  version?: string;\n  tools?: Array<SdkMcpToolDefinition<any>>;\n}): McpSdkServerConfigWithInstance\n```\n\n#### Parameters\n\n| Parameter         | Type                          | Description                                              |\n| :---------------- | :---------------------------- | :------------------------------------------------------- |\n| `options.name`    | `string`                      | The name of the MCP server                               |\n| `options.version` | `string`                      | Optional version string                                  |\n| `options.tools`   | `Array<SdkMcpToolDefinition>` | Array of tool definitions created with [`tool()`](#tool) |\n\n## Types\n\n### `Options`\n\nConfiguration object for the `query()` function.\n\n| Property                     | Type                                                                                              | Default                    | Description                                                                                                                                                                                                                                               |\n| :--------------------------- | :------------------------------------------------------------------------------------------------ | :------------------------- | :-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |\n| `abortController`            | `AbortController`                                                                                 | `new AbortController()`    | Controller for cancelling operations                                                                                                                                                                                                                      |\n| `additionalDirectories`      | `string[]`                                                                                        | `[]`                       | Additional directories Claude can access                                                                                                                                                                                                                  |\n| `agents`                     | `Record<string, [`AgentDefinition`](#agentdefinition)>`                                           | `undefined`                | Programmatically define subagents                                                                                                                                                                                                                         |\n| `allowedTools`               | `string[]`                                                                                        | All tools                  | List of allowed tool names                                                                                                                                                                                                                                |\n| `canUseTool`                 | [`CanUseTool`](#canusetool)                                                                       | `undefined`                | Custom permission function for tool usage                                                                                                                                                                                                                 |\n| `continue`                   | `boolean`                                                                                         | `false`                    | Continue the most recent conversation                                                                                                                                                                                                                     |\n| `cwd`                        | `string`                                                                                          | `process.cwd()`            | Current working directory                                                                                                                                                                                                                                 |\n| `disallowedTools`            | `string[]`                                                                                        | `[]`                       | List of disallowed tool names                                                                                                                                                                                                                             |\n| `env`                        | `Dict<string>`                                                                                    | `process.env`              | Environment variables                                                                                                                                                                                                                                     |\n| `executable`                 | `'bun' \\| 'deno' \\| 'node'`                                                                       | Auto-detected              | JavaScript runtime to use                                                                                                                                                                                                                                 |\n| `executableArgs`             | `string[]`                                                                                        | `[]`                       | Arguments to pass to the executable                                                                                                                                                                                                                       |\n| `extraArgs`                  | `Record<string, string \\| null>`                                                                  | `{}`                       | Additional arguments                                                                                                                                                                                                                                      |\n| `fallbackModel`              | `string`                                                                                          | `undefined`                | Model to use if primary fails                                                                                                                                                                                                                             |\n| `forkSession`                | `boolean`                                                                                         | `false`                    | When resuming with `resume`, fork to a new session ID instead of continuing the original session                                                                                                                                                          |\n| `hooks`                      | `Partial<Record<`[`HookEvent`](#hookevent)`, `[`HookCallbackMatcher`](#hookcallbackmatcher)`[]>>` | `{}`                       | Hook callbacks for events                                                                                                                                                                                                                                 |\n| `includePartialMessages`     | `boolean`                                                                                         | `false`                    | Include partial message events                                                                                                                                                                                                                            |\n| `maxThinkingTokens`          | `number`                                                                                          | `undefined`                | Maximum tokens for thinking process                                                                                                                                                                                                                       |\n| `maxTurns`                   | `number`                                                                                          | `undefined`                | Maximum conversation turns                                                                                                                                                                                                                                |\n| `mcpServers`                 | `Record<string, [`McpServerConfig`](#mcpserverconfig)>`                                           | `{}`                       | MCP server configurations                                                                                                                                                                                                                                 |\n| `model`                      | `string`                                                                                          | Default from CLI           | Claude model to use                                                                                                                                                                                                                                       |\n| `outputFormat`               | `{ type: 'json_schema', schema: JSONSchema }`                                                     | `undefined`                | Define output format for agent results. See [Structured outputs](/en/docs/agent-sdk/structured-outputs) for details                                                                                                                                       |\n| `pathToClaudeCodeExecutable` | `string`                                                                                          | Auto-detected              | Path to Claude Code executable                                                                                                                                                                                                                            |\n| `permissionMode`             | [`PermissionMode`](#permissionmode)                                                               | `'default'`                | Permission mode for the session                                                                                                                                                                                                                           |\n| `permissionPromptToolName`   | `string`                                                                                          | `undefined`                | MCP tool name for permission prompts                                                                                                                                                                                                                      |\n| `plugins`                    | [`SdkPluginConfig`](#sdkpluginconfig)`[]`                                                         | `[]`                       | Load custom plugins from local paths. See [Plugins](/en/docs/agent-sdk/plugins) for details                                                                                                                                                               |\n| `resume`                     | `string`                                                                                          | `undefined`                | Session ID to resume                                                                                                                                                                                                                                      |\n| `settingSources`             | [`SettingSource`](#settingsource)`[]`                                                             | `[]` (no settings)         | Control which filesystem settings to load. When omitted, no settings are loaded. **Note:** Must include `'project'` to load CLAUDE.md files                                                                                                               |\n| `stderr`                     | `(data: string) => void`                                                                          | `undefined`                | Callback for stderr output                                                                                                                                                                                                                                |\n| `strictMcpConfig`            | `boolean`                                                                                         | `false`                    | Enforce strict MCP validation                                                                                                                                                                                                                             |\n| `systemPrompt`               | `string \\| { type: 'preset'; preset: 'claude_code'; append?: string }`                            | `undefined` (empty prompt) | System prompt configuration. Pass a string for custom prompt, or `{ type: 'preset', preset: 'claude_code' }` to use Claude Code's system prompt. When using the preset object form, add `append` to extend the system prompt with additional instructions |\n\n### `Query`\n\nInterface returned by the `query()` function.\n\n```ts  theme={null}\ninterface Query extends AsyncGenerator<SDKMessage, void> {\n  interrupt(): Promise<void>;\n  setPermissionMode(mode: PermissionMode): Promise<void>;\n}\n```\n\n#### Methods\n\n| Method                | Description                                                          |\n| :-------------------- | :------------------------------------------------------------------- |\n| `interrupt()`         | Interrupts the query (only available in streaming input mode)        |\n| `setPermissionMode()` | Changes the permission mode (only available in streaming input mode) |\n\n### `AgentDefinition`\n\nConfiguration for a subagent defined programmatically.\n\n```ts  theme={null}\ntype AgentDefinition = {\n  description: string;\n  tools?: string[];\n  prompt: string;\n  model?: 'sonnet' | 'opus' | 'haiku' | 'inherit';\n}\n```\n\n| Field         | Required | Description                                                    |\n| :------------ | :------- | :------------------------------------------------------------- |\n| `description` | Yes      | Natural language description of when to use this agent         |\n| `tools`       | No       | Array of allowed tool names. If omitted, inherits all tools    |\n| `prompt`      | Yes      | The agent's system prompt                                      |\n| `model`       | No       | Model override for this agent. If omitted, uses the main model |\n\n### `SettingSource`\n\nControls which filesystem-based configuration sources the SDK loads settings from.\n\n```ts  theme={null}\ntype SettingSource = 'user' | 'project' | 'local';\n```\n\n| Value       | Description                                  | Location                      |\n| :---------- | :------------------------------------------- | :---------------------------- |\n| `'user'`    | Global user settings                         | `~/.claude/settings.json`     |\n| `'project'` | Shared project settings (version controlled) | `.claude/settings.json`       |\n| `'local'`   | Local project settings (gitignored)          | `.claude/settings.local.json` |\n\n#### Default behavior\n\nWhen `settingSources` is **omitted** or **undefined**, the SDK does **not** load any filesystem settings. This provides isolation for SDK applications.\n\n#### Why use settingSources?\n\n**Load all filesystem settings (legacy behavior):**\n\n```typescript  theme={null}\n// Load all settings like SDK v0.0.x did\nconst result = query({\n  prompt: \"Analyze this code\",\n  options: {\n    settingSources: ['user', 'project', 'local']  // Load all settings\n  }\n});\n```\n\n**Load only specific setting sources:**\n\n```typescript  theme={null}\n// Load only project settings, ignore user and local\nconst result = query({\n  prompt: \"Run CI checks\",\n  options: {\n    settingSources: ['project']  // Only .claude/settings.json\n  }\n});\n```\n\n**Testing and CI environments:**\n\n```typescript  theme={null}\n// Ensure consistent behavior in CI by excluding local settings\nconst result = query({\n  prompt: \"Run tests\",\n  options: {\n    settingSources: ['project'],  // Only team-shared settings\n    permissionMode: 'bypassPermissions'\n  }\n});\n```\n\n**SDK-only applications:**\n\n```typescript  theme={null}\n// Define everything programmatically (default behavior)\n// No filesystem dependencies - settingSources defaults to []\nconst result = query({\n  prompt: \"Review this PR\",\n  options: {\n    // settingSources: [] is the default, no need to specify\n    agents: { /* ... */ },\n    mcpServers: { /* ... */ },\n    allowedTools: ['Read', 'Grep', 'Glob']\n  }\n});\n```\n\n**Loading CLAUDE.md project instructions:**\n\n```typescript  theme={null}\n// Load project settings to include CLAUDE.md files\nconst result = query({\n  prompt: \"Add a new feature following project conventions\",\n  options: {\n    systemPrompt: {\n      type: 'preset',\n      preset: 'claude_code'  // Required to use CLAUDE.md\n    },\n    settingSources: ['project'],  // Loads CLAUDE.md from project directory\n    allowedTools: ['Read', 'Write', 'Edit']\n  }\n});\n```\n\n#### Settings precedence\n\nWhen multiple sources are loaded, settings are merged with this precedence (highest to lowest):\n\n1. Local settings (`.claude/settings.local.json`)\n2. Project settings (`.claude/settings.json`)\n3. User settings (`~/.claude/settings.json`)\n\nProgrammatic options (like `agents`, `allowedTools`) always override filesystem settings.\n\n### `PermissionMode`\n\n```ts  theme={null}\ntype PermissionMode =\n  | 'default'           // Standard permission behavior\n  | 'acceptEdits'       // Auto-accept file edits\n  | 'bypassPermissions' // Bypass all permission checks\n  | 'plan'              // Planning mode - no execution\n```\n\n### `CanUseTool`\n\nCustom permission function type for controlling tool usage.\n\n```ts  theme={null}\ntype CanUseTool = (\n  toolName: string,\n  input: ToolInput,\n  options: {\n    signal: AbortSignal;\n    suggestions?: PermissionUpdate[];\n  }\n) => Promise<PermissionResult>;\n```\n\n### `PermissionResult`\n\nResult of a permission check.\n\n```ts  theme={null}\ntype PermissionResult = \n  | {\n      behavior: 'allow';\n      updatedInput: ToolInput;\n      updatedPermissions?: PermissionUpdate[];\n    }\n  | {\n      behavior: 'deny';\n      message: string;\n      interrupt?: boolean;\n    }\n```\n\n### `McpServerConfig`\n\nConfiguration for MCP servers.\n\n```ts  theme={null}\ntype McpServerConfig = \n  | McpStdioServerConfig\n  | McpSSEServerConfig\n  | McpHttpServerConfig\n  | McpSdkServerConfigWithInstance;\n```\n\n#### `McpStdioServerConfig`\n\n```ts  theme={null}\ntype McpStdioServerConfig = {\n  type?: 'stdio';\n  command: string;\n  args?: string[];\n  env?: Record<string, string>;\n}\n```\n\n#### `McpSSEServerConfig`\n\n```ts  theme={null}\ntype McpSSEServerConfig = {\n  type: 'sse';\n  url: string;\n  headers?: Record<string, string>;\n}\n```\n\n#### `McpHttpServerConfig`\n\n```ts  theme={null}\ntype McpHttpServerConfig = {\n  type: 'http';\n  url: string;\n  headers?: Record<string, string>;\n}\n```\n\n#### `McpSdkServerConfigWithInstance`\n\n```ts  theme={null}\ntype McpSdkServerConfigWithInstance = {\n  type: 'sdk';\n  name: string;\n  instance: McpServer;\n}\n```\n\n### `SdkPluginConfig`\n\nConfiguration for loading plugins in the SDK.\n\n```ts  theme={null}\ntype SdkPluginConfig = {\n  type: 'local';\n  path: string;\n}\n```\n\n| Field  | Type      | Description                                                |\n| :----- | :-------- | :--------------------------------------------------------- |\n| `type` | `'local'` | Must be `'local'` (only local plugins currently supported) |\n| `path` | `string`  | Absolute or relative path to the plugin directory          |\n\n**Example:**\n\n```ts  theme={null}\nplugins: [\n  { type: 'local', path: './my-plugin' },\n  { type: 'local', path: '/absolute/path/to/plugin' }\n]\n```\n\nFor complete information on creating and using plugins, see [Plugins](/en/docs/agent-sdk/plugins).\n\n## Message Types\n\n### `SDKMessage`\n\nUnion type of all possible messages returned by the query.\n\n```ts  theme={null}\ntype SDKMessage = \n  | SDKAssistantMessage\n  | SDKUserMessage\n  | SDKUserMessageReplay\n  | SDKResultMessage\n  | SDKSystemMessage\n  | SDKPartialAssistantMessage\n  | SDKCompactBoundaryMessage;\n```\n\n### `SDKAssistantMessage`\n\nAssistant response message.\n\n```ts  theme={null}\ntype SDKAssistantMessage = {\n  type: 'assistant';\n  uuid: UUID;\n  session_id: string;\n  message: APIAssistantMessage; // From Anthropic SDK\n  parent_tool_use_id: string | null;\n}\n```\n\n### `SDKUserMessage`\n\nUser input message.\n\n```ts  theme={null}\ntype SDKUserMessage = {\n  type: 'user';\n  uuid?: UUID;\n  session_id: string;\n  message: APIUserMessage; // From Anthropic SDK\n  parent_tool_use_id: string | null;\n}\n```\n\n### `SDKUserMessageReplay`\n\nReplayed user message with required UUID.\n\n```ts  theme={null}\ntype SDKUserMessageReplay = {\n  type: 'user';\n  uuid: UUID;\n  session_id: string;\n  message: APIUserMessage;\n  parent_tool_use_id: string | null;\n}\n```\n\n### `SDKResultMessage`\n\nFinal result message.\n\n```ts  theme={null}\ntype SDKResultMessage = \n  | {\n      type: 'result';\n      subtype: 'success';\n      uuid: UUID;\n      session_id: string;\n      duration_ms: number;\n      duration_api_ms: number;\n      is_error: boolean;\n      num_turns: number;\n      result: string;\n      total_cost_usd: number;\n      usage: NonNullableUsage;\n      permission_denials: SDKPermissionDenial[];\n    }\n  | {\n      type: 'result';\n      subtype: 'error_max_turns' | 'error_during_execution';\n      uuid: UUID;\n      session_id: string;\n      duration_ms: number;\n      duration_api_ms: number;\n      is_error: boolean;\n      num_turns: number;\n      total_cost_usd: number;\n      usage: NonNullableUsage;\n      permission_denials: SDKPermissionDenial[];\n    }\n```\n\n### `SDKSystemMessage`\n\nSystem initialization message.\n\n```ts  theme={null}\ntype SDKSystemMessage = {\n  type: 'system';\n  subtype: 'init';\n  uuid: UUID;\n  session_id: string;\n  apiKeySource: ApiKeySource;\n  cwd: string;\n  tools: string[];\n  mcp_servers: {\n    name: string;\n    status: string;\n  }[];\n  model: string;\n  permissionMode: PermissionMode;\n  slash_commands: string[];\n  output_style: string;\n}\n```\n\n### `SDKPartialAssistantMessage`\n\nStreaming partial message (only when `includePartialMessages` is true).\n\n```ts  theme={null}\ntype SDKPartialAssistantMessage = {\n  type: 'stream_event';\n  event: RawMessageStreamEvent; // From Anthropic SDK\n  parent_tool_use_id: string | null;\n  uuid: UUID;\n  session_id: string;\n}\n```\n\n### `SDKCompactBoundaryMessage`\n\nMessage indicating a conversation compaction boundary.\n\n```ts  theme={null}\ntype SDKCompactBoundaryMessage = {\n  type: 'system';\n  subtype: 'compact_boundary';\n  uuid: UUID;\n  session_id: string;\n  compact_metadata: {\n    trigger: 'manual' | 'auto';\n    pre_tokens: number;\n  };\n}\n```\n\n### `SDKPermissionDenial`\n\nInformation about a denied tool use.\n\n```ts  theme={null}\ntype SDKPermissionDenial = {\n  tool_name: string;\n  tool_use_id: string;\n  tool_input: ToolInput;\n}\n```\n\n## Hook Types\n\n### `HookEvent`\n\nAvailable hook events.\n\n```ts  theme={null}\ntype HookEvent = \n  | 'PreToolUse'\n  | 'PostToolUse'\n  | 'Notification'\n  | 'UserPromptSubmit'\n  | 'SessionStart'\n  | 'SessionEnd'\n  | 'Stop'\n  | 'SubagentStop'\n  | 'PreCompact';\n```\n\n### `HookCallback`\n\nHook callback function type.\n\n```ts  theme={null}\ntype HookCallback = (\n  input: HookInput, // Union of all hook input types\n  toolUseID: string | undefined,\n  options: { signal: AbortSignal }\n) => Promise<HookJSONOutput>;\n```\n\n### `HookCallbackMatcher`\n\nHook configuration with optional matcher.\n\n```ts  theme={null}\ninterface HookCallbackMatcher {\n  matcher?: string;\n  hooks: HookCallback[];\n}\n```\n\n### `HookInput`\n\nUnion type of all hook input types.\n\n```ts  theme={null}\ntype HookInput = \n  | PreToolUseHookInput\n  | PostToolUseHookInput\n  | NotificationHookInput\n  | UserPromptSubmitHookInput\n  | SessionStartHookInput\n  | SessionEndHookInput\n  | StopHookInput\n  | SubagentStopHookInput\n  | PreCompactHookInput;\n```\n\n### `BaseHookInput`\n\nBase interface that all hook input types extend.\n\n```ts  theme={null}\ntype BaseHookInput = {\n  session_id: string;\n  transcript_path: string;\n  cwd: string;\n  permission_mode?: string;\n}\n```\n\n#### `PreToolUseHookInput`\n\n```ts  theme={null}\ntype PreToolUseHookInput = BaseHookInput & {\n  hook_event_name: 'PreToolUse';\n  tool_name: string;\n  tool_input: ToolInput;\n}\n```\n\n#### `PostToolUseHookInput`\n\n```ts  theme={null}\ntype PostToolUseHookInput = BaseHookInput & {\n  hook_event_name: 'PostToolUse';\n  tool_name: string;\n  tool_input: ToolInput;\n  tool_response: ToolOutput;\n}\n```\n\n#### `NotificationHookInput`\n\n```ts  theme={null}\ntype NotificationHookInput = BaseHookInput & {\n  hook_event_name: 'Notification';\n  message: string;\n  title?: string;\n}\n```\n\n#### `UserPromptSubmitHookInput`\n\n```ts  theme={null}\ntype UserPromptSubmitHookInput = BaseHookInput & {\n  hook_event_name: 'UserPromptSubmit';\n  prompt: string;\n}\n```\n\n#### `SessionStartHookInput`\n\n```ts  theme={null}\ntype SessionStartHookInput = BaseHookInput & {\n  hook_event_name: 'SessionStart';\n  source: 'startup' | 'resume' | 'clear' | 'compact';\n}\n```\n\n#### `SessionEndHookInput`\n\n```ts  theme={null}\ntype SessionEndHookInput = BaseHookInput & {\n  hook_event_name: 'SessionEnd';\n  reason: 'clear' | 'logout' | 'prompt_input_exit' | 'other';\n}\n```\n\n#### `StopHookInput`\n\n```ts  theme={null}\ntype StopHookInput = BaseHookInput & {\n  hook_event_name: 'Stop';\n  stop_hook_active: boolean;\n}\n```\n\n#### `SubagentStopHookInput`\n\n```ts  theme={null}\ntype SubagentStopHookInput = BaseHookInput & {\n  hook_event_name: 'SubagentStop';\n  stop_hook_active: boolean;\n}\n```\n\n#### `PreCompactHookInput`\n\n```ts  theme={null}\ntype PreCompactHookInput = BaseHookInput & {\n  hook_event_name: 'PreCompact';\n  trigger: 'manual' | 'auto';\n  custom_instructions: string | null;\n}\n```\n\n### `HookJSONOutput`\n\nHook return value.\n\n```ts  theme={null}\ntype HookJSONOutput = AsyncHookJSONOutput | SyncHookJSONOutput;\n```\n\n#### `AsyncHookJSONOutput`\n\n```ts  theme={null}\ntype AsyncHookJSONOutput = {\n  async: true;\n  asyncTimeout?: number;\n}\n```\n\n#### `SyncHookJSONOutput`\n\n```ts  theme={null}\ntype SyncHookJSONOutput = {\n  continue?: boolean;\n  suppressOutput?: boolean;\n  stopReason?: string;\n  decision?: 'approve' | 'block';\n  systemMessage?: string;\n  reason?: string;\n  hookSpecificOutput?:\n    | {\n        hookEventName: 'PreToolUse';\n        permissionDecision?: 'allow' | 'deny' | 'ask';\n        permissionDecisionReason?: string;\n      }\n    | {\n        hookEventName: 'UserPromptSubmit';\n        additionalContext?: string;\n      }\n    | {\n        hookEventName: 'SessionStart';\n        additionalContext?: string;\n      }\n    | {\n        hookEventName: 'PostToolUse';\n        additionalContext?: string;\n      };\n}\n```\n\n## Tool Input Types\n\nDocumentation of input schemas for all built-in Claude Code tools. These types are exported from `@anthropic-ai/claude-agent-sdk` and can be used for type-safe tool interactions.\n\n### `ToolInput`\n\n**Note:** This is a documentation-only type for clarity. It represents the union of all tool input types.\n\n```ts  theme={null}\ntype ToolInput = \n  | AgentInput\n  | BashInput\n  | BashOutputInput\n  | FileEditInput\n  | FileReadInput\n  | FileWriteInput\n  | GlobInput\n  | GrepInput\n  | KillShellInput\n  | NotebookEditInput\n  | WebFetchInput\n  | WebSearchInput\n  | TodoWriteInput\n  | ExitPlanModeInput\n  | ListMcpResourcesInput\n  | ReadMcpResourceInput;\n```\n\n### Task\n\n**Tool name:** `Task`\n\n```ts  theme={null}\ninterface AgentInput {\n  /**\n   * A short (3-5 word) description of the task\n   */\n  description: string;\n  /**\n   * The task for the agent to perform\n   */\n  prompt: string;\n  /**\n   * The type of specialized agent to use for this task\n   */\n  subagent_type: string;\n}\n```\n\nLaunches a new agent to handle complex, multi-step tasks autonomously.\n\n### Bash\n\n**Tool name:** `Bash`\n\n```ts  theme={null}\ninterface BashInput {\n  /**\n   * The command to execute\n   */\n  command: string;\n  /**\n   * Optional timeout in milliseconds (max 600000)\n   */\n  timeout?: number;\n  /**\n   * Clear, concise description of what this command does in 5-10 words\n   */\n  description?: string;\n  /**\n   * Set to true to run this command in the background\n   */\n  run_in_background?: boolean;\n}\n```\n\nExecutes bash commands in a persistent shell session with optional timeout and background execution.\n\n### BashOutput\n\n**Tool name:** `BashOutput`\n\n```ts  theme={null}\ninterface BashOutputInput {\n  /**\n   * The ID of the background shell to retrieve output from\n   */\n  bash_id: string;\n  /**\n   * Optional regex to filter output lines\n   */\n  filter?: string;\n}\n```\n\nRetrieves output from a running or completed background bash shell.\n\n### Edit\n\n**Tool name:** `Edit`\n\n```ts  theme={null}\ninterface FileEditInput {\n  /**\n   * The absolute path to the file to modify\n   */\n  file_path: string;\n  /**\n   * The text to replace\n   */\n  old_string: string;\n  /**\n   * The text to replace it with (must be different from old_string)\n   */\n  new_string: string;\n  /**\n   * Replace all occurrences of old_string (default false)\n   */\n  replace_all?: boolean;\n}\n```\n\nPerforms exact string replacements in files.\n\n### Read\n\n**Tool name:** `Read`\n\n```ts  theme={null}\ninterface FileReadInput {\n  /**\n   * The absolute path to the file to read\n   */\n  file_path: string;\n  /**\n   * The line number to start reading from\n   */\n  offset?: number;\n  /**\n   * The number of lines to read\n   */\n  limit?: number;\n}\n```\n\nReads files from the local filesystem, including text, images, PDFs, and Jupyter notebooks.\n\n### Write\n\n**Tool name:** `Write`\n\n```ts  theme={null}\ninterface FileWriteInput {\n  /**\n   * The absolute path to the file to write\n   */\n  file_path: string;\n  /**\n   * The content to write to the file\n   */\n  content: string;\n}\n```\n\nWrites a file to the local filesystem, overwriting if it exists.\n\n### Glob\n\n**Tool name:** `Glob`\n\n```ts  theme={null}\ninterface GlobInput {\n  /**\n   * The glob pattern to match files against\n   */\n  pattern: string;\n  /**\n   * The directory to search in (defaults to cwd)\n   */\n  path?: string;\n}\n```\n\nFast file pattern matching that works with any codebase size.\n\n### Grep\n\n**Tool name:** `Grep`\n\n```ts  theme={null}\ninterface GrepInput {\n  /**\n   * The regular expression pattern to search for\n   */\n  pattern: string;\n  /**\n   * File or directory to search in (defaults to cwd)\n   */\n  path?: string;\n  /**\n   * Glob pattern to filter files (e.g. \"*.js\")\n   */\n  glob?: string;\n  /**\n   * File type to search (e.g. \"js\", \"py\", \"rust\")\n   */\n  type?: string;\n  /**\n   * Output mode: \"content\", \"files_with_matches\", or \"count\"\n   */\n  output_mode?: 'content' | 'files_with_matches' | 'count';\n  /**\n   * Case insensitive search\n   */\n  '-i'?: boolean;\n  /**\n   * Show line numbers (for content mode)\n   */\n  '-n'?: boolean;\n  /**\n   * Lines to show before each match\n   */\n  '-B'?: number;\n  /**\n   * Lines to show after each match\n   */\n  '-A'?: number;\n  /**\n   * Lines to show before and after each match\n   */\n  '-C'?: number;\n  /**\n   * Limit output to first N lines/entries\n   */\n  head_limit?: number;\n  /**\n   * Enable multiline mode\n   */\n  multiline?: boolean;\n}\n```\n\nPowerful search tool built on ripgrep with regex support.\n\n### KillBash\n\n**Tool name:** `KillBash`\n\n```ts  theme={null}\ninterface KillShellInput {\n  /**\n   * The ID of the background shell to kill\n   */\n  shell_id: string;\n}\n```\n\nKills a running background bash shell by its ID.\n\n### NotebookEdit\n\n**Tool name:** `NotebookEdit`\n\n```ts  theme={null}\ninterface NotebookEditInput {\n  /**\n   * The absolute path to the Jupyter notebook file\n   */\n  notebook_path: string;\n  /**\n   * The ID of the cell to edit\n   */\n  cell_id?: string;\n  /**\n   * The new source for the cell\n   */\n  new_source: string;\n  /**\n   * The type of the cell (code or markdown)\n   */\n  cell_type?: 'code' | 'markdown';\n  /**\n   * The type of edit (replace, insert, delete)\n   */\n  edit_mode?: 'replace' | 'insert' | 'delete';\n}\n```\n\nEdits cells in Jupyter notebook files.\n\n### WebFetch\n\n**Tool name:** `WebFetch`\n\n```ts  theme={null}\ninterface WebFetchInput {\n  /**\n   * The URL to fetch content from\n   */\n  url: string;\n  /**\n   * The prompt to run on the fetched content\n   */\n  prompt: string;\n}\n```\n\nFetches content from a URL and processes it with an AI model.\n\n### WebSearch\n\n**Tool name:** `WebSearch`\n\n```ts  theme={null}\ninterface WebSearchInput {\n  /**\n   * The search query to use\n   */\n  query: string;\n  /**\n   * Only include results from these domains\n   */\n  allowed_domains?: string[];\n  /**\n   * Never include results from these domains\n   */\n  blocked_domains?: string[];\n}\n```\n\nSearches the web and returns formatted results.\n\n### TodoWrite\n\n**Tool name:** `TodoWrite`\n\n```ts  theme={null}\ninterface TodoWriteInput {\n  /**\n   * The updated todo list\n   */\n  todos: Array<{\n    /**\n     * The task description\n     */\n    content: string;\n    /**\n     * The task status\n     */\n    status: 'pending' | 'in_progress' | 'completed';\n    /**\n     * Active form of the task description\n     */\n    activeForm: string;\n  }>;\n}\n```\n\nCreates and manages a structured task list for tracking progress.\n\n### ExitPlanMode\n\n**Tool name:** `ExitPlanMode`\n\n```ts  theme={null}\ninterface ExitPlanModeInput {\n  /**\n   * The plan to run by the user for approval\n   */\n  plan: string;\n}\n```\n\nExits planning mode and prompts the user to approve the plan.\n\n### ListMcpResources\n\n**Tool name:** `ListMcpResources`\n\n```ts  theme={null}\ninterface ListMcpResourcesInput {\n  /**\n   * Optional server name to filter resources by\n   */\n  server?: string;\n}\n```\n\nLists available MCP resources from connected servers.\n\n### ReadMcpResource\n\n**Tool name:** `ReadMcpResource`\n\n```ts  theme={null}\ninterface ReadMcpResourceInput {\n  /**\n   * The MCP server name\n   */\n  server: string;\n  /**\n   * The resource URI to read\n   */\n  uri: string;\n}\n```\n\nReads a specific MCP resource from a server.\n\n## Tool Output Types\n\nDocumentation of output schemas for all built-in Claude Code tools. These types represent the actual response data returned by each tool.\n\n### `ToolOutput`\n\n**Note:** This is a documentation-only type for clarity. It represents the union of all tool output types.\n\n```ts  theme={null}\ntype ToolOutput = \n  | TaskOutput\n  | BashOutput\n  | BashOutputToolOutput\n  | EditOutput\n  | ReadOutput\n  | WriteOutput\n  | GlobOutput\n  | GrepOutput\n  | KillBashOutput\n  | NotebookEditOutput\n  | WebFetchOutput\n  | WebSearchOutput\n  | TodoWriteOutput\n  | ExitPlanModeOutput\n  | ListMcpResourcesOutput\n  | ReadMcpResourceOutput;\n```\n\n### Task\n\n**Tool name:** `Task`\n\n```ts  theme={null}\ninterface TaskOutput {\n  /**\n   * Final result message from the subagent\n   */\n  result: string;\n  /**\n   * Token usage statistics\n   */\n  usage?: {\n    input_tokens: number;\n    output_tokens: number;\n    cache_creation_input_tokens?: number;\n    cache_read_input_tokens?: number;\n  };\n  /**\n   * Total cost in USD\n   */\n  total_cost_usd?: number;\n  /**\n   * Execution duration in milliseconds\n   */\n  duration_ms?: number;\n}\n```\n\nReturns the final result from the subagent after completing the delegated task.\n\n### Bash\n\n**Tool name:** `Bash`\n\n```ts  theme={null}\ninterface BashOutput {\n  /**\n   * Combined stdout and stderr output\n   */\n  output: string;\n  /**\n   * Exit code of the command\n   */\n  exitCode: number;\n  /**\n   * Whether the command was killed due to timeout\n   */\n  killed?: boolean;\n  /**\n   * Shell ID for background processes\n   */\n  shellId?: string;\n}\n```\n\nReturns command output with exit status. Background commands return immediately with a shellId.\n\n### BashOutput\n\n**Tool name:** `BashOutput`\n\n```ts  theme={null}\ninterface BashOutputToolOutput {\n  /**\n   * New output since last check\n   */\n  output: string;\n  /**\n   * Current shell status\n   */\n  status: 'running' | 'completed' | 'failed';\n  /**\n   * Exit code (when completed)\n   */\n  exitCode?: number;\n}\n```\n\nReturns incremental output from background shells.\n\n### Edit\n\n**Tool name:** `Edit`\n\n```ts  theme={null}\ninterface EditOutput {\n  /**\n   * Confirmation message\n   */\n  message: string;\n  /**\n   * Number of replacements made\n   */\n  replacements: number;\n  /**\n   * File path that was edited\n   */\n  file_path: string;\n}\n```\n\nReturns confirmation of successful edits with replacement count.\n\n### Read\n\n**Tool name:** `Read`\n\n```ts  theme={null}\ntype ReadOutput = \n  | TextFileOutput\n  | ImageFileOutput\n  | PDFFileOutput\n  | NotebookFileOutput;\n\ninterface TextFileOutput {\n  /**\n   * File contents with line numbers\n   */\n  content: string;\n  /**\n   * Total number of lines in file\n   */\n  total_lines: number;\n  /**\n   * Lines actually returned\n   */\n  lines_returned: number;\n}\n\ninterface ImageFileOutput {\n  /**\n   * Base64 encoded image data\n   */\n  image: string;\n  /**\n   * Image MIME type\n   */\n  mime_type: string;\n  /**\n   * File size in bytes\n   */\n  file_size: number;\n}\n\ninterface PDFFileOutput {\n  /**\n   * Array of page contents\n   */\n  pages: Array<{\n    page_number: number;\n    text?: string;\n    images?: Array<{\n      image: string;\n      mime_type: string;\n    }>;\n  }>;\n  /**\n   * Total number of pages\n   */\n  total_pages: number;\n}\n\ninterface NotebookFileOutput {\n  /**\n   * Jupyter notebook cells\n   */\n  cells: Array<{\n    cell_type: 'code' | 'markdown';\n    source: string;\n    outputs?: any[];\n    execution_count?: number;\n  }>;\n  /**\n   * Notebook metadata\n   */\n  metadata?: Record<string, any>;\n}\n```\n\nReturns file contents in format appropriate to file type.\n\n### Write\n\n**Tool name:** `Write`\n\n```ts  theme={null}\ninterface WriteOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * Number of bytes written\n   */\n  bytes_written: number;\n  /**\n   * File path that was written\n   */\n  file_path: string;\n}\n```\n\nReturns confirmation after successfully writing the file.\n\n### Glob\n\n**Tool name:** `Glob`\n\n```ts  theme={null}\ninterface GlobOutput {\n  /**\n   * Array of matching file paths\n   */\n  matches: string[];\n  /**\n   * Number of matches found\n   */\n  count: number;\n  /**\n   * Search directory used\n   */\n  search_path: string;\n}\n```\n\nReturns file paths matching the glob pattern, sorted by modification time.\n\n### Grep\n\n**Tool name:** `Grep`\n\n```ts  theme={null}\ntype GrepOutput = \n  | GrepContentOutput\n  | GrepFilesOutput\n  | GrepCountOutput;\n\ninterface GrepContentOutput {\n  /**\n   * Matching lines with context\n   */\n  matches: Array<{\n    file: string;\n    line_number?: number;\n    line: string;\n    before_context?: string[];\n    after_context?: string[];\n  }>;\n  /**\n   * Total number of matches\n   */\n  total_matches: number;\n}\n\ninterface GrepFilesOutput {\n  /**\n   * Files containing matches\n   */\n  files: string[];\n  /**\n   * Number of files with matches\n   */\n  count: number;\n}\n\ninterface GrepCountOutput {\n  /**\n   * Match counts per file\n   */\n  counts: Array<{\n    file: string;\n    count: number;\n  }>;\n  /**\n   * Total matches across all files\n   */\n  total: number;\n}\n```\n\nReturns search results in the format specified by output\\_mode.\n\n### KillBash\n\n**Tool name:** `KillBash`\n\n```ts  theme={null}\ninterface KillBashOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * ID of the killed shell\n   */\n  shell_id: string;\n}\n```\n\nReturns confirmation after terminating the background shell.\n\n### NotebookEdit\n\n**Tool name:** `NotebookEdit`\n\n```ts  theme={null}\ninterface NotebookEditOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * Type of edit performed\n   */\n  edit_type: 'replaced' | 'inserted' | 'deleted';\n  /**\n   * Cell ID that was affected\n   */\n  cell_id?: string;\n  /**\n   * Total cells in notebook after edit\n   */\n  total_cells: number;\n}\n```\n\nReturns confirmation after modifying the Jupyter notebook.\n\n### WebFetch\n\n**Tool name:** `WebFetch`\n\n```ts  theme={null}\ninterface WebFetchOutput {\n  /**\n   * AI model's response to the prompt\n   */\n  response: string;\n  /**\n   * URL that was fetched\n   */\n  url: string;\n  /**\n   * Final URL after redirects\n   */\n  final_url?: string;\n  /**\n   * HTTP status code\n   */\n  status_code?: number;\n}\n```\n\nReturns the AI's analysis of the fetched web content.\n\n### WebSearch\n\n**Tool name:** `WebSearch`\n\n```ts  theme={null}\ninterface WebSearchOutput {\n  /**\n   * Search results\n   */\n  results: Array<{\n    title: string;\n    url: string;\n    snippet: string;\n    /**\n     * Additional metadata if available\n     */\n    metadata?: Record<string, any>;\n  }>;\n  /**\n   * Total number of results\n   */\n  total_results: number;\n  /**\n   * The query that was searched\n   */\n  query: string;\n}\n```\n\nReturns formatted search results from the web.\n\n### TodoWrite\n\n**Tool name:** `TodoWrite`\n\n```ts  theme={null}\ninterface TodoWriteOutput {\n  /**\n   * Success message\n   */\n  message: string;\n  /**\n   * Current todo statistics\n   */\n  stats: {\n    total: number;\n    pending: number;\n    in_progress: number;\n    completed: number;\n  };\n}\n```\n\nReturns confirmation with current task statistics.\n\n### ExitPlanMode\n\n**Tool name:** `ExitPlanMode`\n\n```ts  theme={null}\ninterface ExitPlanModeOutput {\n  /**\n   * Confirmation message\n   */\n  message: string;\n  /**\n   * Whether user approved the plan\n   */\n  approved?: boolean;\n}\n```\n\nReturns confirmation after exiting plan mode.\n\n### ListMcpResources\n\n**Tool name:** `ListMcpResources`\n\n```ts  theme={null}\ninterface ListMcpResourcesOutput {\n  /**\n   * Available resources\n   */\n  resources: Array<{\n    uri: string;\n    name: string;\n    description?: string;\n    mimeType?: string;\n    server: string;\n  }>;\n  /**\n   * Total number of resources\n   */\n  total: number;\n}\n```\n\nReturns list of available MCP resources.\n\n### ReadMcpResource\n\n**Tool name:** `ReadMcpResource`\n\n```ts  theme={null}\ninterface ReadMcpResourceOutput {\n  /**\n   * Resource contents\n   */\n  contents: Array<{\n    uri: string;\n    mimeType?: string;\n    text?: string;\n    blob?: string;\n  }>;\n  /**\n   * Server that provided the resource\n   */\n  server: string;\n}\n```\n\nReturns the contents of the requested MCP resource.\n\n## Permission Types\n\n### `PermissionUpdate`\n\nOperations for updating permissions.\n\n```ts  theme={null}\ntype PermissionUpdate = \n  | {\n      type: 'addRules';\n      rules: PermissionRuleValue[];\n      behavior: PermissionBehavior;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'replaceRules';\n      rules: PermissionRuleValue[];\n      behavior: PermissionBehavior;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'removeRules';\n      rules: PermissionRuleValue[];\n      behavior: PermissionBehavior;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'setMode';\n      mode: PermissionMode;\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'addDirectories';\n      directories: string[];\n      destination: PermissionUpdateDestination;\n    }\n  | {\n      type: 'removeDirectories';\n      directories: string[];\n      destination: PermissionUpdateDestination;\n    }\n```\n\n### `PermissionBehavior`\n\n```ts  theme={null}\ntype PermissionBehavior = 'allow' | 'deny' | 'ask';\n```\n\n### `PermissionUpdateDestination`\n\n```ts  theme={null}\ntype PermissionUpdateDestination = \n  | 'userSettings'     // Global user settings\n  | 'projectSettings'  // Per-directory project settings\n  | 'localSettings'    // Gitignored local settings\n  | 'session'          // Current session only\n```\n\n### `PermissionRuleValue`\n\n```ts  theme={null}\ntype PermissionRuleValue = {\n  toolName: string;\n  ruleContent?: string;\n}\n```\n\n## Other Types\n\n### `ApiKeySource`\n\n```ts  theme={null}\ntype ApiKeySource = 'user' | 'project' | 'org' | 'temporary';\n```\n\n### `ConfigScope`\n\n```ts  theme={null}\ntype ConfigScope = 'local' | 'user' | 'project';\n```\n\n### `NonNullableUsage`\n\nA version of [`Usage`](#usage) with all nullable fields made non-nullable.\n\n```ts  theme={null}\ntype NonNullableUsage = {\n  [K in keyof Usage]: NonNullable<Usage[K]>;\n}\n```\n\n### `Usage`\n\nToken usage statistics (from `@anthropic-ai/sdk`).\n\n```ts  theme={null}\ntype Usage = {\n  input_tokens: number | null;\n  output_tokens: number | null;\n  cache_creation_input_tokens?: number | null;\n  cache_read_input_tokens?: number | null;\n}\n```\n\n### `CallToolResult`\n\nMCP tool result type (from `@modelcontextprotocol/sdk/types.js`).\n\n```ts  theme={null}\ntype CallToolResult = {\n  content: Array<{\n    type: 'text' | 'image' | 'resource';\n    // Additional fields vary by type\n  }>;\n  isError?: boolean;\n}\n```\n\n### `AbortError`\n\nCustom error class for abort operations.\n\n```ts  theme={null}\nclass AbortError extends Error {}\n```\n\n## See also\n\n* [SDK overview](/en/docs/agent-sdk/overview) - General SDK concepts\n* [Python SDK reference](/en/docs/agent-sdk/python) - Python SDK documentation\n* [CLI reference](https://code.claude.com/docs/en/cli-reference) - Command-line interface\n* [Common workflows](https://code.claude.com/docs/en/common-workflows) - Step-by-step guides",
  "content_length": 48531
}