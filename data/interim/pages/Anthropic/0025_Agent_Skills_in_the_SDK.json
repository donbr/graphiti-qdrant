{
  "title": "Agent Skills in the SDK",
  "source_url": "https://docs.claude.com/en/docs/agent-sdk/skills",
  "content": "Extend Claude with specialized capabilities using Agent Skills in the Claude Agent SDK\n\n## Overview\n\nAgent Skills extend Claude with specialized capabilities that Claude autonomously invokes when relevant. Skills are packaged as `SKILL.md` files containing instructions, descriptions, and optional supporting resources.\n\nFor comprehensive information about Skills, including benefits, architecture, and authoring guidelines, see the [Agent Skills overview](/en/docs/agents-and-tools/agent-skills/overview).\n\n## How Skills Work with the SDK\n\nWhen using the Claude Agent SDK, Skills are:\n\n1. **Defined as filesystem artifacts**: Created as `SKILL.md` files in specific directories (`.claude/skills/`)\n2. **Loaded from filesystem**: Skills are loaded from configured filesystem locations. You must specify `settingSources` (TypeScript) or `setting_sources` (Python) to load Skills from the filesystem\n3. **Automatically discovered**: Once filesystem settings are loaded, Skill metadata is discovered at startup from user and project directories; full content loaded when triggered\n4. **Model-invoked**: Claude autonomously chooses when to use them based on context\n5. **Enabled via allowed\\_tools**: Add `\"Skill\"` to your `allowed_tools` to enable Skills\n\nUnlike subagents (which can be defined programmatically), Skills must be created as filesystem artifacts. The SDK does not provide a programmatic API for registering Skills.\n\n<Note>\n  **Default behavior**: By default, the SDK does not load any filesystem settings. To use Skills, you must explicitly configure `settingSources: ['user', 'project']` (TypeScript) or `setting_sources=[\"user\", \"project\"]` (Python) in your options.\n</Note>\n\n## Using Skills with the SDK\n\nTo use Skills with the SDK, you need to:\n\n1. Include `\"Skill\"` in your `allowed_tools` configuration\n2. Configure `settingSources`/`setting_sources` to load Skills from the filesystem\n\nOnce configured, Claude automatically discovers Skills from the specified directories and invokes them when relevant to the user's request.\n\n<CodeGroup>\n  ```python Python theme={null}\n  import asyncio\n  from claude_agent_sdk import query, ClaudeAgentOptions\n\n  async def main():\n      options = ClaudeAgentOptions(\n          cwd=\"/path/to/project\",  # Project with .claude/skills/\n          setting_sources=[\"user\", \"project\"],  # Load Skills from filesystem\n          allowed_tools=[\"Skill\", \"Read\", \"Write\", \"Bash\"]  # Enable Skill tool\n      )\n\n      async for message in query(\n          prompt=\"Help me process this PDF document\",\n          options=options\n      ):\n          print(message)\n\n  asyncio.run(main())\n  ```\n\n  ```typescript TypeScript theme={null}\n  import { query } from \"@anthropic-ai/claude-agent-sdk\";\n\n  for await (const message of query({\n    prompt: \"Help me process this PDF document\",\n    options: {\n      cwd: \"/path/to/project\",  // Project with .claude/skills/\n      settingSources: [\"user\", \"project\"],  // Load Skills from filesystem\n      allowedTools: [\"Skill\", \"Read\", \"Write\", \"Bash\"]  // Enable Skill tool\n    }\n  })) {\n    console.log(message);\n  }\n  ```\n</CodeGroup>\n\n## Skill Locations\n\nSkills are loaded from filesystem directories based on your `settingSources`/`setting_sources` configuration:\n\n* **Project Skills** (`.claude/skills/`): Shared with your team via git - loaded when `setting_sources` includes `\"project\"`\n* **User Skills** (`~/.claude/skills/`): Personal Skills across all projects - loaded when `setting_sources` includes `\"user\"`\n* **Plugin Skills**: Bundled with installed Claude Code plugins\n\n## Creating Skills\n\nSkills are defined as directories containing a `SKILL.md` file with YAML frontmatter and Markdown content. The `description` field determines when Claude invokes your Skill.\n\n**Example directory structure**:\n\n```bash  theme={null}\n.claude/skills/processing-pdfs/\n└── SKILL.md\n```\n\nFor complete guidance on creating Skills, including SKILL.md structure, multi-file Skills, and examples, see:\n\n* [Agent Skills in Claude Code](https://code.claude.com/docs/en/skills): Complete guide with examples\n* [Agent Skills Best Practices](/en/docs/agents-and-tools/agent-skills/best-practices): Authoring guidelines and naming conventions\n\n## Tool Restrictions\n\n<Note>\n  The `allowed-tools` frontmatter field in SKILL.md is only supported when using Claude Code CLI directly. **It does not apply when using Skills through the SDK**.\n\n  When using the SDK, control tool access through the main `allowedTools` option in your query configuration.\n</Note>\n\nTo restrict tools for Skills in SDK applications, use the `allowedTools` option:\n\n<Note>\n  Import statements from the first example are assumed in the following code snippets.\n</Note>\n\n<CodeGroup>\n  ```python Python theme={null}\n  options = ClaudeAgentOptions(\n      setting_sources=[\"user\", \"project\"],  # Load Skills from filesystem\n      allowed_tools=[\"Skill\", \"Read\", \"Grep\", \"Glob\"]  # Restricted toolset\n  )\n\n  async for message in query(\n      prompt=\"Analyze the codebase structure\",\n      options=options\n  ):\n      print(message)\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Skills can only use Read, Grep, and Glob tools\n  for await (const message of query({\n    prompt: \"Analyze the codebase structure\",\n    options: {\n      settingSources: [\"user\", \"project\"],  // Load Skills from filesystem\n      allowedTools: [\"Skill\", \"Read\", \"Grep\", \"Glob\"]  // Restricted toolset\n    }\n  })) {\n    console.log(message);\n  }\n  ```\n</CodeGroup>\n\n## Discovering Available Skills\n\nTo see which Skills are available in your SDK application, simply ask Claude:\n\n<CodeGroup>\n  ```python Python theme={null}\n  options = ClaudeAgentOptions(\n      setting_sources=[\"user\", \"project\"],  # Load Skills from filesystem\n      allowed_tools=[\"Skill\"]\n  )\n\n  async for message in query(\n      prompt=\"What Skills are available?\",\n      options=options\n  ):\n      print(message)\n  ```\n\n  ```typescript TypeScript theme={null}\n  for await (const message of query({\n    prompt: \"What Skills are available?\",\n    options: {\n      settingSources: [\"user\", \"project\"],  // Load Skills from filesystem\n      allowedTools: [\"Skill\"]\n    }\n  })) {\n    console.log(message);\n  }\n  ```\n</CodeGroup>\n\nClaude will list the available Skills based on your current working directory and installed plugins.\n\n## Testing Skills\n\nTest Skills by asking questions that match their descriptions:\n\n<CodeGroup>\n  ```python Python theme={null}\n  options = ClaudeAgentOptions(\n      cwd=\"/path/to/project\",\n      setting_sources=[\"user\", \"project\"],  # Load Skills from filesystem\n      allowed_tools=[\"Skill\", \"Read\", \"Bash\"]\n  )\n\n  async for message in query(\n      prompt=\"Extract text from invoice.pdf\",\n      options=options\n  ):\n      print(message)\n  ```\n\n  ```typescript TypeScript theme={null}\n  for await (const message of query({\n    prompt: \"Extract text from invoice.pdf\",\n    options: {\n      cwd: \"/path/to/project\",\n      settingSources: [\"user\", \"project\"],  // Load Skills from filesystem\n      allowedTools: [\"Skill\", \"Read\", \"Bash\"]\n    }\n  })) {\n    console.log(message);\n  }\n  ```\n</CodeGroup>\n\nClaude automatically invokes the relevant Skill if the description matches your request.\n\n## Troubleshooting\n\n### Skills Not Found\n\n**Check settingSources configuration**: Skills are only loaded when you explicitly configure `settingSources`/`setting_sources`. This is the most common issue:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # Wrong - Skills won't be loaded\n  options = ClaudeAgentOptions(\n      allowed_tools=[\"Skill\"]\n  )\n\n  # Correct - Skills will be loaded\n  options = ClaudeAgentOptions(\n      setting_sources=[\"user\", \"project\"],  # Required to load Skills\n      allowed_tools=[\"Skill\"]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Wrong - Skills won't be loaded\n  const options = {\n    allowedTools: [\"Skill\"]\n  };\n\n  // Correct - Skills will be loaded\n  const options = {\n    settingSources: [\"user\", \"project\"],  // Required to load Skills\n    allowedTools: [\"Skill\"]\n  };\n  ```\n</CodeGroup>\n\nFor more details on `settingSources`/`setting_sources`, see the [TypeScript SDK reference](/en/docs/agent-sdk/typescript#settingsource) or [Python SDK reference](/en/docs/agent-sdk/python#settingsource).\n\n**Check working directory**: The SDK loads Skills relative to the `cwd` option. Ensure it points to a directory containing `.claude/skills/`:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # Ensure your cwd points to the directory containing .claude/skills/\n  options = ClaudeAgentOptions(\n      cwd=\"/path/to/project\",  # Must contain .claude/skills/\n      setting_sources=[\"user\", \"project\"],  # Required to load Skills\n      allowed_tools=[\"Skill\"]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Ensure your cwd points to the directory containing .claude/skills/\n  const options = {\n    cwd: \"/path/to/project\",  // Must contain .claude/skills/\n    settingSources: [\"user\", \"project\"],  // Required to load Skills\n    allowedTools: [\"Skill\"]\n  };\n  ```\n</CodeGroup>\n\nSee the \"Using Skills with the SDK\" section above for the complete pattern.\n\n**Verify filesystem location**:\n\n```bash  theme={null}\n# Check project Skills\nls .claude/skills/*/SKILL.md\n\n# Check personal Skills\nls ~/.claude/skills/*/SKILL.md\n```\n\n### Skill Not Being Used\n\n**Check the Skill tool is enabled**: Confirm `\"Skill\"` is in your `allowedTools`.\n\n**Check the description**: Ensure it's specific and includes relevant keywords. See [Agent Skills Best Practices](/en/docs/agents-and-tools/agent-skills/best-practices#writing-effective-descriptions) for guidance on writing effective descriptions.\n\n### Additional Troubleshooting\n\nFor general Skills troubleshooting (YAML syntax, debugging, etc.), see the [Claude Code Skills troubleshooting section](https://code.claude.com/docs/en/skills#troubleshooting).\n\n## Related Documentation\n\n### Skills Guides\n\n* [Agent Skills in Claude Code](https://code.claude.com/docs/en/skills): Complete Skills guide with creation, examples, and troubleshooting\n* [Agent Skills Overview](/en/docs/agents-and-tools/agent-skills/overview): Conceptual overview, benefits, and architecture\n* [Agent Skills Best Practices](/en/docs/agents-and-tools/agent-skills/best-practices): Authoring guidelines for effective Skills\n* [Agent Skills Cookbook](https://github.com/anthropics/claude-cookbooks/tree/main/skills): Example Skills and templates\n\n### SDK Resources\n\n* [Subagents in the SDK](/en/docs/agent-sdk/subagents): Similar filesystem-based agents with programmatic options\n* [Slash Commands in the SDK](/en/docs/agent-sdk/slash-commands): User-invoked commands\n* [SDK Overview](/en/docs/agent-sdk/overview): General SDK concepts\n* [TypeScript SDK Reference](/en/docs/agent-sdk/typescript): Complete API documentation\n* [Python SDK Reference](/en/docs/agent-sdk/python): Complete API documentation",
  "content_length": 10847
}