{
  "title": "Using Agent Skills with the API",
  "source_url": "https://docs.claude.com/en/docs/build-with-claude/skills-guide",
  "content": "Learn how to use Agent Skills to extend Claude's capabilities through the API.\n\nAgent Skills extend Claude's capabilities through organized folders of instructions, scripts, and resources. This guide shows you how to use both pre-built and custom Skills with the Claude API.\n\n<Note>\n  For complete API reference including request/response schemas and all parameters, see:\n\n  * [Skill Management API Reference](/en/api/skills/list-skills) - CRUD operations for Skills\n  * [Skill Versions API Reference](/en/api/skills/list-skill-versions) - Version management\n</Note>\n\n## Quick Links\n\n<CardGroup cols={2}>\n  <Card title=\"Get started with Agent Skills\" icon=\"rocket\" href=\"/en/docs/agents-and-tools/agent-skills/quickstart\">\n    Create your first Skill\n  </Card>\n\n  <Card title=\"Create Custom Skills\" icon=\"hammer\" href=\"/en/docs/agents-and-tools/agent-skills/best-practices\">\n    Best practices for authoring Skills\n  </Card>\n</CardGroup>\n\n## Overview\n\n<Note>\n  For a deep dive into the architecture and real-world applications of Agent Skills, read our engineering blog: [Equipping agents for the real world with Agent Skills](https://www.anthropic.com/engineering/equipping-agents-for-the-real-world-with-agent-skills).\n</Note>\n\nSkills integrate with the Messages API through the code execution tool. Whether using pre-built Skills managed by Anthropic or custom Skills you've uploaded, the integration shape is identical—both require code execution and use the same `container` structure.\n\n### Using Skills\n\nSkills integrate identically in the Messages API regardless of source. You specify Skills in the `container` parameter with a `skill_id`, `type`, and optional `version`, and they execute in the code execution environment.\n\n**You can use Skills from two sources:**\n\n| Aspect             | Anthropic Skills                           | Custom Skills                                                   |\n| ------------------ | ------------------------------------------ | --------------------------------------------------------------- |\n| **Type value**     | `anthropic`                                | `custom`                                                        |\n| **Skill IDs**      | Short names: `pptx`, `xlsx`, `docx`, `pdf` | Generated: `skill_01AbCdEfGhIjKlMnOpQrStUv`                     |\n| **Version format** | Date-based: `20251013` or `latest`         | Epoch timestamp: `1759178010641129` or `latest`                 |\n| **Management**     | Pre-built and maintained by Anthropic      | Upload and manage via [Skills API](/en/api/skills/create-skill) |\n| **Availability**   | Available to all users                     | Private to your workspace                                       |\n\nBoth skill sources are returned by the [List Skills endpoint](/en/api/skills/list-skills) (use the `source` parameter to filter). The integration shape and execution environment are identical—the only difference is where the Skills come from and how they're managed.\n\n### Prerequisites\n\nTo use Skills, you need:\n\n1. **Anthropic API key** from the [Console](https://console.anthropic.com/settings/keys)\n2. **Beta headers**:\n   * `code-execution-2025-08-25` - Enables code execution (required for Skills)\n   * `skills-2025-10-02` - Enables Skills API\n   * `files-api-2025-04-14` - For uploading/downloading files to/from container\n3. **Code execution tool** enabled in your requests\n\n***\n\n## Using Skills in Messages\n\n### Container Parameter\n\nSkills are specified using the `container` parameter in the Messages API. You can include up to 8 Skills per request.\n\nThe structure is identical for both Anthropic and custom Skills—specify the required `type` and `skill_id`, and optionally include `version` to pin to a specific version:\n\n<CodeGroup>\n  ```python Python theme={null}\n  import anthropic\n\n  client = anthropic.Anthropic()\n\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [\n              {\n                  \"type\": \"anthropic\",\n                  \"skill_id\": \"pptx\",\n                  \"version\": \"latest\"\n              }\n          ]\n      },\n      messages=[{\n          \"role\": \"user\",\n          \"content\": \"Create a presentation about renewable energy\"\n      }],\n      tools=[{\n          \"type\": \"code_execution_20250825\",\n          \"name\": \"code_execution\"\n      }]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  import Anthropic from '@anthropic-ai/sdk';\n\n  const client = new Anthropic();\n\n  const response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [\n        {\n          type: 'anthropic',\n          skill_id: 'pptx',\n          version: 'latest'\n        }\n      ]\n    },\n    messages: [{\n      role: 'user',\n      content: 'Create a presentation about renewable energy'\n    }],\n    tools: [{\n      type: 'code_execution_20250825',\n      name: 'code_execution'\n    }]\n  });\n  ```\n\n  ```bash Shell theme={null}\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [\n          {\n            \"type\": \"anthropic\",\n            \"skill_id\": \"pptx\",\n            \"version\": \"latest\"\n          }\n        ]\n      },\n      \"messages\": [{\n        \"role\": \"user\",\n        \"content\": \"Create a presentation about renewable energy\"\n      }],\n      \"tools\": [{\n        \"type\": \"code_execution_20250825\",\n        \"name\": \"code_execution\"\n      }]\n    }'\n  ```\n</CodeGroup>\n\n### Downloading Generated Files\n\nWhen Skills create documents (Excel, PowerPoint, PDF, Word), they return `file_id` attributes in the response. You must use the Files API to download these files.\n\n**How it works:**\n\n1. Skills create files during code execution\n2. Response includes `file_id` for each created file\n3. Use Files API to download the actual file content\n4. Save locally or process as needed\n\n**Example: Creating and downloading an Excel file**\n\n<CodeGroup>\n  ```python Python theme={null}\n  import anthropic\n\n  client = anthropic.Anthropic()\n\n  # Step 1: Use a Skill to create a file\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [\n              {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"}\n          ]\n      },\n      messages=[{\n          \"role\": \"user\",\n          \"content\": \"Create an Excel file with a simple budget spreadsheet\"\n      }],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n\n  # Step 2: Extract file IDs from the response\n  def extract_file_ids(response):\n      file_ids = []\n      for item in response.content:\n          if item.type == 'bash_code_execution_tool_result':\n              content_item = item.content\n              if content_item.type == 'bash_code_execution_result':\n                  for file in content_item.content:\n                      if hasattr(file, 'file_id'):\n                          file_ids.append(file.file_id)\n      return file_ids\n\n  # Step 3: Download the file using Files API\n  for file_id in extract_file_ids(response):\n      file_metadata = client.beta.files.retrieve_metadata(\n          file_id=file_id,\n          betas=[\"files-api-2025-04-14\"]\n      )\n      file_content = client.beta.files.download(\n          file_id=file_id,\n          betas=[\"files-api-2025-04-14\"]\n      )\n\n      # Step 4: Save to disk\n      file_content.write_to_file(file_metadata.filename)\n      print(f\"Downloaded: {file_metadata.filename}\")\n  ```\n\n  ```typescript TypeScript theme={null}\n  import Anthropic from '@anthropic-ai/sdk';\n\n  const client = new Anthropic();\n\n  // Step 1: Use a Skill to create a file\n  const response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [\n        {type: 'anthropic', skill_id: 'xlsx', version: 'latest'}\n      ]\n    },\n    messages: [{\n      role: 'user',\n      content: 'Create an Excel file with a simple budget spreadsheet'\n    }],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n\n  // Step 2: Extract file IDs from the response\n  function extractFileIds(response: any): string[] {\n    const fileIds: string[] = [];\n    for (const item of response.content) {\n      if (item.type === 'bash_code_execution_tool_result') {\n        const contentItem = item.content;\n        if (contentItem.type === 'bash_code_execution_result') {\n          for (const file of contentItem.content) {\n            if ('file_id' in file) {\n              fileIds.push(file.file_id);\n            }\n          }\n        }\n      }\n    }\n    return fileIds;\n  }\n\n  // Step 3: Download the file using Files API\n  const fs = require('fs');\n  for (const fileId of extractFileIds(response)) {\n    const fileMetadata = await client.beta.files.retrieve_metadata(fileId, {\n      betas: ['files-api-2025-04-14']\n    });\n    const fileContent = await client.beta.files.download(fileId, {\n      betas: ['files-api-2025-04-14']\n    });\n\n    // Step 4: Save to disk\n    fs.writeFileSync(fileMetadata.filename, Buffer.from(await fileContent.arrayBuffer()));\n    console.log(`Downloaded: ${fileMetadata.filename}`);\n  }\n  ```\n\n  ```bash Shell theme={null}\n  # Step 1: Use a Skill to create a file\n  RESPONSE=$(curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [\n          {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"}\n        ]\n      },\n      \"messages\": [{\n        \"role\": \"user\",\n        \"content\": \"Create an Excel file with a simple budget spreadsheet\"\n      }],\n      \"tools\": [{\n        \"type\": \"code_execution_20250825\",\n        \"name\": \"code_execution\"\n      }]\n    }')\n\n  # Step 2: Extract file_id from response (using jq)\n  FILE_ID=$(echo \"$RESPONSE\" | jq -r '.content[] | select(.type==\"bash_code_execution_tool_result\") | .content | select(.type==\"bash_code_execution_result\") | .content[] | select(.file_id) | .file_id')\n\n  # Step 3: Get filename from metadata\n  FILENAME=$(curl \"https://api.anthropic.com/v1/files/$FILE_ID\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: files-api-2025-04-14\" | jq -r '.filename')\n\n  # Step 4: Download the file using Files API\n  curl \"https://api.anthropic.com/v1/files/$FILE_ID/content\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: files-api-2025-04-14\" \\\n    --output \"$FILENAME\"\n\n  echo \"Downloaded: $FILENAME\"\n  ```\n</CodeGroup>\n\n**Additional Files API operations:**\n\n<CodeGroup>\n  ```python Python theme={null}\n  # Get file metadata\n  file_info = client.beta.files.retrieve_metadata(\n      file_id=file_id,\n      betas=[\"files-api-2025-04-14\"]\n  )\n  print(f\"Filename: {file_info.filename}, Size: {file_info.size_bytes} bytes\")\n\n  # List all files\n  files = client.beta.files.list(betas=[\"files-api-2025-04-14\"])\n  for file in files.data:\n      print(f\"{file.filename} - {file.created_at}\")\n\n  # Delete a file\n  client.beta.files.delete(\n      file_id=file_id,\n      betas=[\"files-api-2025-04-14\"]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Get file metadata\n  const fileInfo = await client.beta.files.retrieve_metadata(fileId, {\n    betas: ['files-api-2025-04-14']\n  });\n  console.log(`Filename: ${fileInfo.filename}, Size: ${fileInfo.size_bytes} bytes`);\n\n  // List all files\n  const files = await client.beta.files.list({\n    betas: ['files-api-2025-04-14']\n  });\n  for (const file of files.data) {\n    console.log(`${file.filename} - ${file.created_at}`);\n  }\n\n  // Delete a file\n  await client.beta.files.delete(fileId, {\n    betas: ['files-api-2025-04-14']\n  });\n  ```\n\n  ```bash Shell theme={null}\n  # Get file metadata\n  curl \"https://api.anthropic.com/v1/files/$FILE_ID\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: files-api-2025-04-14\"\n\n  # List all files\n  curl \"https://api.anthropic.com/v1/files\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: files-api-2025-04-14\"\n\n  # Delete a file\n  curl -X DELETE \"https://api.anthropic.com/v1/files/$FILE_ID\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: files-api-2025-04-14\"\n  ```\n</CodeGroup>\n\n<Note>\n  For complete details on the Files API, see the [Files API documentation](/en/api/files-content).\n</Note>\n\n### Multi-Turn Conversations\n\nReuse the same container across multiple messages by specifying the container ID:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # First request creates container\n  response1 = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [\n              {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"}\n          ]\n      },\n      messages=[{\"role\": \"user\", \"content\": \"Analyze this sales data\"}],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n\n  # Continue conversation with same container\n  messages = [\n      {\"role\": \"user\", \"content\": \"Analyze this sales data\"},\n      {\"role\": \"assistant\", \"content\": response1.content},\n      {\"role\": \"user\", \"content\": \"What was the total revenue?\"}\n  ]\n\n  response2 = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"id\": response1.container.id,  # Reuse container\n          \"skills\": [\n              {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"}\n          ]\n      },\n      messages=messages,\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // First request creates container\n  const response1 = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [\n        {type: 'anthropic', skill_id: 'xlsx', version: 'latest'}\n      ]\n    },\n    messages: [{role: 'user', content: 'Analyze this sales data'}],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n\n  // Continue conversation with same container\n  const messages = [\n    {role: 'user', content: 'Analyze this sales data'},\n    {role: 'assistant', content: response1.content},\n    {role: 'user', content: 'What was the total revenue?'}\n  ];\n\n  const response2 = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      id: response1.container.id,  // Reuse container\n      skills: [\n        {type: 'anthropic', skill_id: 'xlsx', version: 'latest'}\n      ]\n    },\n    messages,\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n  ```\n</CodeGroup>\n\n### Long-Running Operations\n\nSkills may perform operations that require multiple turns. Handle `pause_turn` stop reasons:\n\n<CodeGroup>\n  ```python Python theme={null}\n  messages = [{\"role\": \"user\", \"content\": \"Process this large dataset\"}]\n  max_retries = 10\n\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [\n              {\"type\": \"custom\", \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\", \"version\": \"latest\"}\n          ]\n      },\n      messages=messages,\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n\n  # Handle pause_turn for long operations\n  for i in range(max_retries):\n      if response.stop_reason != \"pause_turn\":\n          break\n\n      messages.append({\"role\": \"assistant\", \"content\": response.content})\n      response = client.beta.messages.create(\n          model=\"claude-sonnet-4-5-20250929\",\n          max_tokens=4096,\n          betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n          container={\n              \"id\": response.container.id,\n              \"skills\": [\n                  {\"type\": \"custom\", \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\", \"version\": \"latest\"}\n              ]\n          },\n          messages=messages,\n          tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n      )\n  ```\n\n  ```typescript TypeScript theme={null}\n  let messages = [{role: 'user' as const, content: 'Process this large dataset'}];\n  const maxRetries = 10;\n\n  let response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [\n        {type: 'custom', skill_id: 'skill_01AbCdEfGhIjKlMnOpQrStUv', version: 'latest'}\n      ]\n    },\n    messages,\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n\n  // Handle pause_turn for long operations\n  for (let i = 0; i < maxRetries; i++) {\n    if (response.stop_reason !== 'pause_turn') {\n      break;\n    }\n\n    messages.push({role: 'assistant', content: response.content});\n    response = await client.beta.messages.create({\n      model: 'claude-sonnet-4-5-20250929',\n      max_tokens: 4096,\n      betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n      container: {\n        id: response.container.id,\n        skills: [\n          {type: 'custom', skill_id: 'skill_01AbCdEfGhIjKlMnOpQrStUv', version: 'latest'}\n        ]\n      },\n      messages,\n      tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n    });\n  }\n  ```\n\n  ```bash Shell theme={null}\n  # Initial request\n  RESPONSE=$(curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [\n          {\n            \"type\": \"custom\",\n            \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n            \"version\": \"latest\"\n          }\n        ]\n      },\n      \"messages\": [{\n        \"role\": \"user\",\n        \"content\": \"Process this large dataset\"\n      }],\n      \"tools\": [{\n        \"type\": \"code_execution_20250825\",\n        \"name\": \"code_execution\"\n      }]\n    }')\n\n  # Check stop_reason and handle pause_turn in a loop\n  STOP_REASON=$(echo \"$RESPONSE\" | jq -r '.stop_reason')\n  CONTAINER_ID=$(echo \"$RESPONSE\" | jq -r '.container.id')\n\n  while [ \"$STOP_REASON\" = \"pause_turn\" ]; do\n    # Continue with same container\n    RESPONSE=$(curl https://api.anthropic.com/v1/messages \\\n      -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n      -H \"anthropic-version: 2023-06-01\" \\\n      -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n      -H \"content-type: application/json\" \\\n      -d \"{\n        \\\"model\\\": \\\"claude-sonnet-4-5-20250929\\\",\n        \\\"max_tokens\\\": 4096,\n        \\\"container\\\": {\n          \\\"id\\\": \\\"$CONTAINER_ID\\\",\n          \\\"skills\\\": [{\n            \\\"type\\\": \\\"custom\\\",\n            \\\"skill_id\\\": \\\"skill_01AbCdEfGhIjKlMnOpQrStUv\\\",\n            \\\"version\\\": \\\"latest\\\"\n          }]\n        },\n        \\\"messages\\\": [/* include conversation history */],\n        \\\"tools\\\": [{\n          \\\"type\\\": \\\"code_execution_20250825\\\",\n          \\\"name\\\": \\\"code_execution\\\"\n        }]\n      }\")\n\n    STOP_REASON=$(echo \"$RESPONSE\" | jq -r '.stop_reason')\n  done\n  ```\n</CodeGroup>\n\n<Note>\n  The response may include a `pause_turn` stop reason, which indicates that the API paused a long-running Skill operation. You can provide the response back as-is in a subsequent request to let Claude continue its turn, or modify the content if you wish to interrupt the conversation and provide additional guidance.\n</Note>\n\n### Using Multiple Skills\n\nCombine multiple Skills in a single request to handle complex workflows:\n\n<CodeGroup>\n  ```python Python theme={null}\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [\n              {\n                  \"type\": \"anthropic\",\n                  \"skill_id\": \"xlsx\",\n                  \"version\": \"latest\"\n              },\n              {\n                  \"type\": \"anthropic\",\n                  \"skill_id\": \"pptx\",\n                  \"version\": \"latest\"\n              },\n              {\n                  \"type\": \"custom\",\n                  \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n                  \"version\": \"latest\"\n              }\n          ]\n      },\n      messages=[{\n          \"role\": \"user\",\n          \"content\": \"Analyze sales data and create a presentation\"\n      }],\n      tools=[{\n          \"type\": \"code_execution_20250825\",\n          \"name\": \"code_execution\"\n      }]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  const response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [\n        {\n          type: 'anthropic',\n          skill_id: 'xlsx',\n          version: 'latest'\n        },\n        {\n          type: 'anthropic',\n          skill_id: 'pptx',\n          version: 'latest'\n        },\n        {\n          type: 'custom',\n          skill_id: 'skill_01AbCdEfGhIjKlMnOpQrStUv',\n          version: 'latest'\n        }\n      ]\n    },\n    messages: [{\n      role: 'user',\n      content: 'Analyze sales data and create a presentation'\n    }],\n    tools: [{\n      type: 'code_execution_20250825',\n      name: 'code_execution'\n    }]\n  });\n  ```\n\n  ```bash Shell theme={null}\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [\n          {\n            \"type\": \"anthropic\",\n            \"skill_id\": \"xlsx\",\n            \"version\": \"latest\"\n          },\n          {\n            \"type\": \"anthropic\",\n            \"skill_id\": \"pptx\",\n            \"version\": \"latest\"\n          },\n          {\n            \"type\": \"custom\",\n            \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n            \"version\": \"latest\"\n          }\n        ]\n      },\n      \"messages\": [{\n        \"role\": \"user\",\n        \"content\": \"Analyze sales data and create a presentation\"\n      }],\n      \"tools\": [{\n        \"type\": \"code_execution_20250825\",\n        \"name\": \"code_execution\"\n      }]\n    }'\n  ```\n</CodeGroup>\n\n***\n\n## Managing Custom Skills\n\n### Creating a Skill\n\nUpload your custom Skill to make it available in your workspace. You can upload using either a directory path or individual file objects.\n\n<CodeGroup>\n  ```python Python theme={null}\n  import anthropic\n\n  client = anthropic.Anthropic()\n\n  # Option 1: Using files_from_dir helper (Python only, recommended)\n  from anthropic.lib import files_from_dir\n\n  skill = client.beta.skills.create(\n      display_title=\"Financial Analysis\",\n      files=files_from_dir(\"/path/to/financial_analysis_skill\"),\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  # Option 2: Using a zip file\n  skill = client.beta.skills.create(\n      display_title=\"Financial Analysis\",\n      files=[(\"skill.zip\", open(\"financial_analysis_skill.zip\", \"rb\"))],\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  # Option 3: Using file tuples (filename, file_content, mime_type)\n  skill = client.beta.skills.create(\n      display_title=\"Financial Analysis\",\n      files=[\n          (\"financial_skill/SKILL.md\", open(\"financial_skill/SKILL.md\", \"rb\"), \"text/markdown\"),\n          (\"financial_skill/analyze.py\", open(\"financial_skill/analyze.py\", \"rb\"), \"text/x-python\"),\n      ],\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  print(f\"Created skill: {skill.id}\")\n  print(f\"Latest version: {skill.latest_version}\")\n  ```\n\n  ```typescript TypeScript theme={null}\n  import Anthropic, { toFile } from '@anthropic-ai/sdk';\n  import fs from 'fs';\n\n  const client = new Anthropic();\n\n  // Option 1: Using a zip file\n  const skill = await client.beta.skills.create({\n    displayTitle: 'Financial Analysis',\n    files: [\n      await toFile(\n        fs.createReadStream('financial_analysis_skill.zip'),\n        'skill.zip'\n      )\n    ],\n    betas: ['skills-2025-10-02']\n  });\n\n  // Option 2: Using individual file objects\n  const skill = await client.beta.skills.create({\n    displayTitle: 'Financial Analysis',\n    files: [\n      await toFile(\n        fs.createReadStream('financial_skill/SKILL.md'),\n        'financial_skill/SKILL.md',\n        { type: 'text/markdown' }\n      ),\n      await toFile(\n        fs.createReadStream('financial_skill/analyze.py'),\n        'financial_skill/analyze.py',\n        { type: 'text/x-python' }\n      ),\n    ],\n    betas: ['skills-2025-10-02']\n  });\n\n  console.log(`Created skill: ${skill.id}`);\n  console.log(`Latest version: ${skill.latest_version}`);\n  ```\n\n  ```bash Shell theme={null}\n  curl -X POST \"https://api.anthropic.com/v1/skills\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\" \\\n    -F \"display_title=Financial Analysis\" \\\n    -F \"files[]=@financial_skill/SKILL.md;filename=financial_skill/SKILL.md\" \\\n    -F \"files[]=@financial_skill/analyze.py;filename=financial_skill/analyze.py\"\n  ```\n</CodeGroup>\n\n**Requirements:**\n\n* Must include a SKILL.md file at the top level\n* All files must specify a common root directory in their paths\n* Total upload size must be under 8MB\n* YAML frontmatter requirements:\n  * `name`: Maximum 64 characters, lowercase letters/numbers/hyphens only, no XML tags, no reserved words (\"anthropic\", \"claude\")\n  * `description`: Maximum 1024 characters, non-empty, no XML tags\n\nFor complete request/response schemas, see the [Create Skill API reference](/en/api/skills/create-skill).\n\n### Listing Skills\n\nRetrieve all Skills available to your workspace, including both Anthropic pre-built Skills and your custom Skills. Use the `source` parameter to filter by skill type:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # List all Skills\n  skills = client.beta.skills.list(\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  for skill in skills.data:\n      print(f\"{skill.id}: {skill.display_title} (source: {skill.source})\")\n\n  # List only custom Skills\n  custom_skills = client.beta.skills.list(\n      source=\"custom\",\n      betas=[\"skills-2025-10-02\"]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // List all Skills\n  const skills = await client.beta.skills.list({\n    betas: ['skills-2025-10-02']\n  });\n\n  for (const skill of skills.data) {\n    console.log(`${skill.id}: ${skill.display_title} (source: ${skill.source})`);\n  }\n\n  // List only custom Skills\n  const customSkills = await client.beta.skills.list({\n    source: 'custom',\n    betas: ['skills-2025-10-02']\n  });\n  ```\n\n  ```bash Shell theme={null}\n  # List all Skills\n  curl \"https://api.anthropic.com/v1/skills\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\"\n\n  # List only custom Skills\n  curl \"https://api.anthropic.com/v1/skills?source=custom\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\"\n  ```\n</CodeGroup>\n\nSee the [List Skills API reference](/en/api/skills/list-skills) for pagination and filtering options.\n\n### Retrieving a Skill\n\nGet details about a specific Skill:\n\n<CodeGroup>\n  ```python Python theme={null}\n  skill = client.beta.skills.retrieve(\n      skill_id=\"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  print(f\"Skill: {skill.display_title}\")\n  print(f\"Latest version: {skill.latest_version}\")\n  print(f\"Created: {skill.created_at}\")\n  ```\n\n  ```typescript TypeScript theme={null}\n  const skill = await client.beta.skills.retrieve(\n    'skill_01AbCdEfGhIjKlMnOpQrStUv',\n    { betas: ['skills-2025-10-02'] }\n  );\n\n  console.log(`Skill: ${skill.display_title}`);\n  console.log(`Latest version: ${skill.latest_version}`);\n  console.log(`Created: ${skill.created_at}`);\n  ```\n\n  ```bash Shell theme={null}\n  curl \"https://api.anthropic.com/v1/skills/skill_01AbCdEfGhIjKlMnOpQrStUv\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\"\n  ```\n</CodeGroup>\n\n### Deleting a Skill\n\nTo delete a Skill, you must first delete all its versions:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # Step 1: Delete all versions\n  versions = client.beta.skills.versions.list(\n      skill_id=\"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  for version in versions.data:\n      client.beta.skills.versions.delete(\n          skill_id=\"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n          version=version.version,\n          betas=[\"skills-2025-10-02\"]\n      )\n\n  # Step 2: Delete the Skill\n  client.beta.skills.delete(\n      skill_id=\"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n      betas=[\"skills-2025-10-02\"]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Step 1: Delete all versions\n  const versions = await client.beta.skills.versions.list(\n    'skill_01AbCdEfGhIjKlMnOpQrStUv',\n    { betas: ['skills-2025-10-02'] }\n  );\n\n  for (const version of versions.data) {\n    await client.beta.skills.versions.delete(\n      'skill_01AbCdEfGhIjKlMnOpQrStUv',\n      version.version,\n      { betas: ['skills-2025-10-02'] }\n    );\n  }\n\n  // Step 2: Delete the Skill\n  await client.beta.skills.delete(\n    'skill_01AbCdEfGhIjKlMnOpQrStUv',\n    { betas: ['skills-2025-10-02'] }\n  );\n  ```\n\n  ```bash Shell theme={null}\n  # Delete all versions first, then delete the Skill\n  curl -X DELETE \"https://api.anthropic.com/v1/skills/skill_01AbCdEfGhIjKlMnOpQrStUv\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\"\n  ```\n</CodeGroup>\n\nAttempting to delete a Skill with existing versions will return a 400 error.\n\n### Versioning\n\nSkills support versioning to manage updates safely:\n\n**Anthropic-Managed Skills**:\n\n* Versions use date format: `20251013`\n* New versions released as updates are made\n* Specify exact versions for stability\n\n**Custom Skills**:\n\n* Auto-generated epoch timestamps: `1759178010641129`\n* Use `\"latest\"` to always get the most recent version\n* Create new versions when updating Skill files\n\n<CodeGroup>\n  ```python Python theme={null}\n  # Create a new version\n  from anthropic.lib import files_from_dir\n\n  new_version = client.beta.skills.versions.create(\n      skill_id=\"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n      files=files_from_dir(\"/path/to/updated_skill\"),\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  # Use specific version\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [{\n              \"type\": \"custom\",\n              \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n              \"version\": new_version.version\n          }]\n      },\n      messages=[{\"role\": \"user\", \"content\": \"Use updated Skill\"}],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n\n  # Use latest version\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [{\n              \"type\": \"custom\",\n              \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n              \"version\": \"latest\"\n          }]\n      },\n      messages=[{\"role\": \"user\", \"content\": \"Use latest Skill version\"}],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Create a new version using a zip file\n  const fs = require('fs');\n\n  const newVersion = await client.beta.skills.versions.create(\n    'skill_01AbCdEfGhIjKlMnOpQrStUv',\n    {\n      files: [\n        fs.createReadStream('updated_skill.zip')\n      ],\n      betas: ['skills-2025-10-02']\n    }\n  );\n\n  // Use specific version\n  const response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [{\n        type: 'custom',\n        skill_id: 'skill_01AbCdEfGhIjKlMnOpQrStUv',\n        version: newVersion.version\n      }]\n    },\n    messages: [{role: 'user', content: 'Use updated Skill'}],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n\n  // Use latest version\n  const response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [{\n        type: 'custom',\n        skill_id: 'skill_01AbCdEfGhIjKlMnOpQrStUv',\n        version: 'latest'\n      }]\n    },\n    messages: [{role: 'user', content: 'Use latest Skill version'}],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n  ```\n\n  ```bash Shell theme={null}\n  # Create a new version\n  NEW_VERSION=$(curl -X POST \"https://api.anthropic.com/v1/skills/skill_01AbCdEfGhIjKlMnOpQrStUv/versions\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\" \\\n    -F \"files[]=@updated_skill/SKILL.md;filename=updated_skill/SKILL.md\")\n\n  VERSION_NUMBER=$(echo \"$NEW_VERSION\" | jq -r '.version')\n\n  # Use specific version\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d \"{\n      \\\"model\\\": \\\"claude-sonnet-4-5-20250929\\\",\n      \\\"max_tokens\\\": 4096,\n      \\\"container\\\": {\n        \\\"skills\\\": [{\n          \\\"type\\\": \\\"custom\\\",\n          \\\"skill_id\\\": \\\"skill_01AbCdEfGhIjKlMnOpQrStUv\\\",\n          \\\"version\\\": \\\"$VERSION_NUMBER\\\"\n        }]\n      },\n      \\\"messages\\\": [{\\\"role\\\": \\\"user\\\", \\\"content\\\": \\\"Use updated Skill\\\"}],\n      \\\"tools\\\": [{\\\"type\\\": \\\"code_execution_20250825\\\", \\\"name\\\": \\\"code_execution\\\"}]\n    }\"\n\n  # Use latest version\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [{\n          \"type\": \"custom\",\n          \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n          \"version\": \"latest\"\n        }]\n      },\n      \"messages\": [{\"role\": \"user\", \"content\": \"Use latest Skill version\"}],\n      \"tools\": [{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n    }'\n  ```\n</CodeGroup>\n\nSee the [Create Skill Version API reference](/en/api/skills/create-skill-version) for complete details.\n\n***\n\n## How Skills Are Loaded\n\nWhen you specify Skills in a container:\n\n1. **Metadata Discovery**: Claude sees metadata for each Skill (name, description) in the system prompt\n2. **File Loading**: Skill files are copied into the container at `/skills/{directory}/`\n3. **Automatic Use**: Claude automatically loads and uses Skills when relevant to your request\n4. **Composition**: Multiple Skills compose together for complex workflows\n\nThe progressive disclosure architecture ensures efficient context usage—Claude only loads full Skill instructions when needed.\n\n***\n\n## Use Cases\n\n### Organizational Skills\n\n**Brand & Communications**\n\n* Apply company-specific formatting (colors, fonts, layouts) to documents\n* Generate communications following organizational templates\n* Ensure consistent brand guidelines across all outputs\n\n**Project Management**\n\n* Structure notes with company-specific formats (OKRs, decision logs)\n* Generate tasks following team conventions\n* Create standardized meeting recaps and status updates\n\n**Business Operations**\n\n* Create company-standard reports, proposals, and analyses\n* Execute company-specific analytical procedures\n* Generate financial models following organizational templates\n\n### Personal Skills\n\n**Content Creation**\n\n* Custom document templates\n* Specialized formatting and styling\n* Domain-specific content generation\n\n**Data Analysis**\n\n* Custom data processing pipelines\n* Specialized visualization templates\n* Industry-specific analytical methods\n\n**Development & Automation**\n\n* Code generation templates\n* Testing frameworks\n* Deployment workflows\n\n### Example: Financial Modeling\n\nCombine Excel and custom DCF analysis Skills:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # Create custom DCF analysis Skill\n  from anthropic.lib import files_from_dir\n\n  dcf_skill = client.beta.skills.create(\n      display_title=\"DCF Analysis\",\n      files=files_from_dir(\"/path/to/dcf_skill\"),\n      betas=[\"skills-2025-10-02\"]\n  )\n\n  # Use with Excel to create financial model\n  response = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n      container={\n          \"skills\": [\n              {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"},\n              {\"type\": \"custom\", \"skill_id\": dcf_skill.id, \"version\": \"latest\"}\n          ]\n      },\n      messages=[{\n          \"role\": \"user\",\n          \"content\": \"Build a DCF valuation model for a SaaS company with the attached financials\"\n      }],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // Create custom DCF analysis Skill\n  import { toFile } from '@anthropic-ai/sdk';\n  import fs from 'fs';\n\n  const dcfSkill = await client.beta.skills.create({\n    displayTitle: 'DCF Analysis',\n    files: [\n      await toFile(fs.createReadStream('dcf_skill.zip'), 'skill.zip')\n    ],\n    betas: ['skills-2025-10-02']\n  });\n\n  // Use with Excel to create financial model\n  const response = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n    container: {\n      skills: [\n        {type: 'anthropic', skill_id: 'xlsx', version: 'latest'},\n        {type: 'custom', skill_id: dcfSkill.id, version: 'latest'}\n      ]\n    },\n    messages: [{\n      role: 'user',\n      content: 'Build a DCF valuation model for a SaaS company with the attached financials'\n    }],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n  ```\n\n  ```bash Shell theme={null}\n  # Create custom DCF analysis Skill\n  DCF_SKILL=$(curl -X POST \"https://api.anthropic.com/v1/skills\" \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: skills-2025-10-02\" \\\n    -F \"display_title=DCF Analysis\" \\\n    -F \"files[]=@dcf_skill/SKILL.md;filename=dcf_skill/SKILL.md\")\n\n  DCF_SKILL_ID=$(echo \"$DCF_SKILL\" | jq -r '.id')\n\n  # Use with Excel to create financial model\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02\" \\\n    -H \"content-type: application/json\" \\\n    -d \"{\n      \\\"model\\\": \\\"claude-sonnet-4-5-20250929\\\",\n      \\\"max_tokens\\\": 4096,\n      \\\"container\\\": {\n        \\\"skills\\\": [\n          {\n            \\\"type\\\": \\\"anthropic\\\",\n            \\\"skill_id\\\": \\\"xlsx\\\",\n            \\\"version\\\": \\\"latest\\\"\n          },\n          {\n            \\\"type\\\": \\\"custom\\\",\n            \\\"skill_id\\\": \\\"$DCF_SKILL_ID\\\",\n            \\\"version\\\": \\\"latest\\\"\n          }\n        ]\n      },\n      \\\"messages\\\": [{\n        \\\"role\\\": \\\"user\\\",\n        \\\"content\\\": \\\"Build a DCF valuation model for a SaaS company with the attached financials\\\"\n      }],\n      \\\"tools\\\": [{\n        \\\"type\\\": \\\"code_execution_20250825\\\",\n        \\\"name\\\": \\\"code_execution\\\"\n      }]\n    }\"\n  ```\n</CodeGroup>\n\n***\n\n## Limits and Constraints\n\n### Request Limits\n\n* **Maximum Skills per request**: 8\n* **Maximum Skill upload size**: 8MB (all files combined)\n* **YAML frontmatter requirements**:\n  * `name`: Maximum 64 characters, lowercase letters/numbers/hyphens only, no XML tags, no reserved words\n  * `description`: Maximum 1024 characters, non-empty, no XML tags\n\n### Environment Constraints\n\nSkills run in the code execution container with these limitations:\n\n* **No network access** - Cannot make external API calls\n* **No runtime package installation** - Only pre-installed packages available\n* **Isolated environment** - Each request gets a fresh container\n\nSee the [code execution tool documentation](/en/docs/agents-and-tools/tool-use/code-execution-tool) for available packages.\n\n***\n\n## Best Practices\n\n### When to Use Multiple Skills\n\nCombine Skills when tasks involve multiple document types or domains:\n\n**Good use cases:**\n\n* Data analysis (Excel) + presentation creation (PowerPoint)\n* Report generation (Word) + export to PDF\n* Custom domain logic + document generation\n\n**Avoid:**\n\n* Including unused Skills (impacts performance)\n\n### Version Management Strategy\n\n**For production:**\n\n```python  theme={null}\n# Pin to specific versions for stability\ncontainer={\n    \"skills\": [{\n        \"type\": \"custom\",\n        \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n        \"version\": \"1759178010641129\"  # Specific version\n    }]\n}\n```\n\n**For development:**\n\n```python  theme={null}\n# Use latest for active development\ncontainer={\n    \"skills\": [{\n        \"type\": \"custom\",\n        \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\",\n        \"version\": \"latest\"  # Always get newest\n    }]\n}\n```\n\n### Prompt Caching Considerations\n\nWhen using prompt caching, note that changing the Skills list in your container will break the cache:\n\n<CodeGroup>\n  ```python Python theme={null}\n  # First request creates cache\n  response1 = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\", \"prompt-caching-2024-07-31\"],\n      container={\n          \"skills\": [\n              {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"}\n          ]\n      },\n      messages=[{\"role\": \"user\", \"content\": \"Analyze sales data\"}],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n\n  # Adding/removing Skills breaks cache\n  response2 = client.beta.messages.create(\n      model=\"claude-sonnet-4-5-20250929\",\n      max_tokens=4096,\n      betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\", \"prompt-caching-2024-07-31\"],\n      container={\n          \"skills\": [\n              {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"},\n              {\"type\": \"anthropic\", \"skill_id\": \"pptx\", \"version\": \"latest\"}  # Cache miss\n          ]\n      },\n      messages=[{\"role\": \"user\", \"content\": \"Create a presentation\"}],\n      tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n  )\n  ```\n\n  ```typescript TypeScript theme={null}\n  // First request creates cache\n  const response1 = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02', 'prompt-caching-2024-07-31'],\n    container: {\n      skills: [\n        {type: 'anthropic', skill_id: 'xlsx', version: 'latest'}\n      ]\n    },\n    messages: [{role: 'user', content: 'Analyze sales data'}],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n\n  // Adding/removing Skills breaks cache\n  const response2 = await client.beta.messages.create({\n    model: 'claude-sonnet-4-5-20250929',\n    max_tokens: 4096,\n    betas: ['code-execution-2025-08-25', 'skills-2025-10-02', 'prompt-caching-2024-07-31'],\n    container: {\n      skills: [\n        {type: 'anthropic', skill_id: 'xlsx', version: 'latest'},\n        {type: 'anthropic', skill_id: 'pptx', version: 'latest'}  // Cache miss\n      ]\n    },\n    messages: [{role: 'user', content: 'Create a presentation'}],\n    tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n  });\n  ```\n\n  ```bash Shell theme={null}\n  # First request creates cache\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02,prompt-caching-2024-07-31\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [\n          {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"}\n        ]\n      },\n      \"messages\": [{\"role\": \"user\", \"content\": \"Analyze sales data\"}],\n      \"tools\": [{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n    }'\n\n  # Adding/removing Skills breaks cache\n  curl https://api.anthropic.com/v1/messages \\\n    -H \"x-api-key: $ANTHROPIC_API_KEY\" \\\n    -H \"anthropic-version: 2023-06-01\" \\\n    -H \"anthropic-beta: code-execution-2025-08-25,skills-2025-10-02,prompt-caching-2024-07-31\" \\\n    -H \"content-type: application/json\" \\\n    -d '{\n      \"model\": \"claude-sonnet-4-5-20250929\",\n      \"max_tokens\": 4096,\n      \"container\": {\n        \"skills\": [\n          {\"type\": \"anthropic\", \"skill_id\": \"xlsx\", \"version\": \"latest\"},\n          {\"type\": \"anthropic\", \"skill_id\": \"pptx\", \"version\": \"latest\"}\n        ]\n      },\n      \"messages\": [{\"role\": \"user\", \"content\": \"Create a presentation\"}],\n      \"tools\": [{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n    }'\n  ```\n</CodeGroup>\n\nFor best caching performance, keep your Skills list consistent across requests.\n\n### Error Handling\n\nHandle Skill-related errors gracefully:\n\n<CodeGroup>\n  ```python Python theme={null}\n  try:\n      response = client.beta.messages.create(\n          model=\"claude-sonnet-4-5-20250929\",\n          max_tokens=4096,\n          betas=[\"code-execution-2025-08-25\", \"skills-2025-10-02\"],\n          container={\n              \"skills\": [\n                  {\"type\": \"custom\", \"skill_id\": \"skill_01AbCdEfGhIjKlMnOpQrStUv\", \"version\": \"latest\"}\n              ]\n          },\n          messages=[{\"role\": \"user\", \"content\": \"Process data\"}],\n          tools=[{\"type\": \"code_execution_20250825\", \"name\": \"code_execution\"}]\n      )\n  except anthropic.BadRequestError as e:\n      if \"skill\" in str(e):\n          print(f\"Skill error: {e}\")\n          # Handle skill-specific errors\n      else:\n          raise\n  ```\n\n  ```typescript TypeScript theme={null}\n  try {\n    const response = await client.beta.messages.create({\n      model: 'claude-sonnet-4-5-20250929',\n      max_tokens: 4096,\n      betas: ['code-execution-2025-08-25', 'skills-2025-10-02'],\n      container: {\n        skills: [\n          {type: 'custom', skill_id: 'skill_01AbCdEfGhIjKlMnOpQrStUv', version: 'latest'}\n        ]\n      },\n      messages: [{role: 'user', content: 'Process data'}],\n      tools: [{type: 'code_execution_20250825', name: 'code_execution'}]\n    });\n  } catch (error) {\n    if (error instanceof Anthropic.BadRequestError && error.message.includes('skill')) {\n      console.error(`Skill error: ${error.message}`);\n      // Handle skill-specific errors\n    } else {\n      throw error;\n    }\n  }\n  ```\n</CodeGroup>\n\n***\n\n## Next Steps\n\n<CardGroup cols={2}>\n  <Card title=\"API Reference\" icon=\"book\" href=\"/en/api/skills/create-skill\">\n    Complete API reference with all endpoints\n  </Card>\n\n  <Card title=\"Authoring Guide\" icon=\"pen\" href=\"/en/docs/agents-and-tools/agent-skills/best-practices\">\n    Best practices for writing effective Skills\n  </Card>\n\n  <Card title=\"Code Execution Tool\" icon=\"terminal\" href=\"/en/docs/agents-and-tools/tool-use/code-execution-tool\">\n    Learn about the code execution environment\n  </Card>\n</CardGroup>",
  "content_length": 49303
}