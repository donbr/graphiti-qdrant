{
  "title": "oauth",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-client-auth-oauth",
  "content": "# `fastmcp.client.auth.oauth`\n\n## Functions\n\n### `check_if_auth_required` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L41\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncheck_if_auth_required(mcp_url: str, httpx_kwargs: dict[str, Any] | None = None) -> bool\n```\n\nCheck if the MCP endpoint requires authentication by making a test request.\n\n**Returns:**\n\n* True if auth appears to be required, False otherwise\n\n## Classes\n\n### `ClientNotFoundError` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L37\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRaised when OAuth client credentials are not found on the server.\n\n### `TokenStorageAdapter` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L71\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `clear` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclear(self) -> None\n```\n\n#### `get_tokens` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L104\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_tokens(self) -> OAuthToken | None\n```\n\n#### `set_tokens` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L108\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nset_tokens(self, tokens: OAuthToken) -> None\n```\n\n#### `get_client_info` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L116\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_client_info(self) -> OAuthClientInformationFull | None\n```\n\n#### `set_client_info` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L122\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nset_client_info(self, client_info: OAuthClientInformationFull) -> None\n```\n\n### `OAuth` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L135\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nOAuth client provider for MCP servers with browser-based authentication.\n\nThis class provides OAuth authentication for FastMCP clients by opening\na browser for user authorization and running a local callback server.\n\n**Methods:**\n\n#### `redirect_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L229\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nredirect_handler(self, authorization_url: str) -> None\n```\n\nOpen browser for authorization, with pre-flight check for invalid client.\n\n#### `callback_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L250\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncallback_handler(self) -> tuple[str, str | None]\n```\n\nHandle OAuth callback and return (auth\\_code, state).\n\n#### `async_auth_flow` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/auth/oauth.py#L289\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nasync_auth_flow(self, request: httpx.Request) -> AsyncGenerator[httpx.Request, httpx.Response]\n```\n\nHTTPX auth flow with automatic retry on stale cached credentials.\n\nIf the OAuth flow fails due to invalid/stale client credentials,\nclears the cache and retries once with fresh registration.",
  "content_length": 4480
}