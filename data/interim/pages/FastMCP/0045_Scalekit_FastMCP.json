{
  "title": "Scalekit ðŸ¤ FastMCP",
  "source_url": "https://gofastmcp.com/integrations/scalekit",
  "content": "Secure your FastMCP server with Scalekit\n\nexport const VersionBadge = ({version}) => {\n  return <code className=\"version-badge-container\">\n            <p className=\"version-badge\">\n                <span className=\"version-badge-label\">New in version:</span>Â \n                <code className=\"version-badge-version\">{version}</code>\n            </p>\n        </code>;\n};\n\n<VersionBadge version=\"2.13.0\" />\n\nInstall auth stack to your FastMCP server with [Scalekit](https://scalekit.com) using the [Remote OAuth](/servers/auth/remote-oauth) pattern: Scalekit handles user authentication, and the MCP server validates issued tokens.\n\n### Prerequisites\n\nBefore you begin\n\n1. Get a [Scalekit account](https://app.scalekit.com/) and grab your **Environment URL** from *Dashboard > Settings* .\n2. Have your FastMCP server's base URL ready (can be localhost for development, e.g., `http://localhost:8000/`)\n\n### Step 1: Configure MCP server in Scalekit environment\n\n<Steps>\n  <Step title=\"Register MCP server and set environment\">\n    In your Scalekit dashboard:\n\n    1. Open the **MCP Servers** section, then select **Create new server**\n    2. Enter server details: a name, a resource identifier, and the desired MCP client authentication settings\n    3. Save, then copy the **Resource ID** (for example, res\\_92015146095)\n\n    In your FastMCP project's `.env`:\n\n    ```sh  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n    SCALEKIT_ENVIRONMENT_URL=<YOUR_APP_ENVIRONMENT_URL>\n    SCALEKIT_RESOURCE_ID=<YOUR_APP_RESOURCE_ID> # res_926EXAMPLE5878\n    BASE_URL=http://localhost:8000/\n    # Optional: additional scopes tokens must have\n    # SCALEKIT_REQUIRED_SCOPES=read,write\n    ```\n  </Step>\n</Steps>\n\n### Step 2: Add auth to FastMCP server\n\nCreate your FastMCP server file and use the ScalekitProvider to handle all the OAuth integration automatically:\n\n> **Warning:** The legacy `mcp_url` and `client_id` parameters are deprecated and will be removed in a future release. Use `base_url` instead of `mcp_url` and remove `client_id` from your configuration.\n\n```python server.py theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom fastmcp.server.auth.providers.scalekit import ScalekitProvider\n\n# Discovers Scalekit endpoints and set up JWT token validation\nauth_provider = ScalekitProvider(\n    environment_url=SCALEKIT_ENVIRONMENT_URL,    # Scalekit environment URL\n    resource_id=SCALEKIT_RESOURCE_ID,            # Resource server ID\n    base_url=SERVER_URL,                         # Public MCP endpoint\n    required_scopes=[\"read\"],                    # Optional scope enforcement\n)\n\n# Create FastMCP server with auth\nmcp = FastMCP(name=\"My Scalekit Protected Server\", auth=auth_provider)\n\n@mcp.tool\ndef auth_status() -> dict:\n    \"\"\"Show Scalekit authentication status.\"\"\"\n    # Extract user claims from the JWT\n    return {\n        \"message\": \"This tool requires authentication via Scalekit\",\n        \"authenticated\": True,\n        \"provider\": \"Scalekit\"\n    }\n\n```\n\n<Tip>\n  Set `required_scopes` when you need tokens to carry specific permissions. Leave it unset to allow any token issued for the resource.\n</Tip>\n\n## Testing\n\n### Start the MCP server\n\n```sh  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nuv run python server.py\n```\n\nUse any MCP client (for example, mcp-inspector, Claude, VS Code, or Windsurf) to connect to the running serve. Verify that authentication succeeds and requests are authorized as expected.\n\n### Provider selection\n\nSetting this environment variable allows the Scalekit provider to be used automatically without explicitly instantiating it in code.\n\n<Card>\n  <ParamField path=\"FASTMCP_SERVER_AUTH\" default=\"Not set\">\n    Set to `fastmcp.server.auth.providers.scalekit.ScalekitProvider` to use Scalekit authentication.\n  </ParamField>\n</Card>\n\n### Scalekit-specific configuration\n\nThese environment variables provide default values for the Scalekit provider, whether it's instantiated manually or configured via `FASTMCP_SERVER_AUTH`.\n\n<Card>\n  <ParamField path=\"FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_ENVIRONMENT_URL\" required>\n    Your Scalekit environment URL from the Admin Portal (e.g., `https://your-env.scalekit.com`)\n  </ParamField>\n\n  <ParamField path=\"FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_RESOURCE_ID\" required>\n    Your Scalekit resource server ID from the MCP Servers section\n  </ParamField>\n\n  <ParamField path=\"FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_BASE_URL\" required>\n    Public URL of your FastMCP server (e.g., `https://your-server.com` or `http://localhost:8000/` for development)\n  </ParamField>\n\n  Legacy `FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_MCP_URL` is still recognized for backward compatibility but will be removed soon-rename it to `...BASE_URL`.\n\n  <ParamField path=\"FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_REQUIRED_SCOPES\" default=\"[]\">\n    Comma-, space-, or JSON-separated list of scopes that tokens must include to access your server\n  </ParamField>\n</Card>\n\nExample `.env`:\n\n```bash  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# Use the Scalekit provider\nFASTMCP_SERVER_AUTH=fastmcp.server.auth.providers.scalekit.ScalekitProvider\n\n# Scalekit configuration\nFASTMCP_SERVER_AUTH_SCALEKITPROVIDER_ENVIRONMENT_URL=https://your-env.scalekit.com\nFASTMCP_SERVER_AUTH_SCALEKITPROVIDER_RESOURCE_ID=res_456\nFASTMCP_SERVER_AUTH_SCALEKITPROVIDER_BASE_URL=https://your-server.com/\n# FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_REQUIRED_SCOPES=read,write\n# FASTMCP_SERVER_AUTH_SCALEKITPROVIDER_MCP_URL=https://your-server.com/  # Deprecated\n```\n\nWith environment variables set, your server code simplifies to:\n\n```python server.py theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\n\n# Authentication is automatically configured from environment\nmcp = FastMCP(name=\"My Scalekit Protected Server\")\n\n@mcp.tool\ndef protected_action() -> str:\n    \"\"\"A tool that requires authentication.\"\"\"\n    return \"Access granted via Scalekit!\"\n```\n\n## Capabilities\n\nScalekit supports OAuth 2.1 with Dynamic Client Registration for MCP clients and enterprise SSO, and provides builtâ€‘in JWT validation and security controls.\n\n**OAuth 2.1/DCR**: clients selfâ€‘register, use PKCE, and work with the Remote OAuth pattern without preâ€‘provisioned credentials.\n\n**Validation and SSO**: tokens are verified (keys, RS256, issuer, audience, expiry), and SAML, OIDC, OAuth 2.0, ADFS, Azure AD, and Google Workspace are supported; use HTTPS in production and review auth logs as needed.\n\n## Debugging\n\nEnable detailed logging to troubleshoot authentication issues:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nimport logging\nlogging.basicConfig(level=logging.DEBUG)\n```\n\n### Token inspection\n\nYou can inspect JWT tokens in your tools to understand the user context:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp.server.context import request_ctx\nimport jwt\n\n@mcp.tool\ndef inspect_token() -> dict:\n    \"\"\"Inspect the current JWT token claims.\"\"\"\n    context = request_ctx.get()\n\n    # Extract token from Authorization header\n    if hasattr(context, 'request') and hasattr(context.request, 'headers'):\n        auth_header = context.request.headers.get('authorization', '')\n        if auth_header.startswith('Bearer '):\n            token = auth_header[7:]\n            # Decode without verification (already verified by provider)\n            claims = jwt.decode(token, options={\"verify_signature\": False})\n            return claims\n\n    return {\"error\": \"No token found\"}\n```",
  "content_length": 7566
}