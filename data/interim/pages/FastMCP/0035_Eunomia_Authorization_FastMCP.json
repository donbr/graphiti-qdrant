{
  "title": "Eunomia Authorization ðŸ¤ FastMCP",
  "source_url": "https://gofastmcp.com/integrations/eunomia-authorization",
  "content": "Add policy-based authorization to your FastMCP servers with Eunomia\n\nAdd **policy-based authorization** to your FastMCP servers with one-line code addition with the **[Eunomia][eunomia-github] authorization middleware**.\n\nControl which tools, resources and prompts MCP clients can view and execute on your server. Define dynamic JSON-based policies and obtain a comprehensive audit log of all access attempts and violations.\n\n## How it Works\n\nExploiting FastMCP's [Middleware][fastmcp-middleare], the Eunomia middleware intercepts all MCP requests to your server and automatically maps MCP methods to authorization checks.\n\n### Listing Operations\n\nThe middleware behaves as a filter for listing operations (`tools/list`, `resources/list`, `prompts/list`), hiding to the client components that are not authorized by the defined policies.\n\n```mermaid  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsequenceDiagram\n    participant MCPClient as MCP Client\n    participant EunomiaMiddleware as Eunomia Middleware\n    participant MCPServer as FastMCP Server\n    participant EunomiaServer as Eunomia Server\n\n    MCPClient->>EunomiaMiddleware: MCP Listing Request (e.g., tools/list)\n    EunomiaMiddleware->>MCPServer: MCP Listing Request\n    MCPServer-->>EunomiaMiddleware: MCP Listing Response\n    EunomiaMiddleware->>EunomiaServer: Authorization Checks\n    EunomiaServer->>EunomiaMiddleware: Authorization Decisions\n    EunomiaMiddleware-->>MCPClient: Filtered MCP Listing Response\n```\n\n### Execution Operations\n\nThe middleware behaves as a firewall for execution operations (`tools/call`, `resources/read`, `prompts/get`), blocking operations that are not authorized by the defined policies.\n\n```mermaid  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsequenceDiagram\n    participant MCPClient as MCP Client\n    participant EunomiaMiddleware as Eunomia Middleware\n    participant MCPServer as FastMCP Server\n    participant EunomiaServer as Eunomia Server\n\n    MCPClient->>EunomiaMiddleware: MCP Execution Request (e.g., tools/call)\n    EunomiaMiddleware->>EunomiaServer: Authorization Check\n    EunomiaServer->>EunomiaMiddleware: Authorization Decision\n    EunomiaMiddleware-->>MCPClient: MCP Unauthorized Error (if denied)\n    EunomiaMiddleware->>MCPServer: MCP Execution Request (if allowed)\n    MCPServer-->>EunomiaMiddleware: MCP Execution Response (if allowed)\n    EunomiaMiddleware-->>MCPClient: MCP Execution Response (if allowed)\n```\n\n## Add Authorization to Your Server\n\n<Note>\n  Eunomia is an AI-specific authorization server that handles policy decisions. The server runs embedded within your MCP server by default for a zero-effort configuration, but can alternatively be run remotely for centralized policy decisions.\n</Note>\n\n### Create a Server with Authorization\n\nFirst, install the `eunomia-mcp` package:\n\n```bash  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\npip install eunomia-mcp\n```\n\nThen create a FastMCP server and add the Eunomia middleware in one line:\n\n```python server.py theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom eunomia_mcp import create_eunomia_middleware\n\n# Create your FastMCP server\nmcp = FastMCP(\"Secure MCP Server ðŸ”’\")\n\n@mcp.tool()\ndef add(a: int, b: int) -> int:\n    \"\"\"Add two numbers\"\"\"\n    return a + b\n\n# Add middleware to your server\nmiddleware = create_eunomia_middleware(policy_file=\"mcp_policies.json\")\nmcp.add_middleware(middleware)\n\nif __name__ == \"__main__\":\n    mcp.run()\n```\n\n### Configure Access Policies\n\nUse the `eunomia-mcp` CLI in your terminal to manage your authorization policies:\n\n```bash  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# Create a default policy file\neunomia-mcp init\n\n# Or create a policy file customized for your FastMCP server\neunomia-mcp init --custom-mcp \"app.server:mcp\"\n```\n\nThis creates `mcp_policies.json` file that you can further edit to your access control needs.\n\n```bash  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# Once edited, validate your policy file\neunomia-mcp validate mcp_policies.json\n```\n\n### Run the Server\n\nStart your FastMCP server normally:\n\n```bash  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\npython server.py\n```\n\nThe middleware will now intercept all MCP requests and check them against your policies. Requests include agent identification through headers like `X-Agent-ID`, `X-User-ID`, `User-Agent`, or `Authorization` and an automatic mapping of MCP methods to authorization resources and actions.\n\n<Tip>\n  For detailed policy configuration, custom authentication, and remote\n  deployments, visit the [Eunomia MCP Middleware\n  repository][eunomia-mcp-github].\n</Tip>\n\n[eunomia-github]: https://github.com/whataboutyou-ai/eunomia\n\n[eunomia-mcp-github]: https://github.com/whataboutyou-ai/eunomia/tree/main/pkgs/extensions/mcp\n\n[fastmcp-middleare]: /servers/middleware",
  "content_length": 4912
}