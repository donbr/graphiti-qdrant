{
  "title": "Progress Reporting",
  "source_url": "https://gofastmcp.com/servers/progress",
  "content": "Update clients on the progress of long-running operations through the MCP context.\n\nexport const VersionBadge = ({version}) => {\n  return <code className=\"version-badge-container\">\n            <p className=\"version-badge\">\n                <span className=\"version-badge-label\">New in version:</span>Â \n                <code className=\"version-badge-version\">{version}</code>\n            </p>\n        </code>;\n};\n\nProgress reporting allows MCP tools to notify clients about the progress of long-running operations. This enables clients to display progress indicators and provide better user experience during time-consuming tasks.\n\n## Why Use Progress Reporting?\n\nProgress reporting is valuable for:\n\n* **User experience**: Keep users informed about long-running operations\n* **Progress indicators**: Enable clients to show progress bars or percentages\n* **Timeout prevention**: Demonstrate that operations are actively progressing\n* **Debugging**: Track execution progress for performance analysis\n\n### Basic Usage\n\nUse `ctx.report_progress()` to send progress updates to the client:\n\n```python {14, 21} theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP, Context\nimport asyncio\n\nmcp = FastMCP(\"ProgressDemo\")\n\n@mcp.tool\nasync def process_items(items: list[str], ctx: Context) -> dict:\n    \"\"\"Process a list of items with progress updates.\"\"\"\n    total = len(items)\n    results = []\n    \n    for i, item in enumerate(items):\n        # Report progress as we process each item\n        await ctx.report_progress(progress=i, total=total)\n        \n        # Simulate processing time\n        await asyncio.sleep(0.1)\n        results.append(item.upper())\n    \n    # Report 100% completion\n    await ctx.report_progress(progress=total, total=total)\n    \n    return {\"processed\": len(results), \"results\": results}\n```\n\n## Method Signature\n\n<Card icon=\"code\" title=\"Context Progress Method\">\n  <ResponseField name=\"ctx.report_progress\" type=\"async method\">\n    Report progress to the client for long-running operations\n\n    <Expandable title=\"Parameters\">\n      <ResponseField name=\"progress\" type=\"float\">\n        Current progress value (e.g., 24, 0.75, 1500)\n      </ResponseField>\n\n      <ResponseField name=\"total\" type=\"float | None\" default=\"None\">\n        Optional total value (e.g., 100, 1.0, 2000). When provided, clients may interpret this as enabling percentage calculation.\n      </ResponseField>\n    </Expandable>\n  </ResponseField>\n</Card>\n\n## Progress Patterns\n\n### Percentage-Based Progress\n\nReport progress as a percentage (0-100):\n\n```python {13-14} theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n@mcp.tool\nasync def download_file(url: str, ctx: Context) -> str:\n    \"\"\"Download a file with percentage progress.\"\"\"\n    total_size = 1000  # KB\n    downloaded = 0\n    \n    while downloaded < total_size:\n        # Download chunk\n        chunk_size = min(50, total_size - downloaded)\n        downloaded += chunk_size\n        \n        # Report percentage progress\n        percentage = (downloaded / total_size) * 100\n        await ctx.report_progress(progress=percentage, total=100)\n        \n        await asyncio.sleep(0.1)  # Simulate download time\n    \n    return f\"Downloaded file from {url}\"\n```\n\n### Absolute Progress\n\nReport progress with absolute values:\n\n```python {10} theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n@mcp.tool\nasync def backup_database(ctx: Context) -> str:\n    \"\"\"Backup database tables with absolute progress.\"\"\"\n    tables = [\"users\", \"orders\", \"products\", \"inventory\", \"logs\"]\n    \n    for i, table in enumerate(tables):\n        await ctx.info(f\"Backing up table: {table}\")\n        \n        # Report absolute progress\n        await ctx.report_progress(progress=i + 1, total=len(tables))\n        \n        # Simulate backup time\n        await asyncio.sleep(0.5)\n    \n    return \"Database backup completed\"\n```\n\n### Indeterminate Progress\n\nReport progress without a known total for operations where the endpoint is unknown:\n\n```python {11} theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n@mcp.tool\nasync def scan_directory(directory: str, ctx: Context) -> dict:\n    \"\"\"Scan directory with indeterminate progress.\"\"\"\n    files_found = 0\n    \n    # Simulate directory scanning\n    for i in range(10):  # Unknown number of files\n        files_found += 1\n        \n        # Report progress without total for indeterminate operations\n        await ctx.report_progress(progress=files_found)\n        \n        await asyncio.sleep(0.2)\n    \n    return {\"files_found\": files_found, \"directory\": directory}\n```\n\n### Multi-Stage Operations\n\nBreak complex operations into stages with progress for each:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n@mcp.tool\nasync def data_migration(source: str, destination: str, ctx: Context) -> str:\n    \"\"\"Migrate data with multi-stage progress reporting.\"\"\"\n    \n    # Stage 1: Validation (0-25%)\n    await ctx.info(\"Validating source data\")\n    for i in range(5):\n        await ctx.report_progress(progress=i * 5, total=100)\n        await asyncio.sleep(0.1)\n    \n    # Stage 2: Export (25-60%)\n    await ctx.info(\"Exporting data from source\")\n    for i in range(7):\n        progress = 25 + (i * 5)\n        await ctx.report_progress(progress=progress, total=100)\n        await asyncio.sleep(0.1)\n    \n    # Stage 3: Transform (60-80%)\n    await ctx.info(\"Transforming data format\")\n    for i in range(4):\n        progress = 60 + (i * 5)\n        await ctx.report_progress(progress=progress, total=100)\n        await asyncio.sleep(0.1)\n    \n    # Stage 4: Import (80-100%)\n    await ctx.info(\"Importing to destination\")\n    for i in range(4):\n        progress = 80 + (i * 5)\n        await ctx.report_progress(progress=progress, total=100)\n        await asyncio.sleep(0.1)\n    \n    # Final completion\n    await ctx.report_progress(progress=100, total=100)\n    \n    return f\"Migration from {source} to {destination} completed\"\n```\n\n## Client Requirements\n\nProgress reporting requires clients to support progress handling:\n\n* Clients must send a `progressToken` in the initial request to receive progress updates\n* If no progress token is provided, progress calls will have no effect (they won't error)\n* See [Client Progress](/clients/progress) for details on implementing client-side progress handling",
  "content_length": 6355
}