{
  "title": "caching",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-server-middleware-caching",
  "content": "# `fastmcp.server.middleware.caching`\n\nA middleware for response caching.\n\n## Classes\n\n### `CachableReadResourceContents` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L38\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA wrapper for ReadResourceContents that can be cached.\n\n**Methods:**\n\n#### `get_size` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L44\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_size(self) -> int\n```\n\n#### `get_sizes` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L48\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_sizes(cls, values: Sequence[Self]) -> int\n```\n\n#### `wrap` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L52\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nwrap(cls, values: Sequence[ReadResourceContents]) -> list[Self]\n```\n\n#### `unwrap` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L56\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nunwrap(cls, values: Sequence[Self]) -> list[ReadResourceContents]\n```\n\n### `CachableToolResult` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L63\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n**Methods:**\n\n#### `wrap` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L69\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nwrap(cls, value: ToolResult) -> Self\n```\n\n#### `unwrap` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L76\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nunwrap(self) -> ToolResult\n```\n\n### `SharedMethodSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L84\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nShared config for a cache method.\n\n### `ListToolsSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L91\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nConfiguration options for Tool-related caching.\n\n### `ListResourcesSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L95\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nConfiguration options for Resource-related caching.\n\n### `ListPromptsSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L99\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nConfiguration options for Prompt-related caching.\n\n### `CallToolSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L103\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nConfiguration options for Tool-related caching.\n\n### `ReadResourceSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L110\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nConfiguration options for Resource-related caching.\n\n### `GetPromptSettings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L114\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nConfiguration options for Prompt-related caching.\n\n### `ResponseCachingStatistics` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L118\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n### `ResponseCachingMiddleware` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L127\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nThe response caching middleware offers a simple way to cache responses to mcp methods. The Middleware\nsupports cache invalidation via notifications from the server. The Middleware implements TTL-based caching\nbut cache implementations may offer additional features like LRU eviction, size limits, and more.\n\nWhen items are retrieved from the cache they will no longer be the original objects, but rather no-op objects\nthis means that response caching may not be compatible with other middleware that expects original subclasses.\n\nNotes:\n\n* Caches `tools/call`, `resources/read`, `prompts/get`, `tools/list`, `resources/list`, and `prompts/list` requests.\n* Cache keys are derived from method name and arguments.\n\n**Methods:**\n\n#### `on_list_tools` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L233\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_tools(self, context: MiddlewareContext[mcp.types.ListToolsRequest], call_next: CallNext[mcp.types.ListToolsRequest, Sequence[Tool]]) -> Sequence[Tool]\n```\n\nList tools from the cache, if caching is enabled, and the result is in the cache. Otherwise,\notherwise call the next middleware and store the result in the cache if caching is enabled.\n\n#### `on_list_resources` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L273\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_resources(self, context: MiddlewareContext[mcp.types.ListResourcesRequest], call_next: CallNext[mcp.types.ListResourcesRequest, Sequence[Resource]]) -> Sequence[Resource]\n```\n\nList resources from the cache, if caching is enabled, and the result is in the cache. Otherwise,\notherwise call the next middleware and store the result in the cache if caching is enabled.\n\n#### `on_list_prompts` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L313\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_prompts(self, context: MiddlewareContext[mcp.types.ListPromptsRequest], call_next: CallNext[mcp.types.ListPromptsRequest, Sequence[Prompt]]) -> Sequence[Prompt]\n```\n\nList prompts from the cache, if caching is enabled, and the result is in the cache. Otherwise,\notherwise call the next middleware and store the result in the cache if caching is enabled.\n\n#### `on_call_tool` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L351\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_call_tool(self, context: MiddlewareContext[mcp.types.CallToolRequestParams], call_next: CallNext[mcp.types.CallToolRequestParams, ToolResult]) -> ToolResult\n```\n\nCall a tool from the cache, if caching is enabled, and the result is in the cache. Otherwise,\notherwise call the next middleware and store the result in the cache if caching is enabled.\n\n#### `on_read_resource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L384\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_read_resource(self, context: MiddlewareContext[mcp.types.ReadResourceRequestParams], call_next: CallNext[mcp.types.ReadResourceRequestParams, Sequence[ReadResourceContents]]) -> Sequence[ReadResourceContents]\n```\n\nRead a resource from the cache, if caching is enabled, and the result is in the cache. Otherwise,\notherwise call the next middleware and store the result in the cache if caching is enabled.\n\n#### `on_get_prompt` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L414\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_get_prompt(self, context: MiddlewareContext[mcp.types.GetPromptRequestParams], call_next: CallNext[mcp.types.GetPromptRequestParams, mcp.types.GetPromptResult]) -> mcp.types.GetPromptResult\n```\n\nGet a prompt from the cache, if caching is enabled, and the result is in the cache. Otherwise,\notherwise call the next middleware and store the result in the cache if caching is enabled.\n\n#### `statistics` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/caching.py#L454\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nstatistics(self) -> ResponseCachingStatistics\n```\n\nGet the statistics for the cache.",
  "content_length": 9858
}