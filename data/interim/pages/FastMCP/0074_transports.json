{
  "title": "transports",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-client-transports",
  "content": "# `fastmcp.client.transports`\n\n## Functions\n\n### `infer_transport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L1026\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ninfer_transport(transport: ClientTransport | FastMCP | FastMCP1Server | AnyUrl | Path | MCPConfig | dict[str, Any] | str) -> ClientTransport\n```\n\nInfer the appropriate transport type from the given transport argument.\n\nThis function attempts to infer the correct transport type from the provided\nargument, handling various input types and converting them to the appropriate\nClientTransport subclass.\n\nThe function supports these input types:\n\n* ClientTransport: Used directly without modification\n* FastMCP or FastMCP1Server: Creates an in-memory FastMCPTransport\n* Path or str (file path): Creates PythonStdioTransport (.py) or NodeStdioTransport (.js)\n* AnyUrl or str (URL): Creates StreamableHttpTransport (default) or SSETransport (for /sse endpoints)\n* MCPConfig or dict: Creates MCPConfigTransport, potentially connecting to multiple servers\n\nFor HTTP URLs, they are assumed to be Streamable HTTP URLs unless they end in `/sse`.\n\nFor MCPConfig with multiple servers, a composite client is created where each server\nis mounted with its name as prefix. This allows accessing tools and resources from multiple\nservers through a single unified client interface, using naming patterns like\n`servername_toolname` for tools and `protocol://servername/path` for resources.\nIf the MCPConfig contains only one server, a direct connection is established without prefixing.\n\n**Examples:**\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# Connect to a local Python script\ntransport = infer_transport(\"my_script.py\")\n\n# Connect to a remote server via HTTP\ntransport = infer_transport(\"http://example.com/mcp\")\n\n# Connect to multiple servers using MCPConfig\nconfig = {\n    \"mcpServers\": {\n        \"weather\": {\"url\": \"http://weather.example.com/mcp\"},\n        \"calendar\": {\"url\": \"http://calendar.example.com/mcp\"}\n    }\n}\ntransport = infer_transport(config)\n```\n\n## Classes\n\n### `SessionKwargs` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L63\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nKeyword arguments for the MCP ClientSession constructor.\n\n### `ClientTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L75\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nAbstract base class for different MCP client transport mechanisms.\n\nA Transport is responsible for establishing and managing connections\nto an MCP server, and providing a ClientSession within an async context.\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L86\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\nEstablishes a connection and yields an active ClientSession.\n\nThe ClientSession is *not* expected to be initialized in this context manager.\n\nThe session is guaranteed to be valid only within the scope of the\nasync context manager. Connection setup and teardown are handled\nwithin this context.\n\n**Args:**\n\n* `**session_kwargs`: Keyword arguments to pass to the ClientSession\n  constructor (e.g., callbacks, timeouts).\n\n#### `close` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L112\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclose(self)\n```\n\nClose the transport.\n\n### `WSTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L120\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport implementation that connects to an MCP server via WebSockets.\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L138\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\n### `SSETransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L159\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport implementation that connects to an MCP server via Server-Sent Events.\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L195\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\n### `StreamableHttpTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L229\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport implementation that connects to an MCP server via Streamable HTTP Requests.\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L265\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\n### `StdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L300\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nBase transport for connecting to an MCP server via subprocess with stdio.\n\nThis is a base class that can be subclassed for specific command-based\ntransports like Python, Node, Uvx, etc.\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L350\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\n#### `connect` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L362\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect(self, **session_kwargs: Unpack[SessionKwargs]) -> ClientSession | None\n```\n\n#### `disconnect` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L397\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndisconnect(self)\n```\n\n#### `close` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L412\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclose(self)\n```\n\n### `PythonStdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L482\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for running Python scripts.\n\n### `FastMCPStdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L535\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for running FastMCP servers using the FastMCP CLI.\n\n### `NodeStdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L564\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for running Node.js scripts.\n\n### `UvStdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L617\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for running commands via the uv tool.\n\n### `UvxStdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L696\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for running commands via the uvx tool.\n\n### `NpxStdioTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L761\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for running commands via the npx tool.\n\n### `FastMCPTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L823\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nIn-memory transport for FastMCP servers.\n\nThis transport connects directly to a FastMCP server instance in the same\nPython process. It works with both FastMCP 2.x servers and FastMCP 1.0\nservers from the low-level MCP SDK. This is particularly useful for unit\ntests or scenarios where client and server run in the same runtime.\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L842\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\n### `MCPConfigTransport` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L892\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nTransport for connecting to one or more MCP servers defined in an MCPConfig.\n\nThis transport provides a unified interface to multiple MCP servers defined in an MCPConfig\nobject or dictionary matching the MCPConfig schema. It supports two key scenarios:\n\n1. If the MCPConfig contains exactly one server, it creates a direct transport to that server.\n2. If the MCPConfig contains multiple servers, it creates a composite client by mounting\n   all servers on a single FastMCP instance, with each server's name, by default, used as its mounting prefix.\n\nIn the multi-server case, tools are accessible with the prefix pattern `{server_name}_{tool_name}`\nand resources with the pattern `protocol://{server_name}/path/to/resource`.\n\nThis is particularly useful for creating clients that need to interact with multiple specialized\nMCP servers through a single interface, simplifying client code.\n\n**Examples:**\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import Client\nfrom fastmcp.utilities.mcp_config import MCPConfig\n\n# Create a config with multiple servers\nconfig = {\n    \"mcpServers\": {\n        \"weather\": {\n            \"url\": \"https://weather-api.example.com/mcp\",\n            \"transport\": \"http\"\n        },\n        \"calendar\": {\n            \"url\": \"https://calendar-api.example.com/mcp\",\n            \"transport\": \"http\"\n        }\n    }\n}\n\n# Create a client with the config\nclient = Client(config)\n\nasync with client:\n    # Access tools with prefixes\n    weather = await client.call_tool(\"weather_get_forecast\", {\"city\": \"London\"})\n    events = await client.call_tool(\"calendar_list_events\", {\"date\": \"2023-06-01\"})\n\n    # Access resources with prefixed URIs\n    icons = await client.read_resource(\"weather://weather/icons/sunny\")\n```\n\n**Methods:**\n\n#### `connect_session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L974\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nconnect_session(self, **session_kwargs: Unpack[SessionKwargs]) -> AsyncIterator[ClientSession]\n```\n\n#### `close` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/client/transports.py#L980\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclose(self)\n```",
  "content_length": 12841
}