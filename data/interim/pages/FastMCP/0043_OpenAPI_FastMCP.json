{
  "title": "OpenAPI ü§ù FastMCP",
  "source_url": "https://gofastmcp.com/integrations/openapi",
  "content": "Generate MCP servers from any OpenAPI specification\n\nexport const VersionBadge = ({version}) => {\n  return <code className=\"version-badge-container\">\n            <p className=\"version-badge\">\n                <span className=\"version-badge-label\">New in version:</span>¬†\n                <code className=\"version-badge-version\">{version}</code>\n            </p>\n        </code>;\n};\n\n<VersionBadge version=\"2.0.0\" />\n\n<Tip>\n  **New in 2.11**: FastMCP is introducing a next-generation OpenAPI parser. The new parser has greatly improved performance and compatibility, and is also easier to maintain. To enable it, set the environment variable `FASTMCP_EXPERIMENTAL_ENABLE_NEW_OPENAPI_PARSER=true`.\n\n  The new parser is largely API-compatible with the existing implementation and will become the default in a future version. We encourage all users to test it and report any issues before it becomes the default.\n</Tip>\n\nFastMCP can automatically generate an MCP server from any OpenAPI specification, allowing AI models to interact with existing APIs through the MCP protocol. Instead of manually creating tools and resources, you provide an OpenAPI spec and FastMCP intelligently converts API endpoints into the appropriate MCP components.\n\n<Tip>\n  Generating MCP servers from OpenAPI is a great way to get started with FastMCP, but in practice LLMs achieve **significantly better performance** with well-designed and curated MCP servers than with auto-converted OpenAPI servers. This is especially true for complex APIs with many endpoints and parameters.\n\n  We recommend using the FastAPI integration for bootstrapping and prototyping, not for mirroring your API to LLM clients. See the post [Stop Converting Your REST APIs to MCP](https://www.jlowin.dev/blog/stop-converting-rest-apis-to-mcp) for more details.\n</Tip>\n\n## Create a Server\n\nTo convert an OpenAPI specification to an MCP server, use the `FastMCP.from_openapi()` class method:\n\n```python server.py theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nimport httpx\nfrom fastmcp import FastMCP\n\n# Create an HTTP client for your API\nclient = httpx.AsyncClient(base_url=\"https://api.example.com\")\n\n# Load your OpenAPI spec \nopenapi_spec = httpx.get(\"https://api.example.com/openapi.json\").json()\n\n# Create the MCP server\nmcp = FastMCP.from_openapi(\n    openapi_spec=openapi_spec,\n    client=client,\n    name=\"My API Server\"\n)\n\nif __name__ == \"__main__\":\n    mcp.run()\n```\n\n### Authentication\n\nIf your API requires authentication, configure it on the HTTP client:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nimport httpx\nfrom fastmcp import FastMCP\n\n# Bearer token authentication\napi_client = httpx.AsyncClient(\n    base_url=\"https://api.example.com\",\n    headers={\"Authorization\": \"Bearer YOUR_TOKEN\"}\n)\n\n# Create MCP server with authenticated client\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec, \n    client=api_client,\n    timeout=30.0  # 30 second timeout for all requests\n)\n```\n\n## Route Mapping\n\nBy default, FastMCP converts **every endpoint** in your OpenAPI specification into an MCP **Tool**. This provides a simple, predictable starting point that ensures all your API's functionality is immediately available to the vast majority of LLM clients which only support MCP tools.\n\nWhile this is a pragmatic default for maximum compatibility, you can easily customize this behavior. Internally, FastMCP uses an ordered list of `RouteMap` objects to determine how to map OpenAPI routes to various MCP component types.\n\nEach `RouteMap` specifies a combination of methods, patterns, and tags, as well as a corresponding MCP component type. Each OpenAPI route is checked against each `RouteMap` in order, and the first one that matches every criteria is used to determine its converted MCP type. A special type, `EXCLUDE`, can be used to exclude routes from the MCP server entirely.\n\n* **Methods**: HTTP methods to match (e.g. `[\"GET\", \"POST\"]` or `\"*\"` for all)\n* **Pattern**: Regex pattern to match the route path (e.g. `r\"^/users/.*\"` or `r\".*\"` for all)\n* **Tags**: A set of OpenAPI tags that must all be present. An empty set (`{}`) means no tag filtering, so the route matches regardless of its tags.\n* **MCP type**: What MCP component type to create (`TOOL`, `RESOURCE`, `RESOURCE_TEMPLATE`, or `EXCLUDE`)\n* **MCP tags**: A set of custom tags to add to components created from matching routes\n\nHere is FastMCP's default rule:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp.server.openapi import RouteMap, MCPType\n\nDEFAULT_ROUTE_MAPPINGS = [\n    # All routes become tools\n    RouteMap(mcp_type=MCPType.TOOL),\n]\n```\n\n<Tip>\n  **Experimental Parser**: If you're using the new parser (enabled via `FASTMCP_EXPERIMENTAL_ENABLE_NEW_OPENAPI_PARSER=true`), import from the experimental module instead:\n\n  ```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n  from fastmcp.experimental.server.openapi import RouteMap, MCPType\n  ```\n\n  The API is identical, but the implementation provides better performance and serverless compatibility.\n</Tip>\n\n### Custom Route Maps\n\nWhen creating your FastMCP server, you can customize routing behavior by providing your own list of `RouteMap` objects. Your custom maps are processed before the default route maps, and routes will be assigned to the first matching custom map.\n\nFor example, prior to FastMCP 2.8.0, GET requests were automatically mapped to `Resource` and `ResourceTemplate` components based on whether they had path parameters. (This was changed solely for client compatibility reasons.) You can restore this behavior by providing custom route maps:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom fastmcp.server.openapi import RouteMap, MCPType\n\n# Restore pre-2.8.0 semantic mapping\nsemantic_maps = [\n    # GET requests with path parameters become ResourceTemplates\n    RouteMap(methods=[\"GET\"], pattern=r\".*\\{.*\\}.*\", mcp_type=MCPType.RESOURCE_TEMPLATE),\n    # All other GET requests become Resources\n    RouteMap(methods=[\"GET\"], pattern=r\".*\", mcp_type=MCPType.RESOURCE),\n]\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    route_maps=semantic_maps,\n)\n```\n\nWith these maps, `GET` requests are handled semantically, and all other methods (`POST`, `PUT`, etc.) will fall through to the default rule and become `Tool`s.\n\nHere is a more complete example that uses custom route maps to convert all `GET` endpoints under `/analytics/` to tools while excluding all admin endpoints and all routes tagged \"internal\". All other routes will be handled by the default rules:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom fastmcp.server.openapi import RouteMap, MCPType\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    route_maps=[\n        # Analytics `GET` endpoints are tools\n        RouteMap(\n            methods=[\"GET\"], \n            pattern=r\"^/analytics/.*\", \n            mcp_type=MCPType.TOOL,\n        ),\n\n        # Exclude all admin endpoints\n        RouteMap(\n            pattern=r\"^/admin/.*\", \n            mcp_type=MCPType.EXCLUDE,\n        ),\n\n        # Exclude all routes tagged \"internal\"\n        RouteMap(\n            tags={\"internal\"},\n            mcp_type=MCPType.EXCLUDE,\n        ),\n    ],\n)\n```\n\n<Tip>\n  The default route maps are always applied after your custom maps, so you do not have to create route maps for every possible route.\n</Tip>\n\n### Excluding Routes\n\nTo exclude routes from the MCP server, use a route map to assign them to `MCPType.EXCLUDE`.\n\nYou can use this to remove sensitive or internal routes by targeting them specifically:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom fastmcp.server.openapi import RouteMap, MCPType\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    route_maps=[\n        RouteMap(pattern=r\"^/admin/.*\", mcp_type=MCPType.EXCLUDE),\n        RouteMap(tags={\"internal\"}, mcp_type=MCPType.EXCLUDE),\n    ],\n)\n```\n\nOr you can use a catch-all rule to exclude everything that your maps don't handle explicitly:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom fastmcp.server.openapi import RouteMap, MCPType\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    route_maps=[\n        # custom mapping logic goes here\n        # ... your specific route maps ...\n        # exclude all remaining routes\n        RouteMap(mcp_type=MCPType.EXCLUDE),\n    ],\n)\n```\n\n<Tip>\n  Using a catch-all exclusion rule will prevent the default route mappings from being applied, since it will match every remaining route. This is useful if you want to explicitly allow-list certain routes.\n</Tip>\n\n### Advanced Route Mapping\n\n<VersionBadge version=\"2.5.0\" />\n\nFor advanced use cases that require more complex logic, you can provide a `route_map_fn` callable. After the route map logic is applied, this function is called on each matched route and its assigned MCP component type. It can optionally return a different component type to override the mapped assignment. If it returns `None`, the assigned type is used.\n\nIn addition to more precise targeting of methods, patterns, and tags, this function can access any additional OpenAPI metadata about the route.\n\n<Tip>\n  The `route_map_fn` is called on all routes, even those that matched `MCPType.EXCLUDE` in your custom maps. This gives you an opportunity to customize the mapping or even override an exclusion.\n</Tip>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp import FastMCP\nfrom fastmcp.server.openapi import RouteMap, MCPType, HTTPRoute\n\ndef custom_route_mapper(route: HTTPRoute, mcp_type: MCPType) -> MCPType | None:\n    \"\"\"Advanced route type mapping.\"\"\"\n    # Convert all admin routes to tools regardless of HTTP method\n    if \"/admin/\" in route.path:\n        return MCPType.TOOL\n\n    elif \"internal\" in route.tags:\n        return MCPType.EXCLUDE\n    \n    # Convert user detail routes to templates even if they're POST\n    elif route.path.startswith(\"/users/\") and route.method == \"POST\":\n        return MCPType.RESOURCE_TEMPLATE\n    \n    # Use defaults for all other routes\n    return None\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    route_map_fn=custom_route_mapper,\n)\n```\n\n## Customization\n\n### Component Names\n\n<VersionBadge version=\"2.5.0\" />\n\nFastMCP automatically generates names for MCP components based on the OpenAPI specification. By default, it uses the `operationId` from your OpenAPI spec, up to the first double underscore (`__`).\n\nAll component names are automatically:\n\n* **Slugified**: Spaces and special characters are converted to underscores or removed\n* **Truncated**: Limited to 56 characters maximum to ensure compatibility\n* **Unique**: If multiple components have the same name, a number is automatically appended to make them unique\n\nFor more control over component names, you can provide an `mcp_names` dictionary that maps `operationId` values to your desired names. The `operationId` must be exactly as it appears in the OpenAPI spec. The provided name will always be slugified and truncated.\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    mcp_names={\n        \"list_users__with_pagination\": \"user_list\",\n        \"create_user__admin_required\": \"create_user\", \n        \"get_user_details__admin_required\": \"user_detail\",\n    }\n)\n```\n\nAny `operationId` not found in `mcp_names` will use the default strategy (operationId up to the first `__`).\n\n### Tags\n\n<VersionBadge version=\"2.8.0\" />\n\nFastMCP provides several ways to add tags to your MCP components, allowing you to categorize and organize them for better discoverability and filtering. Tags are combined from multiple sources to create the final set of tags on each component.\n\n#### RouteMap Tags\n\nYou can add custom tags to components created from specific routes using the `mcp_tags` parameter in `RouteMap`. These tags will be applied to all components created from routes that match that particular route map.\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp.server.openapi import RouteMap, MCPType\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    route_maps=[\n        # Add custom tags to all POST endpoints\n        RouteMap(\n            methods=[\"POST\"],\n            pattern=r\".*\",\n            mcp_type=MCPType.TOOL,\n            mcp_tags={\"write-operation\", \"api-mutation\"}\n        ),\n        \n        # Add different tags to detail view endpoints\n        RouteMap(\n            methods=[\"GET\"],\n            pattern=r\".*\\{.*\\}.*\",\n            mcp_type=MCPType.RESOURCE_TEMPLATE,\n            mcp_tags={\"detail-view\", \"parameterized\"}\n        ),\n        \n        # Add tags to list endpoints\n        RouteMap(\n            methods=[\"GET\"],\n            pattern=r\".*\",\n            mcp_type=MCPType.RESOURCE,\n            mcp_tags={\"list-data\", \"collection\"}\n        ),\n    ],\n)\n```\n\n#### Global Tags\n\nYou can add tags to **all** components by providing a `tags` parameter when creating your MCP server. These global tags will be applied to every component created from your OpenAPI specification.\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    tags={\"api-v2\", \"production\", \"external\"}\n)\n```\n\n#### OpenAPI Tags in Client Meta\n\nFastMCP automatically includes OpenAPI tags from your specification in the component's metadata. These tags are available to MCP clients through the `_meta._fastmcp.tags` field, allowing clients to filter and organize components based on the original OpenAPI tagging:\n\n<CodeGroup>\n  ```json {5} OpenAPI spec with tags theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n  {\n    \"paths\": {\n      \"/users\": {\n        \"get\": {\n          \"tags\": [\"users\", \"public\"],\n          \"operationId\": \"list_users\",\n          \"summary\": \"List all users\"\n        }\n      }\n    }\n  }\n  ```\n\n  ```python {6-9} Access OpenAPI tags in MCP client theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n  async with client:\n      tools = await client.list_tools()\n      for tool in tools:\n          if hasattr(tool, '_meta') and tool._meta:\n              # OpenAPI tags are now available in _fastmcp namespace!\n              fastmcp_meta = tool._meta.get('_fastmcp', {})\n              openapi_tags = fastmcp_meta.get('tags', [])\n              if 'users' in openapi_tags:\n                  print(f\"Found user-related tool: {tool.name}\")\n  ```\n</CodeGroup>\n\nThis makes it easy for clients to understand and organize API endpoints based on their original OpenAPI categorization.\n\n### Advanced Customization\n\n<VersionBadge version=\"2.5.0\" />\n\nBy default, FastMCP creates MCP components using a variety of metadata from the OpenAPI spec, such as incorporating the OpenAPI description into the MCP component description.\n\nAt times you may want to modify those MCP components in a variety of ways, such as adding LLM-specific instructions or tags. For fine-grained customization, you can provide a `mcp_component_fn` when creating the MCP server. After each MCP component has been created, this function is called on it and has the opportunity to modify it in-place.\n\n<Tip>\n  Your `mcp_component_fn` is expected to modify the component in-place, not to return a new component. The result of the function is ignored.\n</Tip>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom fastmcp.server.openapi import (\n    HTTPRoute, \n    OpenAPITool, \n    OpenAPIResource, \n    OpenAPIResourceTemplate,\n)\n\n# If using experimental parser, import from experimental module:\n# from fastmcp.experimental.server.openapi import (\n#     HTTPRoute,\n#     OpenAPITool,\n#     OpenAPIResource,\n#     OpenAPIResourceTemplate,\n# )\n\ndef customize_components(\n    route: HTTPRoute, \n    component: OpenAPITool | OpenAPIResource | OpenAPIResourceTemplate,\n) -> None:\n    # Add custom tags to all components\n    component.tags.add(\"openapi\")\n    \n    # Customize based on component type\n    if isinstance(component, OpenAPITool):\n        component.description = f\"üîß {component.description} (via API)\"\n    \n    if isinstance(component, OpenAPIResource):\n        component.description = f\"üìä {component.description}\"\n        component.tags.add(\"data\")\n\nmcp = FastMCP.from_openapi(\n    openapi_spec=spec,\n    client=client,\n    mcp_component_fn=customize_components,\n)\n```\n\n## Request Parameter Handling\n\nFastMCP intelligently handles different types of parameters in OpenAPI requests:\n\n### Query Parameters\n\nBy default, FastMCP only includes query parameters that have non-empty values. Parameters with `None` values or empty strings are automatically filtered out.\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# When calling this tool...\nawait client.call_tool(\"search_products\", {\n    \"category\": \"electronics\",  # ‚úÖ Included\n    \"min_price\": 100,           # ‚úÖ Included  \n    \"max_price\": None,          # ‚ùå Excluded\n    \"brand\": \"\",                # ‚ùå Excluded\n})\n\n# The HTTP request will be: GET /products?category=electronics&min_price=100\n```\n\n### Path Parameters\n\nPath parameters are typically required by REST APIs. FastMCP:\n\n* Filters out `None` values\n* Validates that all required path parameters are provided\n* Raises clear errors for missing required parameters\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# ‚úÖ This works\nawait client.call_tool(\"get_user\", {\"user_id\": 123})\n\n# ‚ùå This raises: \"Missing required path parameters: {'user_id'}\"\nawait client.call_tool(\"get_user\", {\"user_id\": None})\n```\n\n### Array Parameters\n\nFastMCP handles array parameters according to OpenAPI specifications:\n\n* **Query arrays**: Serialized based on the `explode` parameter (default: `True`)\n* **Path arrays**: Serialized as comma-separated values (OpenAPI 'simple' style)\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n# Query array with explode=true (default)\n# ?tags=red&tags=blue&tags=green\n\n# Query array with explode=false  \n# ?tags=red,blue,green\n\n# Path array (always comma-separated)\n# /items/red,blue,green\n```\n\n### Headers\n\nHeader parameters are automatically converted to strings and included in the HTTP request.",
  "content_length": 18529
}