{
  "title": "context",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-server-context",
  "content": "# `fastmcp.server.context`\n\n## Functions\n\n### `set_context` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L94\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nset_context(context: Context) -> Generator[Context, None, None]\n```\n\n## Classes\n\n### `LogData` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L70\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nData object for passing log arguments to client-side handlers.\n\nThis provides an interface to match the Python standard library logging,\nfor compatibility with structured logging.\n\n### `Context` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L103\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nContext object providing access to MCP capabilities.\n\nThis provides a cleaner interface to MCP's RequestContext functionality.\nIt gets injected into tool and resource functions that request it via type hints.\n\nTo use context in a tool function, add a parameter with the Context type annotation:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\n@server.tool\nasync def my_tool(x: int, ctx: Context) -> str:\n    # Log messages to the client\n    await ctx.info(f\"Processing {x}\")\n    await ctx.debug(\"Debug info\")\n    await ctx.warning(\"Warning message\")\n    await ctx.error(\"Error message\")\n\n    # Report progress\n    await ctx.report_progress(50, 100, \"Processing\")\n\n    # Access resources\n    data = await ctx.read_resource(\"resource://data\")\n\n    # Get request info\n    request_id = ctx.request_id\n    client_id = ctx.client_id\n\n    # Manage state across the request\n    ctx.set_state(\"key\", \"value\")\n    value = ctx.get_state(\"key\")\n\n    return str(x)\n```\n\nState Management:\nContext objects maintain a state dictionary that can be used to store and share\ndata across middleware and tool calls within a request. When a new context\nis created (nested contexts), it inherits a copy of its parent's state, ensuring\nthat modifications in child contexts don't affect parent contexts.\n\nThe context parameter name can be anything as long as it's annotated with Context.\nThe context is optional - tools that don't need it can omit the parameter.\n\n**Methods:**\n\n#### `fastmcp` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L155\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfastmcp(self) -> FastMCP\n```\n\nGet the FastMCP instance.\n\n#### `request_context` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L184\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrequest_context(self) -> RequestContext[ServerSession, Any, Request] | None\n```\n\nAccess to the underlying request context.\n\nReturns None when the MCP session has not been established yet.\nReturns the full RequestContext once the MCP session is available.\n\nFor HTTP request access in middleware, use `get_http_request()` from fastmcp.server.dependencies,\nwhich works whether or not the MCP session is available.\n\nExample in middleware:\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nasync def on_request(self, context, call_next):\n    ctx = context.fastmcp_context\n    if ctx.request_context:\n        # MCP session available - can access session_id, request_id, etc.\n        session_id = ctx.session_id\n    else:\n        # MCP session not available yet - use HTTP helpers\n        from fastmcp.server.dependencies import get_http_request\n        request = get_http_request()\n    return await call_next(context)\n```\n\n#### `report_progress` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L212\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nreport_progress(self, progress: float, total: float | None = None, message: str | None = None) -> None\n```\n\nReport progress for the current operation.\n\n**Args:**\n\n* `progress`: Current progress value e.g. 24\n* `total`: Optional total value e.g. 100\n\n#### `list_resources` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L239\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_resources(self) -> list[MCPResource]\n```\n\nList all available resources from the server.\n\n**Returns:**\n\n* List of Resource objects available on the server\n\n#### `list_prompts` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L247\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_prompts(self) -> list[MCPPrompt]\n```\n\nList all available prompts from the server.\n\n**Returns:**\n\n* List of Prompt objects available on the server\n\n#### `get_prompt` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L255\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_prompt(self, name: str, arguments: dict[str, Any] | None = None) -> GetPromptResult\n```\n\nGet a prompt by name with optional arguments.\n\n**Args:**\n\n* `name`: The name of the prompt to get\n* `arguments`: Optional arguments to pass to the prompt\n\n**Returns:**\n\n* The prompt result\n\n#### `read_resource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L269\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nread_resource(self, uri: str | AnyUrl) -> list[ReadResourceContents]\n```\n\nRead a resource by URI.\n\n**Args:**\n\n* `uri`: Resource URI to read\n\n**Returns:**\n\n* The resource content as either text or bytes\n\n#### `log` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L280\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlog(self, message: str, level: LoggingLevel | None = None, logger_name: str | None = None, extra: Mapping[str, Any] | None = None) -> None\n```\n\nSend a log message to the client.\n\nMessages sent to Clients are also logged to the `fastmcp.server.context.to_client` logger with a level of `DEBUG`.\n\n**Args:**\n\n* `message`: Log message\n* `level`: Optional log level. One of \"debug\", \"info\", \"notice\", \"warning\", \"error\", \"critical\",\n  \"alert\", or \"emergency\". Default is \"info\".\n* `logger_name`: Optional logger name\n* `extra`: Optional mapping for additional arguments\n\n#### `client_id` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L309\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclient_id(self) -> str | None\n```\n\nGet the client ID if available.\n\n#### `request_id` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L318\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrequest_id(self) -> str\n```\n\nGet the unique ID for this request.\n\nRaises RuntimeError if MCP request context is not available.\n\n#### `session_id` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L331\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsession_id(self) -> str\n```\n\nGet the MCP session ID for ALL transports.\n\nReturns the session ID that can be used as a key for session-based\ndata storage (e.g., Redis) to share data between tool calls within\nthe same client session.\n\n**Returns:**\n\n* The session ID for StreamableHTTP transports, or a generated ID\n* for other transports.\n\n#### `session` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L383\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsession(self) -> ServerSession\n```\n\nAccess to the underlying session for advanced usage.\n\nRaises RuntimeError if MCP request context is not available.\n\n#### `debug` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L396\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndebug(self, message: str, logger_name: str | None = None, extra: Mapping[str, Any] | None = None) -> None\n```\n\nSend a `DEBUG`-level message to the connected MCP Client.\n\nMessages sent to Clients are also logged to the `fastmcp.server.context.to_client` logger with a level of `DEBUG`.\n\n#### `info` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L412\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ninfo(self, message: str, logger_name: str | None = None, extra: Mapping[str, Any] | None = None) -> None\n```\n\nSend a `INFO`-level message to the connected MCP Client.\n\nMessages sent to Clients are also logged to the `fastmcp.server.context.to_client` logger with a level of `DEBUG`.\n\n#### `warning` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L428\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nwarning(self, message: str, logger_name: str | None = None, extra: Mapping[str, Any] | None = None) -> None\n```\n\nSend a `WARNING`-level message to the connected MCP Client.\n\nMessages sent to Clients are also logged to the `fastmcp.server.context.to_client` logger with a level of `DEBUG`.\n\n#### `error` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L444\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nerror(self, message: str, logger_name: str | None = None, extra: Mapping[str, Any] | None = None) -> None\n```\n\nSend a `ERROR`-level message to the connected MCP Client.\n\nMessages sent to Clients are also logged to the `fastmcp.server.context.to_client` logger with a level of `DEBUG`.\n\n#### `list_roots` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L460\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_roots(self) -> list[Root]\n```\n\nList the roots available to the server, as indicated by the client.\n\n#### `send_tool_list_changed` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L465\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsend_tool_list_changed(self) -> None\n```\n\nSend a tool list changed notification to the client.\n\n#### `send_resource_list_changed` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L469\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsend_resource_list_changed(self) -> None\n```\n\nSend a resource list changed notification to the client.\n\n#### `send_prompt_list_changed` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L473\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsend_prompt_list_changed(self) -> None\n```\n\nSend a prompt list changed notification to the client.\n\n#### `sample` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L477\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nsample(self, messages: str | Sequence[str | SamplingMessage], system_prompt: str | None = None, include_context: IncludeContext | None = None, temperature: float | None = None, max_tokens: int | None = None, model_preferences: ModelPreferences | str | list[str] | None = None) -> TextContent | ImageContent | AudioContent\n```\n\nSend a sampling request to the client and await the response.\n\nCall this method at any time to have the server request an LLM\ncompletion from the client. The client must be appropriately configured,\nor the request will error.\n\n#### `elicit` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L561\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nelicit(self, message: str, response_type: None) -> AcceptedElicitation[dict[str, Any]] | DeclinedElicitation | CancelledElicitation\n```\n\n#### `elicit` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L573\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nelicit(self, message: str, response_type: type[T]) -> AcceptedElicitation[T] | DeclinedElicitation | CancelledElicitation\n```\n\n#### `elicit` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L583\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nelicit(self, message: str, response_type: list[str]) -> AcceptedElicitation[str] | DeclinedElicitation | CancelledElicitation\n```\n\n#### `elicit` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L592\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nelicit(self, message: str, response_type: type[T] | list[str] | None = None) -> AcceptedElicitation[T] | AcceptedElicitation[dict[str, Any]] | AcceptedElicitation[str] | DeclinedElicitation | CancelledElicitation\n```\n\nSend an elicitation request to the client and await the response.\n\nCall this method at any time to request additional information from\nthe user through the client. The client must support elicitation,\nor the request will error.\n\nNote that the MCP protocol only supports simple object schemas with\nprimitive types. You can provide a dataclass, TypedDict, or BaseModel to\ncomply. If you provide a primitive type, an object schema with a single\n\"value\" field will be generated for the MCP interaction and\nautomatically deconstructed into the primitive type upon response.\n\nIf the response\\_type is None, the generated schema will be that of an\nempty object in order to comply with the MCP protocol requirements.\nClients must send an empty object (\"{}\")in response.\n\n**Args:**\n\n* `message`: A human-readable message explaining what information is needed\n* `response_type`: The type of the response, which should be a primitive\n  type or dataclass or BaseModel. If it is a primitive type, an\n  object schema with a single \"value\" field will be generated.\n\n#### `get_http_request` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L683\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_http_request(self) -> Request\n```\n\nGet the active starlette request.\n\n#### `set_state` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L698\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nset_state(self, key: str, value: Any) -> None\n```\n\nSet a value in the context state.\n\n#### `get_state` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/context.py#L702\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_state(self, key: str) -> Any\n```\n\nGet a value from the context state. Returns None if the key is not found.",
  "content_length": 17284
}