{
  "title": "tests",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-utilities-tests",
  "content": "# `fastmcp.utilities.tests`\n\n## Functions\n\n### `temporary_settings` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L25\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ntemporary_settings(**kwargs: Any)\n```\n\nTemporarily override FastMCP setting values.\n\n**Args:**\n\n* `**kwargs`: The settings to override, including nested settings.\n\n### `run_server_in_process` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L76\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrun_server_in_process(server_fn: Callable[..., None], *args: Any, **kwargs: Any) -> Generator[str, None, None]\n```\n\nContext manager that runs a FastMCP server in a separate process and\nreturns the server URL. When the context manager is exited, the server process is killed.\n\n**Args:**\n\n* `server_fn`: The function that runs a FastMCP server. FastMCP servers are\n  not pickleable, so we need a function that creates and runs one.\n* `*args`: Arguments to pass to the server function.\n* `provide_host_and_port`: Whether to provide the host and port to the server function as kwargs.\n* `host`: Host to bind the server to (default: \"127.0.0.1\").\n* `port`: Port to bind the server to (default: find available port).\n* `**kwargs`: Keyword arguments to pass to the server function.\n\n**Returns:**\n\n* The server URL.\n\n### `run_server_async` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L144\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrun_server_async(server: FastMCP, port: int | None = None, transport: Literal['http', 'streamable-http', 'sse'] = 'http', path: str = '/mcp', host: str = '127.0.0.1') -> AsyncGenerator[str, None]\n```\n\nStart a FastMCP server as an asyncio task for in-process async testing.\n\nThis is the recommended way to test FastMCP servers. It runs the server\nas an async task in the same process, eliminating subprocess coordination,\nsleeps, and cleanup issues.\n\n**Args:**\n\n* `server`: FastMCP server instance\n* `port`: Port to bind to (default: find available port)\n* `transport`: Transport type (\"http\", \"streamable-http\", or \"sse\")\n* `path`: URL path for the server (default: \"/mcp\")\n* `host`: Host to bind to (default: \"127.0.0.1\")\n\n### `caplog_for_fastmcp` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L224\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncaplog_for_fastmcp(caplog)\n```\n\nContext manager to capture logs from FastMCP loggers even when propagation is disabled.\n\n## Classes\n\n### `HeadlessOAuth` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L235\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nOAuth provider that bypasses browser interaction for testing.\n\nThis simulates the complete OAuth flow programmatically by making HTTP requests\ninstead of opening a browser and running a callback server. Useful for automated testing.\n\n**Methods:**\n\n#### `redirect_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L248\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nredirect_handler(self, authorization_url: str) -> None\n```\n\nMake HTTP request to authorization URL and store response for callback handler.\n\n#### `callback_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/tests.py#L254\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncallback_handler(self) -> tuple[str, str | None]\n```\n\nParse stored response and return (auth\\_code, state).",
  "content_length": 4222
}