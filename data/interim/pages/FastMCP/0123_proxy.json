{
  "title": "proxy",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-server-proxy",
  "content": "# `fastmcp.server.proxy`\n\n## Functions\n\n### `default_proxy_roots_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L523\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndefault_proxy_roots_handler(context: RequestContext[ClientSession, LifespanContextT]) -> RootsList\n```\n\nA handler that forwards the list roots request from the remote server to the proxy's connected clients and relays the response back to the remote server.\n\n## Classes\n\n### `ProxyManagerMixin` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L56\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA mixin for proxy managers to provide a unified client retrieval method.\n\n### `ProxyToolManager` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L69\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA ToolManager that sources its tools from a remote client in addition to local and mounted tools.\n\n**Methods:**\n\n#### `get_tools` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L76\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_tools(self) -> dict[str, Tool]\n```\n\nGets the unfiltered tool inventory including local, mounted, and proxy tools.\n\n#### `list_tools` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L102\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_tools(self) -> list[Tool]\n```\n\nGets the filtered list of tools including local, mounted, and proxy tools.\n\n#### `call_tool` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L107\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncall_tool(self, key: str, arguments: dict[str, Any]) -> ToolResult\n```\n\nCalls a tool, trying local/mounted first, then proxy if not found.\n\n### `ProxyResourceManager` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L123\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA ResourceManager that sources its resources from a remote client in addition to local and mounted resources.\n\n**Methods:**\n\n#### `get_resources` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L130\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_resources(self) -> dict[str, Resource]\n```\n\nGets the unfiltered resource inventory including local, mounted, and proxy resources.\n\n#### `get_resource_templates` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L153\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_resource_templates(self) -> dict[str, ResourceTemplate]\n```\n\nGets the unfiltered template inventory including local, mounted, and proxy templates.\n\n#### `list_resources` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L176\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_resources(self) -> list[Resource]\n```\n\nGets the filtered list of resources including local, mounted, and proxy resources.\n\n#### `list_resource_templates` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L181\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_resource_templates(self) -> list[ResourceTemplate]\n```\n\nGets the filtered list of templates including local, mounted, and proxy templates.\n\n#### `read_resource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L186\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nread_resource(self, uri: AnyUrl | str) -> str | bytes\n```\n\nReads a resource, trying local/mounted first, then proxy if not found.\n\n### `ProxyPromptManager` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L206\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA PromptManager that sources its prompts from a remote client in addition to local and mounted prompts.\n\n**Methods:**\n\n#### `get_prompts` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L213\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nget_prompts(self) -> dict[str, Prompt]\n```\n\nGets the unfiltered prompt inventory including local, mounted, and proxy prompts.\n\n#### `list_prompts` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L236\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nlist_prompts(self) -> list[Prompt]\n```\n\nGets the filtered list of prompts including local, mounted, and proxy prompts.\n\n#### `render_prompt` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L241\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrender_prompt(self, name: str, arguments: dict[str, Any] | None = None) -> GetPromptResult\n```\n\nRenders a prompt, trying local/mounted first, then proxy if not found.\n\n### `ProxyTool` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L258\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Tool that represents and executes a tool on a remote server.\n\n**Methods:**\n\n#### `from_mcp_tool` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L268\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom_mcp_tool(cls, client: Client, mcp_tool: mcp.types.Tool) -> ProxyTool\n```\n\nFactory method to create a ProxyTool from a raw MCP tool schema.\n\n#### `run` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L282\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrun(self, arguments: dict[str, Any], context: Context | None = None) -> ToolResult\n```\n\nExecutes the tool by making a call through the client.\n\n### `ProxyResource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L301\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Resource that represents and reads a resource from a remote server.\n\n**Methods:**\n\n#### `from_mcp_resource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L321\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom_mcp_resource(cls, client: Client, mcp_resource: mcp.types.Resource) -> ProxyResource\n```\n\nFactory method to create a ProxyResource from a raw MCP resource schema.\n\n#### `read` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L339\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nread(self) -> str | bytes\n```\n\nRead the resource content from the remote server.\n\n### `ProxyTemplate` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L354\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA ResourceTemplate that represents and creates resources from a remote server template.\n\n**Methods:**\n\n#### `from_mcp_template` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L364\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom_mcp_template(cls, client: Client, mcp_template: mcp.types.ResourceTemplate) -> ProxyTemplate\n```\n\nFactory method to create a ProxyTemplate from a raw MCP template schema.\n\n#### `create_resource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L380\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncreate_resource(self, uri: str, params: dict[str, Any], context: Context | None = None) -> ProxyResource\n```\n\nCreate a resource from the template by calling the remote server.\n\n### `ProxyPrompt` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L415\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA Prompt that represents and renders a prompt from a remote server.\n\n**Methods:**\n\n#### `from_mcp_prompt` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L427\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nfrom_mcp_prompt(cls, client: Client, mcp_prompt: mcp.types.Prompt) -> ProxyPrompt\n```\n\nFactory method to create a ProxyPrompt from a raw MCP prompt schema.\n\n#### `render` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L449\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nrender(self, arguments: dict[str, Any]) -> list[PromptMessage]\n```\n\nRender the prompt by making a call through the client.\n\n### `FastMCPProxy` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L456\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA FastMCP server that acts as a proxy to a remote MCP-compliant server.\nIt uses specialized managers that fulfill requests via a client factory.\n\n### `ProxyClient` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L533\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA proxy client that forwards advanced interactions between a remote MCP server and the proxy's connected clients.\nSupports forwarding roots, sampling, elicitation, logging, and progress.\n\n**Methods:**\n\n#### `default_sampling_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L566\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndefault_sampling_handler(cls, messages: list[mcp.types.SamplingMessage], params: mcp.types.CreateMessageRequestParams, context: RequestContext[ClientSession, LifespanContextT]) -> mcp.types.CreateMessageResult\n```\n\nA handler that forwards the sampling request from the remote server to the proxy's connected clients and relays the response back to the remote server.\n\n#### `default_elicitation_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L592\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndefault_elicitation_handler(cls, message: str, response_type: type, params: mcp.types.ElicitRequestParams, context: RequestContext[ClientSession, LifespanContextT]) -> ElicitResult\n```\n\nA handler that forwards the elicitation request from the remote server to the proxy's connected clients and relays the response back to the remote server.\n\n#### `default_log_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L611\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndefault_log_handler(cls, message: LogMessage) -> None\n```\n\nA handler that forwards the log notification from the remote server to the proxy's connected clients.\n\n#### `default_progress_handler` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L621\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ndefault_progress_handler(cls, progress: float, total: float | None, message: str | None) -> None\n```\n\nA handler that forwards the progress notification from the remote server to the proxy's connected clients.\n\n### `StatefulProxyClient` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L634\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nA proxy client that provides a stateful client factory for the proxy server.\n\nThe stateful proxy client bound its copy to the server session.\nAnd it will be disconnected when the session is exited.\n\nThis is useful to proxy a stateful mcp server such as the Playwright MCP server.\nNote that it is essential to ensure that the proxy server itself is also stateful.\n\n**Methods:**\n\n#### `clear` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L655\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclear(self)\n```\n\nClear all cached clients and force disconnect them.\n\n#### `new_stateful` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/proxy.py#L663\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nnew_stateful(self) -> Client[ClientTransportT]\n```\n\nCreate a new stateful proxy client instance with the same configuration.\n\nUse this method as the client factory for stateful proxy server.",
  "content_length": 15023
}