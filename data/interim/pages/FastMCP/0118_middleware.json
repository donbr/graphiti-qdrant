{
  "title": "middleware",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-server-middleware-middleware",
  "content": "# `fastmcp.server.middleware.middleware`\n\n## Functions\n\n### `make_middleware_wrapper` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L67\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nmake_middleware_wrapper(middleware: Middleware, call_next: CallNext[T, R]) -> CallNext[T, R]\n```\n\nCreate a wrapper that applies a single middleware to a context. The\nclosure bakes in the middleware and call\\_next function, so it can be\npassed to other functions that expect a call\\_next function.\n\n## Classes\n\n### `CallNext` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L43\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n### `MiddlewareContext` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L48\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nUnified context for all middleware operations.\n\n**Methods:**\n\n#### `copy` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L63\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ncopy(self, **kwargs: Any) -> MiddlewareContext[T]\n```\n\n### `Middleware` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L80\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nBase class for FastMCP middleware with dispatching hooks.\n\n**Methods:**\n\n#### `on_message` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L129\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_message(self, context: MiddlewareContext[Any], call_next: CallNext[Any, Any]) -> Any\n```\n\n#### `on_request` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L136\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_request(self, context: MiddlewareContext[mt.Request[Any, Any]], call_next: CallNext[mt.Request[Any, Any], Any]) -> Any\n```\n\n#### `on_notification` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L143\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_notification(self, context: MiddlewareContext[mt.Notification[Any, Any]], call_next: CallNext[mt.Notification[Any, Any], Any]) -> Any\n```\n\n#### `on_initialize` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L150\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_initialize(self, context: MiddlewareContext[mt.InitializeRequest], call_next: CallNext[mt.InitializeRequest, None]) -> None\n```\n\n#### `on_call_tool` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L157\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_call_tool(self, context: MiddlewareContext[mt.CallToolRequestParams], call_next: CallNext[mt.CallToolRequestParams, ToolResult]) -> ToolResult\n```\n\n#### `on_read_resource` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L164\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_read_resource(self, context: MiddlewareContext[mt.ReadResourceRequestParams], call_next: CallNext[mt.ReadResourceRequestParams, Sequence[ReadResourceContents]]) -> Sequence[ReadResourceContents]\n```\n\n#### `on_get_prompt` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L173\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_get_prompt(self, context: MiddlewareContext[mt.GetPromptRequestParams], call_next: CallNext[mt.GetPromptRequestParams, mt.GetPromptResult]) -> mt.GetPromptResult\n```\n\n#### `on_list_tools` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L180\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_tools(self, context: MiddlewareContext[mt.ListToolsRequest], call_next: CallNext[mt.ListToolsRequest, Sequence[Tool]]) -> Sequence[Tool]\n```\n\n#### `on_list_resources` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L187\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_resources(self, context: MiddlewareContext[mt.ListResourcesRequest], call_next: CallNext[mt.ListResourcesRequest, Sequence[Resource]]) -> Sequence[Resource]\n```\n\n#### `on_list_resource_templates` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L194\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_resource_templates(self, context: MiddlewareContext[mt.ListResourceTemplatesRequest], call_next: CallNext[mt.ListResourceTemplatesRequest, Sequence[ResourceTemplate]]) -> Sequence[ResourceTemplate]\n```\n\n#### `on_list_prompts` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/server/middleware/middleware.py#L203\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\non_list_prompts(self, context: MiddlewareContext[mt.ListPromptsRequest], call_next: CallNext[mt.ListPromptsRequest, Sequence[Prompt]]) -> Sequence[Prompt]\n```",
  "content_length": 6615
}