{
  "title": "openapi",
  "source_url": "https://gofastmcp.com/python-sdk/fastmcp-utilities-openapi",
  "content": "# `fastmcp.utilities.openapi`\n\n## Functions\n\n### `format_array_parameter` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L41\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nformat_array_parameter(values: list, parameter_name: str, is_query_parameter: bool = False) -> str | list\n```\n\nFormat an array parameter according to OpenAPI specifications.\n\n**Args:**\n\n* `values`: List of values to format\n* `parameter_name`: Name of the parameter (for error messages)\n* `is_query_parameter`: If True, can return list for explode=True behavior\n\n**Returns:**\n\n* String (comma-separated) or list (for query params with explode=True)\n\n### `format_deep_object_parameter` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L91\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nformat_deep_object_parameter(param_value: dict, parameter_name: str) -> dict[str, str]\n```\n\nFormat a dictionary parameter for deepObject style serialization.\n\nAccording to OpenAPI 3.0 spec, deepObject style with explode=true serializes\nobject properties as separate query parameters with bracket notation.\n\nFor example: `{\"id\": \"123\", \"type\": \"user\"}` becomes `param[id]=123&param[type]=user`.\n\n**Args:**\n\n* `param_value`: Dictionary value to format\n* `parameter_name`: Name of the parameter\n\n**Returns:**\n\n* Dictionary with bracketed parameter names as keys\n\n### `parse_openapi_to_http_routes` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L201\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nparse_openapi_to_http_routes(openapi_dict: dict[str, Any]) -> list[HTTPRoute]\n```\n\nParses an OpenAPI schema dictionary into a list of HTTPRoute objects\nusing the openapi-pydantic library.\n\nSupports both OpenAPI 3.0.x and 3.1.x versions.\n\n### `clean_schema_for_display` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L741\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nclean_schema_for_display(schema: JsonSchema | None) -> JsonSchema | None\n```\n\nClean up a schema dictionary for display by removing internal/complex fields.\n\n### `generate_example_from_schema` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L801\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\ngenerate_example_from_schema(schema: JsonSchema | None) -> Any\n```\n\nGenerate a simple example value from a JSON schema dictionary.\nVery basic implementation focusing on types.\n\n### `format_json_for_description` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L884\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nformat_json_for_description(data: Any, indent: int = 2) -> str\n```\n\nFormats Python data as a JSON string block for markdown.\n\n### `format_description_with_responses` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L893\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nformat_description_with_responses(base_description: str, responses: dict[str, Any], parameters: list[ParameterInfo] | None = None, request_body: RequestBodyInfo | None = None) -> str\n```\n\nFormats the base description string with response, parameter, and request body information.\n\n**Args:**\n\n* `base_description`: The initial description to be formatted.\n* `responses`: A dictionary of response information, keyed by status code.\n* `parameters`: A list of parameter information,\n  including path and query parameters. Each parameter includes details such as name,\n  location, whether it is required, and a description.\n* `request_body`: Information about the request body,\n  including its description, whether it is required, and its content schema.\n\n**Returns:**\n\n* The formatted description string with additional details about responses, parameters,\n* and the request body.\n\n### `extract_output_schema_from_responses` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L1419\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nextract_output_schema_from_responses(responses: dict[str, ResponseInfo], schema_definitions: dict[str, Any] | None = None, openapi_version: str | None = None) -> dict[str, Any] | None\n```\n\nExtract output schema from OpenAPI responses for use as MCP tool output schema.\n\nThis function finds the first successful response (200, 201, 202, 204) with a\nJSON-compatible content type and extracts its schema. If the schema is not an\nobject type, it wraps it to comply with MCP requirements.\n\n**Args:**\n\n* `responses`: Dictionary of ResponseInfo objects keyed by status code\n* `schema_definitions`: Optional schema definitions to include in the output schema\n* `openapi_version`: OpenAPI version string, used to optimize nullable field handling\n\n**Returns:**\n\n* MCP-compliant output schema with potential wrapping, or None if no suitable schema found\n\n## Classes\n\n### `ParameterInfo` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L124\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRepresents a single parameter for an HTTP operation in our IR.\n\n### `RequestBodyInfo` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L136\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRepresents the request body for an HTTP operation in our IR.\n\n### `ResponseInfo` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L146\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nRepresents response information in our IR.\n\n### `HTTPRoute` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L154\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nIntermediate Representation for a single OpenAPI operation.\n\n### `OpenAPIParser` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L255\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\nUnified parser for OpenAPI schemas with generic type parameters to handle both 3.0 and 3.1.\n\n**Methods:**\n\n#### `parse` <sup><a href=\"https://github.com/jlowin/fastmcp/blob/main/src/fastmcp/utilities/openapi.py#L619\" target=\"_blank\"><Icon icon=\"github\" style=\"width: 14px; height: 14px;\" /></a></sup>\n\n```python  theme={\"theme\":{\"light\":\"snazzy-light\",\"dark\":\"dark-plus\"}}\nparse(self) -> list[HTTPRoute]\n```\n\nParse the OpenAPI schema into HTTP routes.",
  "content_length": 7480
}