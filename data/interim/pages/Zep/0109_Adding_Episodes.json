{
  "title": "Adding Episodes",
  "source_url": null,
  "content": "> How to add data to your Graphiti graph\n\n<Note>\n  Refer to the [Custom Entity Types](/graphiti/core-concepts/custom-entity-and-edge-types) page for detailed instructions on adding user-defined ontology to your graph.\n</Note>\n\n### Adding Episodes\n\nEpisodes represent a single data ingestion event. An `episode` is itself a node, and any nodes identified while ingesting the\nepisode are related to the episode via `MENTIONS` edges.\n\nEpisodes enable querying for information at a point in time and understanding the provenance of nodes and their edge relationships.\n\nSupported episode types:\n\n* `text`: Unstructured text data\n* `message`: Conversational messages of the format `speaker: message...`\n* `json`: Structured data, processed distinctly from the other types\n\nThe graph below was generated using the code in the [Quick Start](/graphiti/getting-started/quick-start). Each **podcast** is an individual episode.\n\n![Simple Graph Visualization](https://raw.githubusercontent.com/getzep/graphiti/main/images/simple_graph.svg)\n\n#### Adding a `text` or `message` Episode\n\nUsing the `EpisodeType.text` type:\n\n```python\nawait graphiti.add_episode(\n    name=\"tech_innovation_article\",\n    episode_body=(\n        \"MIT researchers have unveiled 'ClimateNet', an AI system capable of predicting \"\n        \"climate patterns with unprecedented accuracy. Early tests show it can forecast \"\n        \"major weather events up to three weeks in advance, potentially revolutionizing \"\n        \"disaster preparedness and agricultural planning.\"\n    ),\n    source=EpisodeType.text,\n    # A description of the source (e.g., \"podcast\", \"news article\")\n    source_description=\"Technology magazine article\",\n    # The timestamp for when this episode occurred or was created\n    reference_time=datetime(2023, 11, 15, 9, 30),\n)\n```\n\nUsing the `EpisodeType.message` type supports passing in multi-turn conversations in the `episode_body`.\n\nThe text should be structured in `{role/name}: {message}` pairs.\n\n```python\nawait graphiti.add_episode(\n    name=\"Customer_Support_Interaction_1\",\n    episode_body=(\n        \"Customer: Hi, I'm having trouble with my Allbirds shoes. \"\n        \"The sole is coming off after only 2 months of use.\\n\"\n        \"Support: I'm sorry to hear that. Can you please provide your order number?\"\n    ),\n    source=EpisodeType.message,\n    source_description=\"Customer support chat\",\n    reference_time=datetime(2024, 3, 15, 14, 45),\n)\n```\n\n#### Adding an Episode using structured data in JSON format\n\nJSON documents can be arbitrarily nested. However, it's advisable to keep documents compact, as they must fit within your LLM's context window.\n\n<Note>\n  For large data imports, consider using the `add_episode_bulk` API to\n  efficiently add multiple episodes at once.\n</Note>\n\n```python\nproduct_data = {\n    \"id\": \"PROD001\",\n    \"name\": \"Men's SuperLight Wool Runners\",\n    \"color\": \"Dark Grey\",\n    \"sole_color\": \"Medium Grey\",\n    \"material\": \"Wool\",\n    \"technology\": \"SuperLight Foam\",\n    \"price\": 125.00,\n    \"in_stock\": True,\n    \"last_updated\": \"2024-03-15T10:30:00Z\"\n}\n\n### Add the episode to the graph\nawait graphiti.add_episode(\n    name=\"Product Update - PROD001\",\n    episode_body=product_data,  # Pass the Python dictionary directly\n    source=EpisodeType.json,\n    source_description=\"Allbirds product catalog update\",\n    reference_time=datetime.now(),\n)\n```\n\n#### Loading Episodes in Bulk\n\nGraphiti offers `add_episode_bulk` for efficient batch ingestion of episodes, significantly outperforming `add_episode` for large datasets. This method is highly recommended for bulk loading.\n\n<Warning>\n  Use `add_episode_bulk` only for populating empty graphs or when edge invalidation is not required. The bulk ingestion pipeline does not perform edge invalidation operations.\n</Warning>\n\n```python\nproduct_data = [\n    {\n        \"id\": \"PROD001\",\n        \"name\": \"Men's SuperLight Wool Runners\",\n        \"color\": \"Dark Grey\",\n        \"sole_color\": \"Medium Grey\",\n        \"material\": \"Wool\",\n        \"technology\": \"SuperLight Foam\",\n        \"price\": 125.00,\n        \"in_stock\": true,\n        \"last_updated\": \"2024-03-15T10:30:00Z\"\n    },\n    ...\n    {\n        \"id\": \"PROD0100\",\n        \"name\": \"Kids Wool Runner-up Mizzles\",\n        \"color\": \"Natural Grey\",\n        \"sole_color\": \"Orange\",\n        \"material\": \"Wool\",\n        \"technology\": \"Water-repellent\",\n        \"price\": 80.00,\n        \"in_stock\": true,\n        \"last_updated\": \"2024-03-17T14:45:00Z\"\n    }\n]\n\n### Prepare the episodes for bulk loading\n\nbulk_episodes = [\nRawEpisode(\nname=f\"Product Update - {product['id']}\",\ncontent=json.dumps(product),\nsource=EpisodeType.json,\nsource_description=\"Allbirds product catalog update\",\nreference_time=datetime.now()\n)\nfor product in product_data\n]\n\nawait graphiti.add_episode_bulk(bulk_episodes)\n\n```\n\n```\n```",
  "content_length": 4822
}