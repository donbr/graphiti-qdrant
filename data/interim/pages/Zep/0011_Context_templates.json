{
  "title": "Context templates",
  "source_url": null,
  "content": "> Create reusable templates to customize the format of your context blocks.\n\nContext templates allow you to customize how context is formatted and returned when calling `thread.get_user_context()`. Templates are reusable configurations that you set once for your project and can use across all your threads. They let you specify what information goes into your context block and how much of it to include, while Zep handles the automatic relevance detection and retrieval.\n\n## Why use context templates\n\nContext templates let you define a custom context format once and reuse it across all threads and users in your project. They provide a balance between simplicity and control:\n\n* **More control than**: Default Context Block (customize format/structure)\n* **Less control than**: Advanced construction with graph search (cannot customize search query)\n* **Best for**: When you need consistent custom formatting but want automatic relevance detection\n\nSee [Choosing a retrieval method](/retrieving-memory#choosing-a-retrieval-method) for a comparison of all three methods.\n\n## Define a template\n\nTemplates use variables to specify what data to include. Available variables:\n\n* `%{edges}` - Graph edges (facts/relationships)\n* `%{entities}` - Graph entities (nodes)\n* `%{episodes}` - Episode data\n* `%{user_summary}` - User summary information\n\nVariables (except `user_summary`) accept optional parameters:\n\n* `limit=N` - Limit number of results (max 1000)\n* `types=[type1,type2]` - Filter by entity or edge types\n* `include_attributes=true/false` - Include/exclude attributes\n\nExample template definition:\n\n```\n### CUSTOMER PROFILE\n%{user_summary}\n\n### RECENT INTERACTIONS\n%{edges limit=10}\n\n### KEY ENTITIES\n%{entities limit=5 types=[person,organization]}\n```\n\n## Create a template\n\nCreate a new template with a unique template ID and template content. Templates are validated when createdâ€”Zep checks for valid variable names, proper bracket balancing, valid parameter syntax, and limit values within range.\n\n<CodeBlocks>\n  ```python Python\n  from zep_cloud import Zep\n\n  client = Zep(api_key=\"YOUR_API_KEY\")\n\n  client.context.create_context_template(\n      template_id=\"customer-support\",\n      template=\"\"\"# CUSTOMER PROFILE\n  %{user_summary}\n\n  # RECENT INTERACTIONS\n  %{edges limit=10}\n\n  # KEY ENTITIES\n  %{entities limit=5}\"\"\"\n  )\n  ```\n\n  ```typescript TypeScript\n  import { Zep } from \"@getzep/zep-cloud\";\n\n  const client = new Zep({ apiKey: \"YOUR_API_KEY\" });\n\n  await client.context.createContextTemplate({\n      templateId: \"customer-support\",\n      template: `# CUSTOMER PROFILE\n  %{user_summary}\n\n  # RECENT INTERACTIONS\n  %{edges limit=10}\n\n  # KEY ENTITIES\n  %{entities limit=5}`\n  });\n  ```\n\n  ```go Go\n  import (\n      \"context\"\n      zep \"github.com/getzep/zep-go/v3\"\n      zepclient \"github.com/getzep/zep-go/v3/context\"\n      \"github.com/getzep/zep-go/v3/option\"\n  )\n\n  client := zepclient.NewClient(\n      option.WithAPIKey(\"YOUR_API_KEY\"),\n  )\n\n  _, err := client.CreateContextTemplate(\n      context.TODO(),\n      &zep.CreateContextTemplateRequest{\n          TemplateID: \"customer-support\",\n          Template: `# CUSTOMER PROFILE\n  %{user_summary}\n\n  # RECENT INTERACTIONS\n  %{edges limit=10}\n\n  # KEY ENTITIES\n  %{entities limit=5}`,\n      },\n  )\n  ```\n</CodeBlocks>\n\n## Use a template\n\nPass the `template_id` parameter when retrieving context:\n\n<CodeBlocks>\n  ```python Python\n  from zep_cloud import Zep\n\n  client = Zep(api_key=\"YOUR_API_KEY\")\n\n  memory = client.thread.get_user_context(\n      thread_id=\"thread_id\",\n      template_id=\"customer-support\"\n  )\n  context_block = memory.context\n  ```\n\n  ```typescript TypeScript\n  import { Zep } from \"@getzep/zep-cloud\";\n\n  const client = new Zep({ apiKey: \"YOUR_API_KEY\" });\n\n  const memory = await client.thread.getUserContext(\"thread_id\", {\n      templateId: \"customer-support\"\n  });\n  const contextBlock = memory.context;\n  ```\n\n  ```go Go\n  import (\n      \"context\"\n      zep \"github.com/getzep/zep-go/v3\"\n      threadclient \"github.com/getzep/zep-go/v3/thread/client\"\n      \"github.com/getzep/zep-go/v3/option\"\n  )\n\n  client := threadclient.NewClient(\n      option.WithAPIKey(\"YOUR_API_KEY\"),\n  )\n\n  templateID := \"customer-support\"\n  memory, err := client.GetUserContext(\n      context.TODO(),\n      \"thread_id\",\n      &zep.ThreadGetUserContextRequest{\n          TemplateID: &templateID,\n      },\n  )\n  contextBlock := memory.Context\n  ```\n</CodeBlocks>\n\n## Resulting context block\n\nWhen you use the template above, Zep returns a formatted context block like this:\n\n```text\n### CUSTOMER PROFILE\nEmily Johnson is a long-time enterprise customer who has been using the platform since March 2024. She is the technical lead for TechCorp Solutions' API integration team and prefers asynchronous communication methods. Emily has shown strong interest in advanced features like SSO integration and webhook capabilities.\n\n### RECENT INTERACTIONS\n- (2024-11-15 14:23:00 - present) [CONTACTED_SUPPORT_ABOUT] <Emily contacted support regarding API rate limit concerns for high-volume usage>\n- (2024-11-10 09:15:00 - present) [UPGRADED_TO] <Emily upgraded her organization's subscription from Pro to Enterprise plan>\n- (2024-11-08 16:45:00 - present) [REQUESTED_DOCUMENTATION_FOR] <Emily requested comprehensive documentation for webhook integration patterns>\n- (2024-11-05 11:00:00 - present) [ATTENDED] <Emily attended the product webinar focused on advanced enterprise features>\n- (2024-11-01 13:30:00 - present) [INQUIRED_ABOUT] <Emily inquired about SSO integration options and implementation timeline>\n\n### KEY ENTITIES\n- { name: TechCorp Solutions, types: [organization,company], summary: Emily's company with 500+ employees, currently on Enterprise plan since November 2024 }\n- { name: API Integration Team, types: [organization,team], summary: Emily's department responsible for integrating external APIs and managing technical implementations }\n- { name: Enterprise Plan, types: [product,subscription], summary: Premium subscription tier with advanced features including SSO, webhooks, and priority support }\n- { name: John Smith, types: [person,colleague], summary: Emily's technical team member who collaborates on API integration projects }\n- { name: Sarah Chen, types: [person,account_manager], summary: Emily's dedicated account manager who handles enterprise support and feature requests }\n```\n\n## Update a template\n\nUpdate an existing template's content:\n\n<CodeBlocks>\n  ```python Python\n  from zep_cloud import Zep\n\n  client = Zep(api_key=\"YOUR_API_KEY\")\n\n  client.context.update_context_template(\n      template_id=\"customer-support\",\n      template=\"\"\"# CUSTOMER PROFILE\n  %{user_summary}\n\n  # RECENT INTERACTIONS\n  %{edges limit=20}\n\n  # ACCOUNT DETAILS\n  %{entities types=[subscription,payment_method]}\n\n  # TEAM MEMBERS\n  %{entities limit=10 types=[person]}\"\"\"\n  )\n  ```\n\n  ```typescript TypeScript\n  import { Zep } from \"@getzep/zep-cloud\";\n\n  const client = new Zep({ apiKey: \"YOUR_API_KEY\" });\n\n  await client.context.updateContextTemplate(\"customer-support\", {\n      template: `# CUSTOMER PROFILE\n  %{user_summary}\n\n  # RECENT INTERACTIONS\n  %{edges limit=20}\n\n  # ACCOUNT DETAILS\n  %{entities types=[subscription,payment_method]}\n\n  # TEAM MEMBERS\n  %{entities limit=10 types=[person]}`\n  });\n  ```\n\n  ```go Go\n  import (\n      \"context\"\n      zep \"github.com/getzep/zep-go/v3\"\n      zepclient \"github.com/getzep/zep-go/v3/context\"\n      \"github.com/getzep/zep-go/v3/option\"\n  )\n\n  client := zepclient.NewClient(\n      option.WithAPIKey(\"YOUR_API_KEY\"),\n  )\n\n  _, err := client.UpdateContextTemplate(\n      context.TODO(),\n      \"customer-support\",\n      &zep.UpdateContextTemplateRequest{\n          Template: `# CUSTOMER PROFILE\n  %{user_summary}\n\n  # RECENT INTERACTIONS\n  %{edges limit=20}\n\n  # ACCOUNT DETAILS\n  %{entities types=[subscription,payment_method]}\n\n  # TEAM MEMBERS\n  %{entities limit=10 types=[person]}`,\n      },\n  )\n  ```\n</CodeBlocks>\n\n## Read a template\n\nRetrieve a specific template by its ID or list all templates:\n\n<CodeBlocks>\n  ```python Python\n  from zep_cloud import Zep\n\n  client = Zep(api_key=\"YOUR_API_KEY\")\n\n  # Get a specific template\n  template = client.context.get_context_template(template_id=\"customer-support\")\n\n  # List all templates\n  templates = client.context.list_context_templates()\n  ```\n\n  ```typescript TypeScript\n  import { Zep } from \"@getzep/zep-cloud\";\n\n  const client = new Zep({ apiKey: \"YOUR_API_KEY\" });\n\n  // Get a specific template\n  const template = await client.context.getContextTemplate(\"customer-support\");\n\n  // List all templates\n  const templates = await client.context.listContextTemplates();\n  ```\n\n  ```go Go\n  import (\n      \"context\"\n      zepclient \"github.com/getzep/zep-go/v3/context\"\n      \"github.com/getzep/zep-go/v3/option\"\n  )\n\n  client := zepclient.NewClient(\n      option.WithAPIKey(\"YOUR_API_KEY\"),\n  )\n\n  // Get a specific template\n  template, err := client.GetContextTemplate(context.TODO(), \"customer-support\")\n\n  // List all templates\n  templates, err := client.ListContextTemplates(context.TODO())\n  ```\n</CodeBlocks>\n\n## Delete a template\n\nDelete a template when it's no longer needed:\n\n<CodeBlocks>\n  ```python Python\n  from zep_cloud import Zep\n\n  client = Zep(api_key=\"YOUR_API_KEY\")\n\n  client.context.delete_context_template(template_id=\"customer-support\")\n  ```\n\n  ```typescript TypeScript\n  import { Zep } from \"@getzep/zep-cloud\";\n\n  const client = new Zep({ apiKey: \"YOUR_API_KEY\" });\n\n  await client.context.deleteContextTemplate(\"customer-support\");\n  ```\n\n  ```go Go\n  import (\n      \"context\"\n      zepclient \"github.com/getzep/zep-go/v3/context\"\n      \"github.com/getzep/zep-go/v3/option\"\n  )\n\n  client := zepclient.NewClient(\n      option.WithAPIKey(\"YOUR_API_KEY\"),\n  )\n\n  err := client.DeleteContextTemplate(context.TODO(), \"customer-support\")\n  ```\n</CodeBlocks>",
  "content_length": 9865
}