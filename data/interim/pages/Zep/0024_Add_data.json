{
  "title": "Add data",
  "source_url": null,
  "content": "First, we define our [custom entity and edge types](/customizing-graph-structure#definition-1), create a user, and add some example data:\n\n<CodeBlocks>\n  ```python\n  import uuid\n  from zep_cloud import Message\n  from zep_cloud.external_clients.ontology import EntityModel, EntityText, EdgeModel, EntityBoolean\n  from zep_cloud import EntityEdgeSourceTarget\n  from pydantic import Field\n\n  class Restaurant(EntityModel):\n      \"\"\"\n      Represents a specific restaurant.\n      \"\"\"\n      cuisine_type: EntityText = Field(description=\"The cuisine type of the restaurant, for example: American, Mexican, Indian, etc.\", default=None)\n      dietary_accommodation: EntityText = Field(description=\"The dietary accommodation of the restaurant, if any, for example: vegetarian, vegan, etc.\", default=None)\n\n  class RestaurantVisit(EdgeModel):\n      \"\"\"\n      Represents the fact that the user visited a restaurant.\n      \"\"\"\n      restaurant_name: EntityText = Field(description=\"The name of the restaurant the user visited\", default=None)\n\n  class DietaryPreference(EdgeModel):\n      \"\"\"\n      Represents the fact that the user has a dietary preference or dietary restriction.\n      \"\"\"\n      preference_type: EntityText = Field(description=\"Preference type of the user: anything, vegetarian, vegan, peanut allergy, etc.\", default=None)\n      allergy: EntityBoolean = Field(description=\"Whether this dietary preference represents a user allergy: True or false\", default=None)\n\n  client.graph.set_ontology(\n      entities={\n          \"Restaurant\": Restaurant,\n      },\n      edges={\n          \"RESTAURANT_VISIT\": (\n              RestaurantVisit,\n              [EntityEdgeSourceTarget(source=\"User\", target=\"Restaurant\")]\n          ),\n          \"DIETARY_PREFERENCE\": (\n              DietaryPreference,\n              [EntityEdgeSourceTarget(source=\"User\")]\n          ),\n      }\n  )\n\n  messages_thread1 = [\n      Message(content=\"Take me to a lunch place\", role=\"user\", name=\"John Doe\"),\n      Message(content=\"How about Panera Bread, Chipotle, or Green Leaf Cafe, which are nearby?\", role=\"assistant\", name=\"Assistant\"),\n      Message(content=\"Do any of those have vegetarian options? I’m vegetarian\", role=\"user\", name=\"John Doe\"),\n      Message(content=\"Yes, Green Leaf Cafe has vegetarian options\", role=\"assistant\", name=\"Assistant\"),\n      Message(content=\"Let’s go to Green Leaf Cafe\", role=\"user\", name=\"John Doe\"),\n      Message(content=\"Navigating to Green Leaf Cafe\", role=\"assistant\", name=\"Assistant\"),\n  ]\n\n  messages_thread2 = [\n      Message(content=\"Take me to dessert\", role=\"user\", name=\"John Doe\"),\n      Message(content=\"How about getting some ice cream?\", role=\"assistant\", name=\"Assistant\"),\n      Message(content=\"I can't have ice cream, I'm lactose intolerant, but I'm craving a chocolate chip cookie\", role=\"user\", name=\"John Doe\"),\n      Message(content=\"Sure, there's Insomnia Cookies nearby.\", role=\"assistant\", name=\"Assistant\"),\n      Message(content=\"Perfect, let's go to Insomnia Cookies\", role=\"user\", name=\"John Doe\"),\n      Message(content=\"Navigating to Insomnia Cookies.\", role=\"assistant\", name=\"Assistant\"),\n  ]\n\n  user_id = f\"user-{uuid.uuid4()}\"\n  client.user.add(user_id=user_id, first_name=\"John\", last_name=\"Doe\", email=\"john.doe@example.com\")\n\n  thread1_id = f\"thread-{uuid.uuid4()}\"\n  thread2_id = f\"thread-{uuid.uuid4()}\"\n  client.thread.create(thread_id=thread1_id, user_id=user_id)\n  client.thread.create(thread_id=thread2_id, user_id=user_id)\n\n  client.thread.add_messages(thread_id=thread1_id, messages=messages_thread1, ignore_roles=[\"assistant\"])\n  client.thread.add_messages(thread_id=thread2_id, messages=messages_thread2, ignore_roles=[\"assistant\"])\n  ```\n\n  ```typescript\n  import { entityFields, EntityType, EdgeType } from \"@getzep/zep-cloud/wrapper/ontology\";\n  import { v4 as uuidv4 } from \"uuid\";\n  import type { Message } from \"@getzep/zep-cloud/api\";\n\n  const RestaurantSchema: EntityType = {\n      description: \"Represents a specific restaurant.\",\n      fields: {\n          cuisine_type: entityFields.text(\"The cuisine type of the restaurant, for example: American, Mexican, Indian, etc.\"),\n          dietary_accommodation: entityFields.text(\"The dietary accommodation of the restaurant, if any, for example: vegetarian, vegan, etc.\"),\n      },\n  };\n\n  const RestaurantVisit: EdgeType = {\n      description: \"Represents the fact that the user visited a restaurant.\",\n      fields: {\n          restaurant_name: entityFields.text(\"The name of the restaurant the user visited\"),\n      },\n      sourceTargets: [\n          { source: \"User\", target: \"Restaurant\" },\n      ],\n  };\n\n  const DietaryPreference: EdgeType = {\n      description: \"Represents the fact that the user has a dietary preference or dietary restriction.\",\n      fields: {\n          preference_type: entityFields.text(\"Preference type of the user: anything, vegetarian, vegan, peanut allergy, etc.\"),\n          allergy: entityFields.boolean(\"Whether this dietary preference represents a user allergy: True or false\"),\n      },\n      sourceTargets: [\n          { source: \"User\" },\n      ],\n  };\n\n  await client.graph.setOntology(\n      {\n          Restaurant: RestaurantSchema,\n      },\n      {\n          RESTAURANT_VISIT: RestaurantVisit,\n          DIETARY_PREFERENCE: DietaryPreference,\n      }\n  );\n\n  const messagesthread1: Message[] = [\n      { content: \"Take me to a lunch place\", role: \"user\", name: \"John Doe\" },\n      { content: \"How about Panera Bread, Chipotle, or Green Leaf Cafe, which are nearby?\", role: \"assistant\", name: \"Assistant\" },\n      { content: \"Do any of those have vegetarian options? I’m vegetarian\", role: \"user\", name: \"John Doe\" },\n      { content: \"Yes, Green Leaf Cafe has vegetarian options\", role: \"assistant\", name: \"Assistant\" },\n      { content: \"Let’s go to Green Leaf Cafe\", role: \"user\", name: \"John Doe\" },\n      { content: \"Navigating to Green Leaf Cafe\", role: \"assistant\", name: \"Assistant\" },\n  ];\n\n  const messagesthread2: Message[] = [\n      { content: \"Take me to dessert\", role: \"user\", name: \"John Doe\" },\n      { content: \"How about getting some ice cream?\", role: \"assistant\", name: \"Assistant\" },\n      { content: \"I can't have ice cream, I'm lactose intolerant, but I'm craving a chocolate chip cookie\", role: \"user\", name: \"John Doe\" },\n      { content: \"Sure, there's Insomnia Cookies nearby.\", role: \"assistant\", name: \"Assistant\" },\n      { content: \"Perfect, let's go to Insomnia Cookies\", role: \"user\", name: \"John Doe\" },\n      { content: \"Navigating to Insomnia Cookies.\", role: \"assistant\", name: \"Assistant\" },\n  ];\n\n  let userId = `user-${uuidv4()}`;\n  await client.user.add({ userId, firstName: \"John\", lastName: \"Doe\", email: \"john.doe@example.com\" });\n\n  const thread1Id = `thread-${uuidv4()}`;\n  const thread2Id = `thread-${uuidv4()}`;\n  await client.thread.create({ threadId: thread1Id, userId });\n  await client.thread.create({ threadId: thread2Id, userId });\n\n  await client.thread.addMessages(thread1Id, { messages: messagesthread1, ignoreRoles: [\"assistant\"] });\n  await client.thread.addMessages(thread2Id, { messages: messagesthread2, ignoreRoles: [\"assistant\"] });\n  ```\n\n  ```go\n  import (\n  \t\"github.com/getzep/zep-go/v3\"\n  \t\"github.com/google/uuid\"\n  )\n\n  type Restaurant struct {\n  \tzep.BaseEntity `name:\"Restaurant\" description:\"Represents a specific restaurant.\"`\n  \tCuisineType           string `description:\"The cuisine type of the restaurant, for example: American, Mexican, Indian, etc.\" json:\"cuisine_type,omitempty\"`\n  \tDietaryAccommodation  string `description:\"The dietary accommodation of the restaurant, if any, for example: vegetarian, vegan, etc.\" json:\"dietary_accommodation,omitempty\"`\n  }\n\n  type RestaurantVisit struct {\n  \tzep.BaseEdge `name:\"RESTAURANT_VISIT\" description:\"Represents the fact that the user visited a restaurant.\"`\n  \tRestaurantName string `description:\"The name of the restaurant the user visited\" json:\"restaurant_name,omitempty\"`\n  }\n\n  type DietaryPreference struct {\n  \tzep.BaseEdge `name:\"DIETARY_PREFERENCE\" description:\"Represents the fact that the user has a dietary preference or dietary restriction.\"`\n  \tPreferenceType string `description:\"Preference type of the user: anything, vegetarian, vegan, peanut allergy, etc.\" json:\"preference_type,omitempty\"`\n  \tAllergy        bool   `description:\"Whether this dietary preference represents a user allergy: True or false\" json:\"allergy,omitempty\"`\n  }\n\n  _, err = client.Graph.SetOntology(\n  \tctx,\n  \t[]zep.EntityDefinition{\n  \t\tRestaurant{},\n  \t},\n  \t[]zep.EdgeDefinitionWithSourceTargets{\n  \t\t{\n  \t\t\tEdgeModel: RestaurantVisit{},\n  \t\t\tSourceTargets: []zep.EntityEdgeSourceTarget{\n  \t\t\t\t{\n  \t\t\t\t\tSource: zep.String(\"User\"),\n  \t\t\t\t\tTarget: zep.String(\"Restaurant\"),\n  \t\t\t\t},\n  \t\t\t},\n  \t\t},\n  \t\t{\n  \t\t\tEdgeModel: DietaryPreference{},\n  \t\t\tSourceTargets: []zep.EntityEdgeSourceTarget{\n  \t\t\t\t{\n  \t\t\t\t\tSource: zep.String(\"User\"),\n  \t\t\t\t},\n  \t\t\t},\n  \t\t},\n  \t},\n  )\n  if err != nil {\n  \tfmt.Printf(\"Error setting ontology: %v\\n\", err)\n  \treturn\n  }\n\n  messagesthread1 := []zep.Message{\n  \t{Content: \"Take me to a lunch place\", Role: \"user\", Name: zep.String(\"John Doe\")},\n  \t{Content: \"How about Panera Bread, Chipotle, or Green Leaf Cafe, which are nearby?\", Role: \"assistant\", Name: zep.String(\"Assistant\")},\n  \t{Content: \"Do any of those have vegetarian options? I'm vegetarian\", Role: \"user\", Name: zep.String(\"John Doe\")},\n  \t{Content: \"Yes, Green Leaf Cafe has vegetarian options\", Role: \"assistant\", Name: zep.String(\"Assistant\")},\n  \t{Content: \"Let's go to Green Leaf Cafe\", Role: \"user\", Name: zep.String(\"John Doe\")},\n  \t{Content: \"Navigating to Green Leaf Cafe\", Role: \"assistant\", Name: zep.String(\"Assistant\")},\n  }\n  messagesthread2 := []zep.Message{\n  \t{Content: \"Take me to dessert\", Role: \"user\", Name: zep.String(\"John Doe\")},\n  \t{Content: \"How about getting some ice cream?\", Role: \"assistant\", Name: zep.String(\"Assistant\")},\n  \t{Content: \"I can't have ice cream, I'm lactose intolerant, but I'm craving a chocolate chip cookie\", Role: \"user\", Name: zep.String(\"John Doe\")},\n  \t{Content: \"Sure, there's Insomnia Cookies nearby.\", Role: \"assistant\", Name: zep.String(\"Assistant\")},\n  \t{Content: \"Perfect, let's go to Insomnia Cookies\", Role: \"user\", Name: zep.String(\"John Doe\")},\n  \t{Content: \"Navigating to Insomnia Cookies.\", Role: \"assistant\", Name: zep.String(\"Assistant\")},\n  }\n  userID := \"user-\" + uuid.NewString()\n  userReq := &zep.CreateUserRequest{\n  \tUserID:    userID,\n  \tFirstName: zep.String(\"John\"),\n  \tLastName:  zep.String(\"Doe\"),\n  \tEmail:     zep.String(\"john.doe@example.com\"),\n  }\n  _, err = client.User.Add(ctx, userReq)\n  if err != nil {\n  \tfmt.Printf(\"Error creating user: %v\\n\", err)\n  \treturn\n  }\n\n  thread1ID := \"thread-\" + uuid.NewString()\n  thread2ID := \"thread-\" + uuid.NewString()\n\n  thread1Req := &zep.CreateThreadRequest{\n  \tthreadID: thread1ID,\n  \tUserID:    userID,\n  }\n  thread2Req := &zep.CreateThreadRequest{\n  \tthreadID: thread2ID,\n  \tUserID:    userID,\n  }\n  _, err = client.Thread.Create(ctx, thread1Req)\n  if err != nil {\n  \tfmt.Printf(\"Error creating thread 1: %v\\n\", err)\n  \treturn\n  }\n  _, err = client.Thread.Create(ctx, thread2Req)\n  if err != nil {\n  \tfmt.Printf(\"Error creating thread 2: %v\\n\", err)\n  \treturn\n  }\n\n  msgPtrs1 := make([]*zep.Message, len(messagesthread1))\n  for i := range messagesthread1 {\n  \tmsgPtrs1[i] = &messagesthread1[i]\n  }\n  addReq1 := &zep.AddThreadMessagesRequest{\n  \tMessages: msgPtrs1,\n  \tIgnoreRoles: []zep.RoleType{\n          zep.RoleTypeAssistantRole,\n  \t},\n  }\n  _, err = client.Thread.AddMessages(ctx, thread1ID, addReq1)\n  if err != nil {\n  \tfmt.Printf(\"Error adding messages to thread 1: %v\\n\", err)\n  \treturn\n  }\n\n  msgPtrs2 := make([]*zep.Message, len(messagesthread2))\n  for i := range messagesthread2 {\n  \tmsgPtrs2[i] = &messagesthread2[i]\n  }\n  addReq2 := &zep.AddThreadMessagesRequest{\n  \tMessages: msgPtrs2,\n  \tIgnoreRoles: []zep.RoleType{\n  \t\tzep.RoleTypeAssistantRole,\n  \t},\n  }\n  _, err = client.Thread.AddMessages(ctx, thread2ID, addReq2)\n  if err != nil {\n  \tfmt.Printf(\"Error adding messages to thread 2: %v\\n\", err)\n  \treturn\n  }\n  ```\n</CodeBlocks>",
  "content_length": 12152
}