{
  "title": "Find Facts Relevant to a Specific Node",
  "source_url": null,
  "content": "Below, we will go through how to retrieve facts which are related to a specific node in a Zep knowledge graph. First, we will go through some methods for determining the UUID of the node you are interested in. Then, we will go through some methods for retrieving the facts related to that node.\n\nIf you are interested in the user's node specifically, we have a convenience method that [returns the user's node](/users#get-the-user-node) which includes the UUID.\n\nAn easy way to determine the UUID for other nodes is to use the graph explorer in the [Zep Web app](https://app.getzep.com/).\n\nYou can also programmatically retrieve all the nodes for a given user using our [get nodes by user API](/sdk-reference/graph/node/get-by-user-id), and then manually examine the nodes and take note of the UUID of the node of interest:\n\n<CodeBlocks>\n  ```python Python\n  # Initialize the Zep client\n  zep_client = Zep(api_key=API_KEY)\n  nodes = zep_client.graph.node.get_by_user_id(user_id=\"some user ID\")\n  print(nodes)\n  ```\n\n  ```typescript TypeScript\n  import { ZepClient } from \"@getzep/zep-cloud\";\n\n  // Initialize the Zep client\n  const client = new ZepClient({ apiKey: API_KEY });\n  const nodes = await client.graph.node.getByUserId(\"some user ID\", {});\n  console.log(nodes);\n  ```\n\n  ```go Go\n  import (\n      \"context\"\n      \"fmt\"\n      \"log\"\n\n      \"github.com/getzep/zep-go/v3\"\n      \"github.com/getzep/zep-go/v3/client\"\n      \"github.com/getzep/zep-go/v3/option\"\n  )\n\n  // Initialize the Zep client\n  zepClient := client.NewClient(option.WithAPIKey(API_KEY))\n  nodes, err := zepClient.Graph.Node.GetByUserID(\n      context.TODO(),\n      \"some user ID\",\n      &zep.GraphNodesRequest{},\n  )\n  if err != nil {\n      log.Fatalf(\"Error: %v\", err)\n  }\n  fmt.Println(nodes)\n  ```\n</CodeBlocks>\n\n<CodeBlocks>\n  ```python Python\n  center_node_uuid = \"your chosen center node UUID\"\n  ```\n\n  ```typescript TypeScript\n  const centerNodeUuid = \"your chosen center node UUID\";\n  ```\n\n  ```go Go\n  centerNodeUUID := \"your chosen center node UUID\"\n  ```\n</CodeBlocks>\n\nLastly, if your user has a lot of nodes to look through, you can narrow down the search by only looking at the nodes relevant to a specific query, using our [graph search API](/searching-the-graph):\n\n<CodeBlocks>\n  ```python Python\n  results = zep_client.graph.search(\n      user_id=\"some user ID\",\n      query=\"shoe\", # To help narrow down the nodes you have to manually search\n      scope=\"nodes\"\n  )\n  relevant_nodes = results.nodes\n  print(relevant_nodes)\n  ```\n\n  ```typescript TypeScript\n  const results = await client.graph.search({\n      userId: \"some user ID\",\n      query: \"shoe\", // To help narrow down the nodes you have to manually search\n      scope: \"nodes\"\n  });\n  const relevantNodes = results.nodes;\n  console.log(relevantNodes);\n  ```\n\n  ```go Go\n  results, err := zepClient.Graph.Search(\n      context.TODO(),\n      &zep.GraphSearchQuery{\n          UserID: zep.String(\"some user ID\"),\n          Query:  \"shoe\", // To help narrow down the nodes you have to manually search\n          Scope:  zep.GraphSearchScopeNodes.Ptr(),\n      },\n  )\n  if err != nil {\n      log.Fatalf(\"Error: %v\", err)\n  }\n  relevantNodes := results.Nodes\n  fmt.Println(relevantNodes)\n  ```\n</CodeBlocks>\n\n<CodeBlocks>\n  ```python Python\n  center_node_uuid = \"your chosen center node UUID\"\n  ```\n\n  ```typescript TypeScript\n  const centerNodeUuid = \"your chosen center node UUID\";\n  ```\n\n  ```go Go\n  centerNodeUUID := \"your chosen center node UUID\"\n  ```\n</CodeBlocks>\n\nThe most straightforward way to get facts related to your node is to retrieve all facts that are connected to your chosen node using the [get edges by user API](/sdk-reference/graph/edge/get-by-user-id):\n\n<CodeBlocks>\n  ```python Python\n  edges = zep_client.graph.edge.get_by_user_id(user_id=\"some user ID\")\n  connected_edges = [edge for edge in edges if edge.source_node_uuid == center_node_uuid or edge.target_node_uuid == center_node_uuid]\n  relevant_facts = [edge.fact for edge in connected_edges]\n  ```\n\n  ```typescript TypeScript\n  const edges = await client.graph.edge.getByUserId(\"some user ID\", {});\n  const connectedEdges = edges.filter(\n      edge => edge.sourceNodeUuid === centerNodeUuid || edge.targetNodeUuid === centerNodeUuid\n  );\n  const relevantFacts = connectedEdges.map(edge => edge.fact);\n  ```\n\n  ```go Go\n  edges, err := zepClient.Graph.Edge.GetByUserID(\n      context.TODO(),\n      \"some user ID\",\n      &zep.GraphEdgesRequest{},\n  )\n  if err != nil {\n      log.Fatalf(\"Error: %v\", err)\n  }\n\n  var connectedEdges []*zep.EntityEdge\n  for _, edge := range edges {\n      if edge.SourceNodeUUID == centerNodeUUID || edge.TargetNodeUUID == centerNodeUUID {\n          connectedEdges = append(connectedEdges, edge)\n      }\n  }\n\n  var relevantFacts []string\n  for _, edge := range connectedEdges {\n      relevantFacts = append(relevantFacts, edge.Fact)\n  }\n  ```\n</CodeBlocks>\n\nYou can also retrieve facts relevant to your node by using the [graph search API](/searching-the-graph) with the node distance re-ranker:\n\n<CodeBlocks>\n  ```python Python\n  results = zep_client.graph.search(\n      user_id=\"some user ID\",\n      query=\"some query\",\n      reranker=\"node_distance\",\n      center_node_uuid=center_node_uuid,\n  )\n  relevant_edges = results.edges\n  relevant_facts = [edge.fact for edge in relevant_edges]\n  ```\n\n  ```typescript TypeScript\n  const results = await client.graph.search({\n      userId: \"some user ID\",\n      query: \"some query\",\n      reranker: \"node_distance\",\n      centerNodeUuid: centerNodeUuid,\n  });\n  const relevantEdges = results.edges;\n  const relevantFacts = relevantEdges?.map(edge => edge.fact) || [];\n  ```\n\n  ```go Go\n  results, err := zepClient.Graph.Search(\n      context.TODO(),\n      &zep.GraphSearchQuery{\n          UserID:         zep.String(\"some user ID\"),\n          Query:          \"some query\",\n          Reranker:       zep.GraphSearchRerankerNodeDistance.Ptr(),\n          CenterNodeUUID: zep.String(centerNodeUUID),\n      },\n  )\n  if err != nil {\n      log.Fatalf(\"Error: %v\", err)\n  }\n\n  relevantEdges := results.Edges\n  var relevantFacts []string\n  for _, edge := range relevantEdges {\n      relevantFacts = append(relevantFacts, edge.Fact)\n  }\n  ```\n</CodeBlocks>\n\nIn this recipe, we went through how to retrieve facts which are related to a specific node in a Zep knowledge graph. We first went through some methods for determining the UUID of the node you are interested in. Then, we went through some methods for retrieving the facts related to that node.",
  "content_length": 6537
}