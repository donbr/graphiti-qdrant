{
  "title": "Zep v2 to v3 migration",
  "source_url": null,
  "content": "> Complete guide for upgrading from v2 to v3\n\nThis guide provides a comprehensive overview of migrating from Zep v2 to v3, including conceptual changes, method mappings, and functionality differences.\n\n## Key Conceptual Changes\n\nZep v3 introduces several naming changes and some feature enhancements that developers familiar with v2 should understand:\n\n### Sessions → Threads\n\nIn v2, you worked with **sessions** to manage conversation history. In v3, these are now called **threads**.\n\n### Groups → Graphs\n\nv2's **groups** have been replaced with **graphs** in v3. Groups represented arbitrary knowledge graphs that could hold memory for multiple users, but the name was confusing. We've renamed them to **graphs** for clarity.\n\n### Message Role Changes\n\nThe message role structure has been updated:\n\n* `role_type` is now called `role`\n* `role` is now called `name`\n\n### Enhanced Context Retrieval\n\nThe v3 `getUserContext` method introduces a new `mode` parameter that controls how context is returned:\n\n* `\"summary\"` (default): Returns context summarized into natural language\n* `\"basic\"`: Returns raw context similar to v2's behavior\n\nThis change allows for more flexible context retrieval based on your application's needs.\n\n<Note>\n  The naming changes above are not comprehensive. There are also function name changes, which you can find in the detailed migration table below.\n</Note>\n\n## Migration Table\n\n<Tabs>\n  <Tab title=\"Python\">\n    | v2 Method/Variable/Term       | v3 Method/Variable/Term                              |\n    | ----------------------------- | ---------------------------------------------------- |\n    | `memory.get(session_id)`      | `thread.get_user_context(thread_id, mode=\"basic\")`\\* |\n    | `memory.add_session`          | `thread.create`                                      |\n    | `memory.add`                  | `thread.add_messages`                                |\n    | `memory.delete`               | `thread.delete`                                      |\n    | `memory.list_sessions`        | `thread.list_all`                                    |\n    | `memory.get_session_messages` | `thread.get`                                         |\n    | `group.add`                   | `graph.create`                                       |\n    | `group.get_all_groups`        | `graph.list_all`                                     |\n    | `group.get`                   | `graph.get`                                          |\n    | `group.delete`                | `graph.delete`                                       |\n    | `group.update`                | `graph.update`                                       |\n    | `session`                     | `thread`                                             |\n    | `session_id`                  | `thread_id`                                          |\n    | `group`                       | `graph`                                              |\n    | `group_id`                    | `graph_id`                                           |\n    | `role_type`                   | `role`                                               |\n    | `role`                        | `name`                                               |\n\n    \\*`thread.get_user_context` defaults to `mode=\"summary\"`, which makes it so that the context is summarized into natural language before being returned. Therefore, to replicate the v2 `memory.get` method, `mode` must be set to `\"basic\"`.\n  </Tab>\n\n  <Tab title=\"TypeScript\">\n    | v2 Method/Variable/Term     | v3 Method/Variable/Term                                |\n    | --------------------------- | ------------------------------------------------------ |\n    | `memory.get(sessionId)`     | `thread.getUserContext(threadId, { mode: \"basic\" })`\\* |\n    | `memory.addSession`         | `thread.create`                                        |\n    | `memory.add`                | `thread.addMessages`                                   |\n    | `memory.delete`             | `thread.delete`                                        |\n    | `memory.listSessions`       | `thread.listAll`                                       |\n    | `memory.getSessionMessages` | `thread.get`                                           |\n    | `group.add`                 | `graph.create`                                         |\n    | `group.getAllGroups`        | `graph.listAll`                                        |\n    | `group.get`                 | `graph.get`                                            |\n    | `group.delete`              | `graph.delete`                                         |\n    | `group.update`              | `graph.update`                                         |\n    | `session`                   | `thread`                                               |\n    | `sessionId`                 | `threadId`                                             |\n    | `group`                     | `graph`                                                |\n    | `groupId`                   | `graphId`                                              |\n    | `roleType`                  | `role`                                                 |\n    | `role`                      | `name`                                                 |\n\n    \\*`thread.getUserContext` defaults to `mode=\"summary\"`, which makes it so that the context is summarized into natural language before being returned. Therefore, to replicate the v2 `memory.get` method, `mode` must be set to `\"basic\"`.\n  </Tab>\n\n  <Tab title=\"Go\">\n    | v2 Method/Variable/Term     | v3 Method/Variable/Term                                                           |\n    | --------------------------- | --------------------------------------------------------------------------------- |\n    | `Memory.Get(sessionId)`     | `Thread.GetUserContext(threadId, &v3.ThreadGetUserContextRequest{Mode: &mode})`\\* |\n    | `Memory.AddSession`         | `Thread.Create`                                                                   |\n    | `Memory.Add`                | `Thread.AddMessages`                                                              |\n    | `Memory.Delete`             | `Thread.Delete`                                                                   |\n    | `Memory.ListSessions`       | `Thread.ListAll`                                                                  |\n    | `Memory.GetSessionMessages` | `Thread.Get`                                                                      |\n    | `Group.Add`                 | `Graph.Create`                                                                    |\n    | `Group.GetAllGroups`        | `Graph.ListAll`                                                                   |\n    | `Group.Get`                 | `Graph.Get`                                                                       |\n    | `Group.Delete`              | `Graph.Delete`                                                                    |\n    | `Group.Update`              | `Graph.Update`                                                                    |\n    | `session`                   | `thread`                                                                          |\n    | `SessionID`                 | `ThreadID`                                                                        |\n    | `group`                     | `graph`                                                                           |\n    | `GroupID`                   | `GraphID`                                                                         |\n    | `RoleType`                  | `Role`                                                                            |\n    | `Role`                      | `Name`                                                                            |\n\n    \\*`Thread.GetUserContext` defaults to `mode=\"summary\"`, which makes it so that the context is summarized into natural language before being returned. Therefore, to replicate the v2 `Memory.Get` method, `mode` must be set to `\"basic\"`.\n  </Tab>\n</Tabs>",
  "content_length": 8059
}