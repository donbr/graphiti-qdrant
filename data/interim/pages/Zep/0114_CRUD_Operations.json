{
  "title": "CRUD Operations",
  "source_url": null,
  "content": "> How to access and modify Nodes and Edges\n\nThe Graphiti library uses 8 core classes to add data to your graph:\n\n* `Node`\n* `EpisodicNode`\n* `EntityNode`\n* `Edge`\n* `EpisodicEdge`\n* `EntityEdge`\n* `CommunityNode`\n* `CommunityEdge`\n\nThe generic `Node` and `Edge` classes are abstract base classes, and the other 4 classes inherit from them.\nEach of `EpisodicNode`, `EntityNode`, `EpisodicEdge`, and `EntityEdge` have fully supported CRUD operations.\n\nThe save method performs a find or create based on the uuid of the object, and will add or update any other data from the class to the graph.\nA driver must be provided to the save method. The Entity Node save method is shown below as a sample.\n\n```python\n    async def save(self, driver: AsyncDriver):\n        result = await driver.execute_query(\n            \"\"\"\n        MERGE (n:Entity {uuid: $uuid})\n        SET n = {uuid: $uuid, name: $name, name_embedding: $name_embedding, summary: $summary, created_at: $created_at}\n        RETURN n.uuid AS uuid\"\"\",\n            uuid=self.uuid,\n            name=self.name,\n            summary=self.summary,\n            name_embedding=self.name_embedding,\n            created_at=self.created_at,\n        )\n\n        logger.info(f'Saved Node to neo4j: {self.uuid}')\n\n        return result\n```\n\nGraphiti also supports hard deleting nodes and edges using the delete method, which also requires a driver.\n\n```python\n    async def delete(self, driver: AsyncDriver):\n        result = await driver.execute_query(\n            \"\"\"\n        MATCH (n:Entity {uuid: $uuid})\n        DETACH DELETE n\n        \"\"\",\n            uuid=self.uuid,\n        )\n\n        logger.info(f'Deleted Node: {self.uuid}')\n\n        return result\n```\n\nFinally, Graphiti also provides class methods to get nodes and edges by uuid.\nNote that because these are class methods they are called using the class rather than an instance of the class.\n\n```python\n    async def get_by_uuid(cls, driver: AsyncDriver, uuid: str):\n        records, _, _ = await driver.execute_query(\n            \"\"\"\n        MATCH (n:Entity {uuid: $uuid})\n        RETURN\n            n.uuid As uuid, \n            n.name AS name, \n            n.created_at AS created_at, \n            n.summary AS summary\n        \"\"\",\n            uuid=uuid,\n        )\n\n        nodes: list[EntityNode] = []\n\n        for record in records:\n            nodes.append(\n                EntityNode(\n                    uuid=record['uuid'],\n                    name=record['name'],\n                    labels=['Entity'],\n                    created_at=record['created_at'].to_native(),\n                    summary=record['summary'],\n                )\n            )\n\n        logger.info(f'Found Node: {uuid}')\n\n        return nodes[0]\n```",
  "content_length": 2728
}